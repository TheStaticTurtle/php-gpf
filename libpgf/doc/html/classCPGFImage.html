<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libpgf: CPGFImage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PGF.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libpgf
   &#160;<span id="projectnumber">7.21.2</span>
   </div>
   <div id="projectbrief">PGF - Progressive Graphics File</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classCPGFImage.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classCPGFImage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CPGFImage Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>PGF main class.  
 <a href="classCPGFImage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af98838248d4bb5e0b2e89e2cd31b4b71"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#af98838248d4bb5e0b2e89e2cd31b4b71">CPGFImage</a> ()</td></tr>
<tr class="memdesc:af98838248d4bb5e0b2e89e2cd31b4b71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard constructor.  <a href="#af98838248d4bb5e0b2e89e2cd31b4b71">More...</a><br /></td></tr>
<tr class="separator:af98838248d4bb5e0b2e89e2cd31b4b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bdfdce118d4a7c9167154b5ff0bb670"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1bdfdce118d4a7c9167154b5ff0bb670">~CPGFImage</a> ()</td></tr>
<tr class="memdesc:a1bdfdce118d4a7c9167154b5ff0bb670"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a1bdfdce118d4a7c9167154b5ff0bb670">More...</a><br /></td></tr>
<tr class="separator:a1bdfdce118d4a7c9167154b5ff0bb670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3e55e2e2d8ddf79506769feb8938ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a4a3e55e2e2d8ddf79506769feb8938ec">Destroy</a> ()</td></tr>
<tr class="separator:a4a3e55e2e2d8ddf79506769feb8938ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe9092b915a2c5b2361f4db186b991c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#adbe9092b915a2c5b2361f4db186b991c">Open</a> (<a class="el" href="classCPGFStream.html">CPGFStream</a> *stream)</td></tr>
<tr class="separator:adbe9092b915a2c5b2361f4db186b991c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a46482fbfc549f8baa485c9b09f67a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a73a46482fbfc549f8baa485c9b09f67a">IsOpen</a> () const</td></tr>
<tr class="memdesc:a73a46482fbfc549f8baa485c9b09f67a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the PGF has been opened for reading.  <a href="#a73a46482fbfc549f8baa485c9b09f67a">More...</a><br /></td></tr>
<tr class="separator:a73a46482fbfc549f8baa485c9b09f67a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a1d49cdf9da6934381bb25332d85ccf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">Read</a> (int level=0, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:a4a1d49cdf9da6934381bb25332d85ccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25f535f946f5a711576d6b28774cbb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ad25f535f946f5a711576d6b28774cbb9">Read</a> (<a class="el" href="structPGFRect.html">PGFRect</a> &amp;rect, int level=0, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:ad25f535f946f5a711576d6b28774cbb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a126846c7265783e14da0f4dde6c9346b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a126846c7265783e14da0f4dde6c9346b">ReadPreview</a> ()</td></tr>
<tr class="separator:a126846c7265783e14da0f4dde6c9346b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf906b469e11800e819db00009255b90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#abf906b469e11800e819db00009255b90">Reconstruct</a> (int level=0)</td></tr>
<tr class="separator:abf906b469e11800e819db00009255b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a79885f55b60739b16fb961efb041ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6a79885f55b60739b16fb961efb041ce">GetBitmap</a> (int pitch, UINT8 *buff, BYTE bpp, int channelMap[]=nullptr, CallbackPtr cb=nullptr, void *data=nullptr) const</td></tr>
<tr class="separator:a6a79885f55b60739b16fb961efb041ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c2f9a6b99c0e0b3564433e21f88e9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a37c2f9a6b99c0e0b3564433e21f88e9b">GetYUV</a> (int pitch, <a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *buff, BYTE bpp, int channelMap[]=nullptr, CallbackPtr cb=nullptr, void *data=nullptr) const</td></tr>
<tr class="separator:a37c2f9a6b99c0e0b3564433e21f88e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0895f4738c5222de1920c941a71541"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a3c0895f4738c5222de1920c941a71541">ImportBitmap</a> (int pitch, UINT8 *buff, BYTE bpp, int channelMap[]=nullptr, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:a3c0895f4738c5222de1920c941a71541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5685c45a74b14b9f12ee2d81f49718f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a5685c45a74b14b9f12ee2d81f49718f3">ImportYUV</a> (int pitch, <a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *buff, BYTE bpp, int channelMap[]=nullptr, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:a5685c45a74b14b9f12ee2d81f49718f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd13d233dceaeefce3def7d71ebf4f82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#acd13d233dceaeefce3def7d71ebf4f82">Write</a> (<a class="el" href="classCPGFStream.html">CPGFStream</a> *stream, UINT32 *nWrittenBytes=nullptr, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:acd13d233dceaeefce3def7d71ebf4f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d853cd049417f0afc9a868664d7134d"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">WriteHeader</a> (<a class="el" href="classCPGFStream.html">CPGFStream</a> *stream)</td></tr>
<tr class="separator:a1d853cd049417f0afc9a868664d7134d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f0657eaf1a62ab14c01834e5c7adb07"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a0f0657eaf1a62ab14c01834e5c7adb07">WriteImage</a> (<a class="el" href="classCPGFStream.html">CPGFStream</a> *stream, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:a0f0657eaf1a62ab14c01834e5c7adb07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a0ef3ad10c8a14b2b9a8d6153387ffe"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a9a0ef3ad10c8a14b2b9a8d6153387ffe">Write</a> (int level, CallbackPtr cb=nullptr, void *data=nullptr)</td></tr>
<tr class="separator:a9a0ef3ad10c8a14b2b9a8d6153387ffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3215ac6bee3c5f6bb7e1c4b7fc53a4a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a3215ac6bee3c5f6bb7e1c4b7fc53a4a2">ConfigureEncoder</a> (bool useOMP=true, bool favorSpeedOverSize=false)</td></tr>
<tr class="separator:a3215ac6bee3c5f6bb7e1c4b7fc53a4a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c30bb2dab1bf3c51f150300b2745b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a46c30bb2dab1bf3c51f150300b2745b5">ConfigureDecoder</a> (bool useOMP=true, <a class="el" href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096">UserdataPolicy</a> policy=<a class="el" href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096ad52de87e33912adabcf1e22f05e38227">UP_CacheAll</a>, UINT32 prefixSize=0)</td></tr>
<tr class="separator:a46c30bb2dab1bf3c51f150300b2745b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df11c06be23e14f83c9aa343f1204d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a7df11c06be23e14f83c9aa343f1204d0">ResetStreamPos</a> (bool startOfData)</td></tr>
<tr class="separator:a7df11c06be23e14f83c9aa343f1204d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f470e1cfdb1300338e32f0926588a6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a2f470e1cfdb1300338e32f0926588a6c">SetChannel</a> (<a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *channel, int c=0)</td></tr>
<tr class="separator:a2f470e1cfdb1300338e32f0926588a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200790d3be292a19fe8cbdd78ddfc386"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a200790d3be292a19fe8cbdd78ddfc386">SetHeader</a> (const <a class="el" href="structPGFHeader.html">PGFHeader</a> &amp;header, BYTE flags=0, const UINT8 *userData=0, UINT32 userDataLength=0)</td></tr>
<tr class="separator:a200790d3be292a19fe8cbdd78ddfc386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6370e6737d250360cb6431d885a685"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6a6370e6737d250360cb6431d885a685">SetMaxValue</a> (UINT32 maxValue)</td></tr>
<tr class="separator:a6a6370e6737d250360cb6431d885a685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ec0d246d068c55fdea5712f2b1609c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ad5ec0d246d068c55fdea5712f2b1609c">SetProgressMode</a> (<a class="el" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157e">ProgressMode</a> pm)</td></tr>
<tr class="separator:ad5ec0d246d068c55fdea5712f2b1609c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbca597528f7f9bd28ddd95e8f530e24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#abbca597528f7f9bd28ddd95e8f530e24">SetRefreshCallback</a> (<a class="el" href="PGFtypes_8h.html#a80e898ce785fbd6fb0dfcc5903be79c2">RefreshCB</a> callback, void *arg)</td></tr>
<tr class="separator:abbca597528f7f9bd28ddd95e8f530e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b54c9108fa67d99fad592b415b2bf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a35b54c9108fa67d99fad592b415b2bf5">SetColorTable</a> (UINT32 iFirstColor, UINT32 nColors, const RGBQUAD *prgbColors)</td></tr>
<tr class="separator:a35b54c9108fa67d99fad592b415b2bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4be1897b3b07449b7e77f95a29032f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ae4be1897b3b07449b7e77f95a29032f6">GetChannel</a> (int c=0)</td></tr>
<tr class="separator:ae4be1897b3b07449b7e77f95a29032f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9e57bf57786030eab6ed17df9d9342e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#af9e57bf57786030eab6ed17df9d9342e">GetColorTable</a> (UINT32 iFirstColor, UINT32 nColors, RGBQUAD *prgbColors) const</td></tr>
<tr class="separator:af9e57bf57786030eab6ed17df9d9342e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef236343eaa0809a255d1bea58e9bf9d"><td class="memItemLeft" align="right" valign="top">const RGBQUAD *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#aef236343eaa0809a255d1bea58e9bf9d">GetColorTable</a> () const</td></tr>
<tr class="separator:aef236343eaa0809a255d1bea58e9bf9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a485b62ca1f9b649d6ff590fe28657cf3"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structPGFHeader.html">PGFHeader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a485b62ca1f9b649d6ff590fe28657cf3">GetHeader</a> () const</td></tr>
<tr class="separator:a485b62ca1f9b649d6ff590fe28657cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a205a92be52bd2047ade0398ed4bb2afb"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a205a92be52bd2047ade0398ed4bb2afb">GetMaxValue</a> () const</td></tr>
<tr class="separator:a205a92be52bd2047ade0398ed4bb2afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a216a89fa33c755a379ba243610284b03"><td class="memItemLeft" align="right" valign="top">UINT64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a216a89fa33c755a379ba243610284b03">GetUserDataPos</a> () const</td></tr>
<tr class="separator:a216a89fa33c755a379ba243610284b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c092c2b27df184d7e81bef579e270c"><td class="memItemLeft" align="right" valign="top">const UINT8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#aa7c092c2b27df184d7e81bef579e270c">GetUserData</a> (UINT32 &amp;cachedSize, UINT32 *pTotalSize=nullptr) const</td></tr>
<tr class="separator:aa7c092c2b27df184d7e81bef579e270c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf90fa7c083fba0479ce70200cccf716"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#acf90fa7c083fba0479ce70200cccf716">GetEncodedHeaderLength</a> () const</td></tr>
<tr class="separator:acf90fa7c083fba0479ce70200cccf716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d39b7f0067bf5b35b0cd7cbba9a1d4f"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a9d39b7f0067bf5b35b0cd7cbba9a1d4f">GetEncodedLevelLength</a> (int level) const</td></tr>
<tr class="separator:a9d39b7f0067bf5b35b0cd7cbba9a1d4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55a27e09a6bcd1bca6d57335956dc76c"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a55a27e09a6bcd1bca6d57335956dc76c">ReadEncodedHeader</a> (UINT8 *target, UINT32 targetLen) const</td></tr>
<tr class="separator:a55a27e09a6bcd1bca6d57335956dc76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a570d1d1072cdd3e24b838c066abc8da3"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a570d1d1072cdd3e24b838c066abc8da3">ReadEncodedData</a> (int level, UINT8 *target, UINT32 targetLen) const</td></tr>
<tr class="separator:a570d1d1072cdd3e24b838c066abc8da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db1d8a7c652f726b7f15fa3fdc7e958"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a3db1d8a7c652f726b7f15fa3fdc7e958">ChannelWidth</a> (int c=0) const</td></tr>
<tr class="separator:a3db1d8a7c652f726b7f15fa3fdc7e958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8b083f86199861e78334054c945863"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a0e8b083f86199861e78334054c945863">ChannelHeight</a> (int c=0) const</td></tr>
<tr class="separator:a0e8b083f86199861e78334054c945863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f94308750aece503dc6433d1ad89c8a"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a5f94308750aece503dc6433d1ad89c8a">ChannelDepth</a> () const</td></tr>
<tr class="separator:a5f94308750aece503dc6433d1ad89c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a327590f3bda3700649fbc7c99f8206f2"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a327590f3bda3700649fbc7c99f8206f2">Width</a> (int level=0) const</td></tr>
<tr class="separator:a327590f3bda3700649fbc7c99f8206f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab401a02923fc9161e890602f26c829e"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#aab401a02923fc9161e890602f26c829e">Height</a> (int level=0) const</td></tr>
<tr class="separator:aab401a02923fc9161e890602f26c829e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4619eb255afd03dabea2b0afbe6e0d94"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a4619eb255afd03dabea2b0afbe6e0d94">Level</a> () const</td></tr>
<tr class="separator:a4619eb255afd03dabea2b0afbe6e0d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3678d05c031dc4cbf5451e7f4f6bdf3"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels</a> () const</td></tr>
<tr class="separator:ab3678d05c031dc4cbf5451e7f4f6bdf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6f8f9c75dd377a3cd6bf1e07e68531"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a3b6f8f9c75dd377a3cd6bf1e07e68531">IsFullyRead</a> () const</td></tr>
<tr class="memdesc:a3b6f8f9c75dd377a3cd6bf1e07e68531"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if all levels have been read.  <a href="#a3b6f8f9c75dd377a3cd6bf1e07e68531">More...</a><br /></td></tr>
<tr class="separator:a3b6f8f9c75dd377a3cd6bf1e07e68531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d8ca06237591aae49d7f25278067c63"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6d8ca06237591aae49d7f25278067c63">Quality</a> () const</td></tr>
<tr class="separator:a6d8ca06237591aae49d7f25278067c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af712acd16a3b00d55c03e355939086fc"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#af712acd16a3b00d55c03e355939086fc">Channels</a> () const</td></tr>
<tr class="separator:af712acd16a3b00d55c03e355939086fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c60aabdcf2556e9a425052e7f5b5d30"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a8c60aabdcf2556e9a425052e7f5b5d30">Mode</a> () const</td></tr>
<tr class="separator:a8c60aabdcf2556e9a425052e7f5b5d30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9320cc25d748d77a7dfee759f01caa"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ace9320cc25d748d77a7dfee759f01caa">BPP</a> () const</td></tr>
<tr class="separator:ace9320cc25d748d77a7dfee759f01caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9db775cf3a36997b55106fbab7284c14"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">ROIisSupported</a> () const</td></tr>
<tr class="separator:a9db775cf3a36997b55106fbab7284c14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e745b509e9bea4ad35f951f37693fc4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPGFRect.html">PGFRect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6e745b509e9bea4ad35f951f37693fc4">ComputeLevelROI</a> () const</td></tr>
<tr class="separator:a6e745b509e9bea4ad35f951f37693fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc4f75843c3c15f573aaa0131649b10"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a> () const</td></tr>
<tr class="separator:a6cc4f75843c3c15f573aaa0131649b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa872f5010f55a3bc696706d259b52051"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#aa872f5010f55a3bc696706d259b52051">Version</a> () const</td></tr>
<tr class="separator:aa872f5010f55a3bc696706d259b52051"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5c32194271d4e115b8f5c7fdfc1670a5"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a5c32194271d4e115b8f5c7fdfc1670a5">ImportIsSupported</a> (BYTE mode)</td></tr>
<tr class="separator:a5c32194271d4e115b8f5c7fdfc1670a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e2f885a059a39ca15a47ecb497833b"><td class="memItemLeft" align="right" valign="top">static UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ad7e2f885a059a39ca15a47ecb497833b">LevelSizeL</a> (UINT32 size, int level)</td></tr>
<tr class="separator:ad7e2f885a059a39ca15a47ecb497833b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e7712f6033810f386a23f2faec0037"><td class="memItemLeft" align="right" valign="top">static UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a96e7712f6033810f386a23f2faec0037">LevelSizeH</a> (UINT32 size, int level)</td></tr>
<tr class="separator:a96e7712f6033810f386a23f2faec0037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e8d626654a10486149146c8cd41d11"><td class="memItemLeft" align="right" valign="top">static BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a58e8d626654a10486149146c8cd41d11">CodecMajorVersion</a> (BYTE version=<a class="el" href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a>)</td></tr>
<tr class="memdesc:a58e8d626654a10486149146c8cd41d11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return major version.  <a href="#a58e8d626654a10486149146c8cd41d11">More...</a><br /></td></tr>
<tr class="separator:a58e8d626654a10486149146c8cd41d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a368601b5942e4406cdb87120406ff075"><td class="memItemLeft" align="right" valign="top">static BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a368601b5942e4406cdb87120406ff075">MaxChannelDepth</a> (BYTE version=<a class="el" href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a>)</td></tr>
<tr class="separator:a368601b5942e4406cdb87120406ff075"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae3901a689b7d1dd46d48b042c3d31d5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCWaveletTransform.html">CWaveletTransform</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a> [<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td></tr>
<tr class="memdesc:ae3901a689b7d1dd46d48b042c3d31d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">wavelet transformed color channels  <a href="#ae3901a689b7d1dd46d48b042c3d31d5c">More...</a><br /></td></tr>
<tr class="separator:ae3901a689b7d1dd46d48b042c3d31d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f7f20b38a9cb3a9c88032f5f886345"><td class="memItemLeft" align="right" valign="top"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a> [<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td></tr>
<tr class="memdesc:a36f7f20b38a9cb3a9c88032f5f886345"><td class="mdescLeft">&#160;</td><td class="mdescRight">untransformed channels in YUV format  <a href="#a36f7f20b38a9cb3a9c88032f5f886345">More...</a><br /></td></tr>
<tr class="separator:a36f7f20b38a9cb3a9c88032f5f886345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1058b29a3d046e171a2fe48168b66d38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCDecoder.html">CDecoder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a></td></tr>
<tr class="memdesc:a1058b29a3d046e171a2fe48168b66d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">PGF decoder.  <a href="#a1058b29a3d046e171a2fe48168b66d38">More...</a><br /></td></tr>
<tr class="separator:a1058b29a3d046e171a2fe48168b66d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ef048255812525cd56d7b04df5e6731"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCEncoder.html">CEncoder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a></td></tr>
<tr class="memdesc:a6ef048255812525cd56d7b04df5e6731"><td class="mdescLeft">&#160;</td><td class="mdescRight">PGF encoder.  <a href="#a6ef048255812525cd56d7b04df5e6731">More...</a><br /></td></tr>
<tr class="separator:a6ef048255812525cd56d7b04df5e6731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1635ef5dca13bd07276d112a72316a73"><td class="memItemLeft" align="right" valign="top">UINT32 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a></td></tr>
<tr class="memdesc:a1635ef5dca13bd07276d112a72316a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">length of each level in bytes; first level starts immediately after this array  <a href="#a1635ef5dca13bd07276d112a72316a73">More...</a><br /></td></tr>
<tr class="separator:a1635ef5dca13bd07276d112a72316a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6d97aca28795fae697fdda4b8acd8f9"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a> [<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td></tr>
<tr class="memdesc:ab6d97aca28795fae697fdda4b8acd8f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">width of each channel at current level  <a href="#ab6d97aca28795fae697fdda4b8acd8f9">More...</a><br /></td></tr>
<tr class="separator:ab6d97aca28795fae697fdda4b8acd8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a170fd448152303a2d44848a52a8916a0"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a> [<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td></tr>
<tr class="memdesc:a170fd448152303a2d44848a52a8916a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">height of each channel at current level  <a href="#a170fd448152303a2d44848a52a8916a0">More...</a><br /></td></tr>
<tr class="separator:a170fd448152303a2d44848a52a8916a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ed0ec587742ebf46f72be4abde305d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPGFPreHeader.html">PGFPreHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a></td></tr>
<tr class="memdesc:ad5ed0ec587742ebf46f72be4abde305d"><td class="mdescLeft">&#160;</td><td class="mdescRight">PGF pre-header.  <a href="#ad5ed0ec587742ebf46f72be4abde305d">More...</a><br /></td></tr>
<tr class="separator:ad5ed0ec587742ebf46f72be4abde305d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a45b90decf13d8e8243bd84bac690d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPGFHeader.html">PGFHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a></td></tr>
<tr class="memdesc:a1a45b90decf13d8e8243bd84bac690d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">PGF file header.  <a href="#a1a45b90decf13d8e8243bd84bac690d0">More...</a><br /></td></tr>
<tr class="separator:a1a45b90decf13d8e8243bd84bac690d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8635df22839ffb68bada53e38b9ce73"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPGFPostHeader.html">PGFPostHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a></td></tr>
<tr class="memdesc:ab8635df22839ffb68bada53e38b9ce73"><td class="mdescLeft">&#160;</td><td class="mdescRight">PGF post-header.  <a href="#ab8635df22839ffb68bada53e38b9ce73">More...</a><br /></td></tr>
<tr class="separator:ab8635df22839ffb68bada53e38b9ce73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4ae6e169ddf84e32cf9b57a22800b3"><td class="memItemLeft" align="right" valign="top">UINT64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">m_userDataPos</a></td></tr>
<tr class="memdesc:acf4ae6e169ddf84e32cf9b57a22800b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">stream position of user data  <a href="#acf4ae6e169ddf84e32cf9b57a22800b3">More...</a><br /></td></tr>
<tr class="separator:acf4ae6e169ddf84e32cf9b57a22800b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2790b468b6d4841cd34473c4b61d0c7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a></td></tr>
<tr class="memdesc:a2790b468b6d4841cd34473c4b61d0c7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">transform level of current image  <a href="#a2790b468b6d4841cd34473c4b61d0c7f">More...</a><br /></td></tr>
<tr class="separator:a2790b468b6d4841cd34473c4b61d0c7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e28eef51d17c3bd0be4d4f758a6a86"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">m_userDataPolicy</a></td></tr>
<tr class="memdesc:a18e28eef51d17c3bd0be4d4f758a6a86"><td class="mdescLeft">&#160;</td><td class="mdescRight">user data (metadata) policy during open  <a href="#a18e28eef51d17c3bd0be4d4f758a6a86">More...</a><br /></td></tr>
<tr class="separator:a18e28eef51d17c3bd0be4d4f758a6a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57cc024db6e510f95f3238f448a0fed5"><td class="memItemLeft" align="right" valign="top">BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a></td></tr>
<tr class="memdesc:a57cc024db6e510f95f3238f448a0fed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">quantization parameter  <a href="#a57cc024db6e510f95f3238f448a0fed5">More...</a><br /></td></tr>
<tr class="separator:a57cc024db6e510f95f3238f448a0fed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9226595ea6b907e4d07301a6ee641b87"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a></td></tr>
<tr class="memdesc:a9226595ea6b907e4d07301a6ee641b87"><td class="mdescLeft">&#160;</td><td class="mdescRight">chrominance channels are downsampled  <a href="#a9226595ea6b907e4d07301a6ee641b87">More...</a><br /></td></tr>
<tr class="separator:a9226595ea6b907e4d07301a6ee641b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6925d3950e8f48487205d46de7920d3e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">m_favorSpeedOverSize</a></td></tr>
<tr class="memdesc:a6925d3950e8f48487205d46de7920d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">favor encoding speed over compression ratio  <a href="#a6925d3950e8f48487205d46de7920d3e">More...</a><br /></td></tr>
<tr class="separator:a6925d3950e8f48487205d46de7920d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a140110570c6d492b23db50189d3f4d48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">m_useOMPinEncoder</a></td></tr>
<tr class="memdesc:a140110570c6d492b23db50189d3f4d48"><td class="mdescLeft">&#160;</td><td class="mdescRight">use Open MP in encoder  <a href="#a140110570c6d492b23db50189d3f4d48">More...</a><br /></td></tr>
<tr class="separator:a140110570c6d492b23db50189d3f4d48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01d0752d97900040fa1db7f02d4770cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">m_useOMPinDecoder</a></td></tr>
<tr class="memdesc:a01d0752d97900040fa1db7f02d4770cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">use Open MP in decoder  <a href="#a01d0752d97900040fa1db7f02d4770cb">More...</a><br /></td></tr>
<tr class="separator:a01d0752d97900040fa1db7f02d4770cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d3fe5a8622634d1d0faf56cde335ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#af6d3fe5a8622634d1d0faf56cde335ef">m_streamReinitialized</a></td></tr>
<tr class="memdesc:af6d3fe5a8622634d1d0faf56cde335ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">stream has been reinitialized  <a href="#af6d3fe5a8622634d1d0faf56cde335ef">More...</a><br /></td></tr>
<tr class="separator:af6d3fe5a8622634d1d0faf56cde335ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79627ae9b19c69589eaa2ba7711ddd00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPGFRect.html">PGFRect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a79627ae9b19c69589eaa2ba7711ddd00">m_roi</a></td></tr>
<tr class="memdesc:a79627ae9b19c69589eaa2ba7711ddd00"><td class="mdescLeft">&#160;</td><td class="mdescRight">region of interest  <a href="#a79627ae9b19c69589eaa2ba7711ddd00">More...</a><br /></td></tr>
<tr class="separator:a79627ae9b19c69589eaa2ba7711ddd00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab32b4053e41cc205cce45be8045e603b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ab32b4053e41cc205cce45be8045e603b">Init</a> ()</td></tr>
<tr class="separator:ab32b4053e41cc205cce45be8045e603b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ac56e997c83c4c7fe8283b70b84b85"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ad1ac56e997c83c4c7fe8283b70b84b85">ComputeLevels</a> ()</td></tr>
<tr class="separator:ad1ac56e997c83c4c7fe8283b70b84b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f517491e6b64353cd9ba45f8697b865"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a0f517491e6b64353cd9ba45f8697b865">CompleteHeader</a> ()</td></tr>
<tr class="separator:a0f517491e6b64353cd9ba45f8697b865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a870dea53390ffe1af210069f6b30eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a7a870dea53390ffe1af210069f6b30eb">RgbToYuv</a> (int pitch, UINT8 *rgbBuff, BYTE bpp, int channelMap[], CallbackPtr cb, void *data)</td></tr>
<tr class="separator:a7a870dea53390ffe1af210069f6b30eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db75413dfdc6f752088a53de0e6b998"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1db75413dfdc6f752088a53de0e6b998">Downsample</a> (int nChannel)</td></tr>
<tr class="separator:a1db75413dfdc6f752088a53de0e6b998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921e1ec08da8ddf6ab4d5657e5610fee"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a921e1ec08da8ddf6ab4d5657e5610fee">UpdatePostHeaderSize</a> ()</td></tr>
<tr class="separator:a921e1ec08da8ddf6ab4d5657e5610fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1075a31893ee4ea2c686f5b471dd3664"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1075a31893ee4ea2c686f5b471dd3664">WriteLevel</a> ()</td></tr>
<tr class="separator:a1075a31893ee4ea2c686f5b471dd3664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9c711365d0d6188b89262027e60265"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structPGFRect.html">PGFRect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a1a9c711365d0d6188b89262027e60265">GetAlignedROI</a> (int c=0) const</td></tr>
<tr class="separator:a1a9c711365d0d6188b89262027e60265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83c737ee649fdc92c55b7a6ffe1153b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a83c737ee649fdc92c55b7a6ffe1153b2">SetROI</a> (<a class="el" href="structPGFRect.html">PGFRect</a> rect)</td></tr>
<tr class="separator:a83c737ee649fdc92c55b7a6ffe1153b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc3d79612346af8109230039b1077c46"><td class="memItemLeft" align="right" valign="top">UINT8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">Clamp4</a> (<a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> v) const</td></tr>
<tr class="separator:adc3d79612346af8109230039b1077c46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15adcf6db4b6c3f60db26c7809b0bd54"><td class="memItemLeft" align="right" valign="top">UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a15adcf6db4b6c3f60db26c7809b0bd54">Clamp6</a> (<a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> v) const</td></tr>
<tr class="separator:a15adcf6db4b6c3f60db26c7809b0bd54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7748968cec3128d6dbdeb224814ca14a"><td class="memItemLeft" align="right" valign="top">UINT8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a> (<a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> v) const</td></tr>
<tr class="separator:a7748968cec3128d6dbdeb224814ca14a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a666cd327643276fdd5e8b123fcbc991f"><td class="memItemLeft" align="right" valign="top">UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a> (<a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> v) const</td></tr>
<tr class="separator:a666cd327643276fdd5e8b123fcbc991f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075dc79f2453625086a3f1987d692296"><td class="memItemLeft" align="right" valign="top">UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a075dc79f2453625086a3f1987d692296">Clamp31</a> (<a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> v) const</td></tr>
<tr class="separator:a075dc79f2453625086a3f1987d692296"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac262a389df92493dfca63b2f1f06fe78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="PGFtypes_8h.html#a80e898ce785fbd6fb0dfcc5903be79c2">RefreshCB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">m_cb</a></td></tr>
<tr class="memdesc:ac262a389df92493dfca63b2f1f06fe78"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to refresh callback procedure  <a href="#ac262a389df92493dfca63b2f1f06fe78">More...</a><br /></td></tr>
<tr class="separator:ac262a389df92493dfca63b2f1f06fe78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45861a83c95188610063233149187f3c"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a45861a83c95188610063233149187f3c">m_cbArg</a></td></tr>
<tr class="memdesc:a45861a83c95188610063233149187f3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">refresh callback argument  <a href="#a45861a83c95188610063233149187f3c">More...</a><br /></td></tr>
<tr class="separator:a45861a83c95188610063233149187f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc2499451b8f96483a892e53fe5849b1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">m_percent</a></td></tr>
<tr class="memdesc:adc2499451b8f96483a892e53fe5849b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">progress [0..1]  <a href="#adc2499451b8f96483a892e53fe5849b1">More...</a><br /></td></tr>
<tr class="separator:adc2499451b8f96483a892e53fe5849b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4d6d5ef343f0f428b35c9bf1020569"><td class="memItemLeft" align="right" valign="top"><a class="el" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157e">ProgressMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">m_progressMode</a></td></tr>
<tr class="memdesc:a8b4d6d5ef343f0f428b35c9bf1020569"><td class="mdescLeft">&#160;</td><td class="mdescRight">progress mode used in Read and Write; PM_Relative is default mode  <a href="#a8b4d6d5ef343f0f428b35c9bf1020569">More...</a><br /></td></tr>
<tr class="separator:a8b4d6d5ef343f0f428b35c9bf1020569"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PGF main class. </p>
<p>PGF image class is the main class. You always need a PGF object for encoding or decoding image data. Decoding: <a class="el" href="classCPGFImage.html#adbe9092b915a2c5b2361f4db186b991c">Open()</a> <a class="el" href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">Read()</a> <a class="el" href="classCPGFImage.html#a6a79885f55b60739b16fb961efb041ce">GetBitmap()</a> Encoding: <a class="el" href="classCPGFImage.html#a200790d3be292a19fe8cbdd78ddfc386">SetHeader()</a> <a class="el" href="classCPGFImage.html#a3c0895f4738c5222de1920c941a71541">ImportBitmap()</a> <a class="el" href="classCPGFImage.html#acd13d233dceaeefce3def7d71ebf4f82">Write()</a> </p><dl class="section author"><dt>Author</dt><dd>C. Stamm, R. Spuler </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00053">53</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af98838248d4bb5e0b2e89e2cd31b4b71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af98838248d4bb5e0b2e89e2cd31b4b71">&#9670;&nbsp;</a></span>CPGFImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CPGFImage::CPGFImage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Standard constructor. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00064">64</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                     {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="classCPGFImage.html#ab32b4053e41cc205cce45be8045e603b">Init</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_ab32b4053e41cc205cce45be8045e603b"><div class="ttname"><a href="classCPGFImage.html#ab32b4053e41cc205cce45be8045e603b">CPGFImage::Init</a></div><div class="ttdeci">void Init()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00069">PGFimage.cpp:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1bdfdce118d4a7c9167154b5ff0bb670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bdfdce118d4a7c9167154b5ff0bb670">&#9670;&nbsp;</a></span>~CPGFImage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CPGFImage::~CPGFImage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00117">117</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                      {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> = -100; <span class="comment">// unusual value used as marker in Destroy()</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="classCPGFImage.html#a4a3e55e2e2d8ddf79506769feb8938ec">Destroy</a>();</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a4a3e55e2e2d8ddf79506769feb8938ec"><div class="ttname"><a href="classCPGFImage.html#a4a3e55e2e2d8ddf79506769feb8938ec">CPGFImage::Destroy</a></div><div class="ttdeci">void Destroy()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00124">PGFimage.cpp:124</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ace9320cc25d748d77a7dfee759f01caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace9320cc25d748d77a7dfee759f01caa">&#9670;&nbsp;</a></span>BPP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::BPP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of bits per pixel. Valid values can be 1, 8, 12, 16, 24, 32, 48, 64. </p><dl class="section return"><dt>Returns</dt><dd>Number of bits per pixel. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00461">461</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f94308750aece503dc6433d1ad89c8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f94308750aece503dc6433d1ad89c8a">&#9670;&nbsp;</a></span>ChannelDepth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::ChannelDepth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return bits per channel of the image's encoder. </p><dl class="section return"><dt>Returns</dt><dd>Bits per channel </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00406">406</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a368601b5942e4406cdb87120406ff075">MaxChannelDepth</a>(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a>); }</div><div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="classCPGFImage_html_a368601b5942e4406cdb87120406ff075"><div class="ttname"><a href="classCPGFImage.html#a368601b5942e4406cdb87120406ff075">CPGFImage::MaxChannelDepth</a></div><div class="ttdeci">static BYTE MaxChannelDepth(BYTE version=PGFVersion)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00518">PGFimage.h:518</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e8b083f86199861e78334054c945863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e8b083f86199861e78334054c945863">&#9670;&nbsp;</a></span>ChannelHeight()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::ChannelHeight </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return current image height of given channel in pixels. The returned height depends on the levels read so far and on ROI. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>A channel index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Channel height in pixels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00401">401</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{ ASSERT(c &gt;= 0 &amp;&amp; c &lt; <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>); <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[c]; }</div><div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af712acd16a3b00d55c03e355939086fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af712acd16a3b00d55c03e355939086fc">&#9670;&nbsp;</a></span>Channels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::Channels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of image channels. An image of type RGB contains 3 image channels (B, G, R). </p><dl class="section return"><dt>Returns</dt><dd>Number of image channels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00448">448</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3db1d8a7c652f726b7f15fa3fdc7e958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db1d8a7c652f726b7f15fa3fdc7e958">&#9670;&nbsp;</a></span>ChannelWidth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::ChannelWidth </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return current image width of given channel in pixels. The returned width depends on the levels read so far and on ROI. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>A channel index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Channel width in pixels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00394">394</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{ ASSERT(c &gt;= 0 &amp;&amp; c &lt; <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>); <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[c]; }</div><div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a666cd327643276fdd5e8b123fcbc991f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a666cd327643276fdd5e8b123fcbc991f">&#9670;&nbsp;</a></span>Clamp16()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT16 CPGFImage::Clamp16 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00573">573</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                      {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                <span class="keywordflow">if</span> (v &amp; 0xFFFF0000) <span class="keywordflow">return</span> (v &lt; 0) ? (UINT16)0: (UINT16)65535; <span class="keywordflow">else</span> <span class="keywordflow">return</span> (UINT16)v;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        }       </div></div><!-- fragment -->
</div>
</div>
<a id="a075dc79f2453625086a3f1987d692296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a075dc79f2453625086a3f1987d692296">&#9670;&nbsp;</a></span>Clamp31()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::Clamp31 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00576">576</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                      {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">return</span> (v &lt; 0) ? 0 : (UINT32)v;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        }       </div></div><!-- fragment -->
</div>
</div>
<a id="adc3d79612346af8109230039b1077c46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc3d79612346af8109230039b1077c46">&#9670;&nbsp;</a></span>Clamp4()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT8 CPGFImage::Clamp4 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00563">563</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                    {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">if</span> (v &amp; 0xFFFFFFF0) <span class="keywordflow">return</span> (v &lt; 0) ? (UINT8)0: (UINT8)15; <span class="keywordflow">else</span> <span class="keywordflow">return</span> (UINT8)v;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }       </div></div><!-- fragment -->
</div>
</div>
<a id="a15adcf6db4b6c3f60db26c7809b0bd54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15adcf6db4b6c3f60db26c7809b0bd54">&#9670;&nbsp;</a></span>Clamp6()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT16 CPGFImage::Clamp6 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00566">566</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                     {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <span class="keywordflow">if</span> (v &amp; 0xFFFFFFC0) <span class="keywordflow">return</span> (v &lt; 0) ? (UINT16)0: (UINT16)63; <span class="keywordflow">else</span> <span class="keywordflow">return</span> (UINT16)v;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        }       </div></div><!-- fragment -->
</div>
</div>
<a id="a7748968cec3128d6dbdeb224814ca14a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7748968cec3128d6dbdeb224814ca14a">&#9670;&nbsp;</a></span>Clamp8()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT8 CPGFImage::Clamp8 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00569">569</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                    {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <span class="comment">// needs only one test in the normal case</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <span class="keywordflow">if</span> (v &amp; 0xFFFFFF00) <span class="keywordflow">return</span> (v &lt; 0) ? (UINT8)0 : (UINT8)255; <span class="keywordflow">else</span> <span class="keywordflow">return</span> (UINT8)v;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        }</div></div><!-- fragment -->
</div>
</div>
<a id="a58e8d626654a10486149146c8cd41d11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58e8d626654a10486149146c8cd41d11">&#9670;&nbsp;</a></span>CodecMajorVersion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::CodecMajorVersion </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>version</em> = <code><a class="el" href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return major version. </p>
<p>Return codec major version. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>pgf pre-header version number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PGF major of given version </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00767">767</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                              {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">if</span> (version &amp; <a class="code" href="PGFtypes_8h.html#a7ec86ea7c424e6e90984fb8ef0e3ada0">Version7</a>) <span class="keywordflow">return</span> 7;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">if</span> (version &amp; <a class="code" href="PGFtypes_8h.html#ab75c5e81917cb1ee3ec6396af51aff27">Version6</a>) <span class="keywordflow">return</span> 6;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="keywordflow">if</span> (version &amp; <a class="code" href="PGFtypes_8h.html#a99612b00f7a591c93702520453567913">Version5</a>) <span class="keywordflow">return</span> 5;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">if</span> (version &amp; <a class="code" href="PGFtypes_8h.html#aa67f9095ea51d6ffdc580497bc70d6ce">Version2</a>) <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div><div class="ttc" id="PGFtypes_8h_html_ab75c5e81917cb1ee3ec6396af51aff27"><div class="ttname"><a href="PGFtypes_8h.html#ab75c5e81917cb1ee3ec6396af51aff27">Version6</a></div><div class="ttdeci">#define Version6</div><div class="ttdoc">hSize in PGFPreHeader uses 32 bits instead of 16 bits</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00072">PGFtypes.h:72</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_aa67f9095ea51d6ffdc580497bc70d6ce"><div class="ttname"><a href="PGFtypes_8h.html#aa67f9095ea51d6ffdc580497bc70d6ce">Version2</a></div><div class="ttdeci">#define Version2</div><div class="ttdoc">data structure PGFHeader of major version 2</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00068">PGFtypes.h:68</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a7ec86ea7c424e6e90984fb8ef0e3ada0"><div class="ttname"><a href="PGFtypes_8h.html#a7ec86ea7c424e6e90984fb8ef0e3ada0">Version7</a></div><div class="ttdeci">#define Version7</div><div class="ttdoc">Codec major and minor version number stored in PGFHeader.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00073">PGFtypes.h:73</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a99612b00f7a591c93702520453567913"><div class="ttname"><a href="PGFtypes_8h.html#a99612b00f7a591c93702520453567913">Version5</a></div><div class="ttdeci">#define Version5</div><div class="ttdoc">new coding scheme since major version 5</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00071">PGFtypes.h:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f517491e6b64353cd9ba45f8697b865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f517491e6b64353cd9ba45f8697b865">&#9670;&nbsp;</a></span>CompleteHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::CompleteHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00218">218</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                               {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// set current codec version</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a637699477fb97e62d8cc3c102fac1fbb">version</a> = <a class="code" href="structPGFVersionNumber.html">PGFVersionNumber</a>(<a class="code" href="PGFtypes_8h.html#adec7594db053d6c7c8c067862d71da5f">PGFMajorNumber</a>, <a class="code" href="PGFtypes_8h.html#aa53f29ff00b39013ff71bf521177b9de">PGFYear</a>, <a class="code" href="PGFtypes_8h.html#a55d535a2534a87009e7aea0543744e07">PGFWeek</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a797bd5db500e431c26b93c6b4686c257">ImageModeUnknown</a>) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="comment">// undefined mode</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">switch</span>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="keywordflow">case</span> 1: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">case</span> 8: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="keywordflow">case</span> 12: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">case</span> 16: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">case</span> 24: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="keywordflow">case</span> 32: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="keywordflow">case</span> 48: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="keywordflow">default</span>: <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="comment">// undefined bpp</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">switch</span>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a>) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a>: </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 1;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a>:</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a>:</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 8;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a>:</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 12;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a>:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a>:</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 16;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>:</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a>:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 24;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>:</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a>:</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a>:</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 32;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a>:</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>:</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 48;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a>:</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 64;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                        ASSERT(<span class="keyword">false</span>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> = 24;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                }</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        } </div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 32) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <span class="comment">// change mode</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> = <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 8) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 8) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 16) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 32) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 24) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 32) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 12) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 16) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 48) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 24) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 48) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 32) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> != 64) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="comment">// set number of channels</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="keywordflow">switch</span>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a>) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a>: </div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a>:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a>:</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a>:</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a>:</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> = 1; </div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>:</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a>:</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a>:</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a>:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a>:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> = 3;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>:</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a>:</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a>:</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> = 4;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <span class="keywordflow">default</span>:</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="comment">// store used bits per channel</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        UINT8 bpc = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>/<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> (bpc &gt; 31) bpc = 31;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">usedBitsPerChannel</a> || <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">usedBitsPerChannel</a> &gt; bpc) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">usedBitsPerChannel</a> = bpc;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="ttc" id="PGFplatform_8h_html_af1937c5b38a21ec5e6b3e11851264be2"><div class="ttname"><a href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a></div><div class="ttdeci">#define ImageModeIndexedColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00100">PGFplatform.h:100</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a1dbd9112d53e5eea856e65ed1e9c6d50"><div class="ttname"><a href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a></div><div class="ttdeci">#define ImageModeRGB12</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00117">PGFplatform.h:117</a></div></div>
<div class="ttc" id="structPGFHeader_html_a3ddaf075db8ee812ad688d9ed39e0698"><div class="ttname"><a href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">PGFHeader::mode</a></div><div class="ttdeci">UINT8 mode</div><div class="ttdoc">image mode according to Adobe's image modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00158">PGFtypes.h:158</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_aa53f29ff00b39013ff71bf521177b9de"><div class="ttname"><a href="PGFtypes_8h.html#aa53f29ff00b39013ff71bf521177b9de">PGFYear</a></div><div class="ttdeci">#define PGFYear</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00045">PGFtypes.h:45</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adec7594db053d6c7c8c067862d71da5f"><div class="ttname"><a href="PGFtypes_8h.html#adec7594db053d6c7c8c067862d71da5f">PGFMajorNumber</a></div><div class="ttdeci">#define PGFMajorNumber</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00044">PGFtypes.h:44</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ab7cb460804a8abce27d823d09682c85b"><div class="ttname"><a href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a></div><div class="ttdeci">#define ImageModeRGBA</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00115">PGFplatform.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aa1d93456909be3c716a8c5a30b191c00"><div class="ttname"><a href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a></div><div class="ttdeci">#define ImageModeLabColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00107">PGFplatform.h:107</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aedd00370d778fa28db56e5d4032d4c5c"><div class="ttname"><a href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a></div><div class="ttdeci">#define ImageModeGray16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00108">PGFplatform.h:108</a></div></div>
<div class="ttc" id="structPGFHeader_html_abddcc9ee6e17690986cf77a6d16aceb6"><div class="ttname"><a href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">PGFHeader::usedBitsPerChannel</a></div><div class="ttdeci">UINT8 usedBitsPerChannel</div><div class="ttdoc">number of used bits per channel in 16- and 32-bit per channel modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00159">PGFtypes.h:159</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ae7de617953bf44d768dfd82b62a98db5"><div class="ttname"><a href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a></div><div class="ttdeci">#define ImageModeLab48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00110">PGFplatform.h:110</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af50b920dae1922b4eb0bcd82361d880c"><div class="ttname"><a href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a></div><div class="ttdeci">#define ImageModeCMYKColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00102">PGFplatform.h:102</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac73bfc2f52b9da3083b7087d154c1e2e"><div class="ttname"><a href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a></div><div class="ttdeci">#define ImageModeGrayScale</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00099">PGFplatform.h:99</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a55d535a2534a87009e7aea0543744e07"><div class="ttname"><a href="PGFtypes_8h.html#a55d535a2534a87009e7aea0543744e07">PGFWeek</a></div><div class="ttdeci">#define PGFWeek</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00046">PGFtypes.h:46</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a205e54791f7ad54d357330bb99cab3b2"><div class="ttname"><a href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a></div><div class="ttdeci">#define ImageModeGray32</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00116">PGFplatform.h:116</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a797bd5db500e431c26b93c6b4686c257"><div class="ttname"><a href="PGFplatform_8h.html#a797bd5db500e431c26b93c6b4686c257">ImageModeUnknown</a></div><div class="ttdeci">#define ImageModeUnknown</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00119">PGFplatform.h:119</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a07e2059cc6697336c5484447578264fc"><div class="ttname"><a href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a></div><div class="ttdeci">#define ImageModeRGBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00101">PGFplatform.h:101</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a8905b28d0e3b96cf340ed34957738648"><div class="ttname"><a href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a></div><div class="ttdeci">#define ImageModeBitmap</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00098">PGFplatform.h:98</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="structPGFHeader_html_a637699477fb97e62d8cc3c102fac1fbb"><div class="ttname"><a href="structPGFHeader.html#a637699477fb97e62d8cc3c102fac1fbb">PGFHeader::version</a></div><div class="ttdeci">PGFVersionNumber version</div><div class="ttdoc">codec version number: (since Version 7)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00160">PGFtypes.h:160</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac250ca543e6f93f370614801122b61f6"><div class="ttname"><a href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a></div><div class="ttdeci">#define ImageModeCMYK64</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00111">PGFplatform.h:111</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aadaf1bd7eedf80c33287cfd311dbf068"><div class="ttname"><a href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a></div><div class="ttdeci">#define ImageModeRGB16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00118">PGFplatform.h:118</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac04b7a3633a0caadba20e20e161239e1"><div class="ttname"><a href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a></div><div class="ttdeci">#define ImageModeRGB48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00109">PGFplatform.h:109</a></div></div>
<div class="ttc" id="structPGFVersionNumber_html"><div class="ttname"><a href="structPGFVersionNumber.html">PGFVersionNumber</a></div><div class="ttdoc">version number stored in header since major version 7</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00132">PGFtypes.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6e745b509e9bea4ad35f951f37693fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e745b509e9bea4ad35f951f37693fc4">&#9670;&nbsp;</a></span>ComputeLevelROI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPGFRect.html">PGFRect</a> CPGFImage::ComputeLevelROI </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return ROI of channel 0 at current level in pixels. The returned rect is only valid after reading a ROI. </p><dl class="section return"><dt>Returns</dt><dd>ROI in pixels </dd></dl>

</div>
</div>
<a id="ad1ac56e997c83c4c7fe8283b70b84b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ac56e997c83c4c7fe8283b70b84b85">&#9670;&nbsp;</a></span>ComputeLevels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ComputeLevels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00853">853</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                              {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> maxThumbnailWidth = 20*<a class="code" href="WaveletTransform_8h.html#a93633fc816f186e990eabf5e8f20a40f">FilterSize</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> m = <a class="code" href="PGFplatform_8h.html#ad6d0138bf7e2cdaabeedc3fea40767ad">__min</a>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <span class="keywordtype">int</span> s = m;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &lt; 1 || <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &gt; <a class="code" href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a>) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> = 1;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                <span class="comment">// compute a good value depending on the size of the image</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                <span class="keywordflow">while</span> (s &gt; maxThumbnailWidth) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>++;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                        s &gt;&gt;= 1;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordtype">int</span> levels = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>; <span class="comment">// we need a signed value during level reduction</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        <span class="comment">// reduce number of levels if the image size is smaller than FilterSize*(2^levels)</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        s = <a class="code" href="WaveletTransform_8h.html#a93633fc816f186e990eabf5e8f20a40f">FilterSize</a>*(1 &lt;&lt; levels);   <span class="comment">// must be at least the double filter size because of subsampling</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keywordflow">while</span> (m &lt; s) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                levels--;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                s &gt;&gt;= 1;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">if</span> (levels &gt; <a class="code" href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a>) <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> = <a class="code" href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (levels &lt; 0) <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> = 0;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keywordflow">else</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> = (UINT8)levels;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="comment">// used in Write when PM_Absolute</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">m_percent</a> = pow(0.25, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        ASSERT(0 &lt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &lt;= <a class="code" href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div><div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="WaveletTransform_8h_html_a93633fc816f186e990eabf5e8f20a40f"><div class="ttname"><a href="WaveletTransform_8h.html#a93633fc816f186e990eabf5e8f20a40f">FilterSize</a></div><div class="ttdeci">const UINT32 FilterSize</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8h_source.html#l00039">WaveletTransform.h:39</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a2468e509eae9683e25af403249b743a3"><div class="ttname"><a href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a></div><div class="ttdeci">#define MaxLevel</div><div class="ttdoc">maximum number of transform levels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00062">PGFtypes.h:62</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ad6d0138bf7e2cdaabeedc3fea40767ad"><div class="ttname"><a href="PGFplatform_8h.html#ad6d0138bf7e2cdaabeedc3fea40767ad">__min</a></div><div class="ttdeci">#define __min(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00091">PGFplatform.h:91</a></div></div>
<div class="ttc" id="classCPGFImage_html_adc2499451b8f96483a892e53fe5849b1"><div class="ttname"><a href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">CPGFImage::m_percent</a></div><div class="ttdeci">double m_percent</div><div class="ttdoc">progress [0..1]</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00547">PGFimage.h:547</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46c30bb2dab1bf3c51f150300b2745b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c30bb2dab1bf3c51f150300b2745b5">&#9670;&nbsp;</a></span>ConfigureDecoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ConfigureDecoder </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useOMP</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096">UserdataPolicy</a>&#160;</td>
          <td class="paramname"><em>policy</em> = <code><a class="el" href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096ad52de87e33912adabcf1e22f05e38227">UP_CacheAll</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>prefixSize</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Configures the decoder. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">useOMP</td><td>Use parallel threading with Open MP during decoding. Default value: true. Influences the decoding only if the codec has been compiled with OpenMP support. </td></tr>
    <tr><td class="paramname">policy</td><td>The file might contain user data (e.g. metadata). The policy defines the behaviour during <a class="el" href="classCPGFImage.html#adbe9092b915a2c5b2361f4db186b991c">Open()</a>. UP_CacheAll: User data is read and stored completely in a new allocated memory block. It can be accessed by <a class="el" href="classCPGFImage.html#aa7c092c2b27df184d7e81bef579e270c">GetUserData()</a>. UP_CachePrefix: Only prefixSize bytes at the beginning of the user data are stored in a new allocated memory block. It can be accessed by <a class="el" href="classCPGFImage.html#aa7c092c2b27df184d7e81bef579e270c">GetUserData()</a>. UP_Skip: User data is skipped and nothing is cached. </td></tr>
    <tr><td class="paramname">prefixSize</td><td>Is only used in combination with UP_CachePrefix. It defines the number of bytes cached. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00260">260</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{ ASSERT(prefixSize &lt;= <a class="code" href="PGFtypes_8h.html#a513fcd9e30f1a99d382b5c001499cdf5">MaxUserDataSize</a>);  <a class="code" href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">m_useOMPinDecoder</a> = useOMP; <a class="code" href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">m_userDataPolicy</a> = (<a class="code" href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096a36fd199cb724d615fbe67a12f7ab69d0">UP_CachePrefix</a>) ? prefixSize : 0xFFFFFFFF - policy; }</div><div class="ttc" id="classCPGFImage_html_a01d0752d97900040fa1db7f02d4770cb"><div class="ttname"><a href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">CPGFImage::m_useOMPinDecoder</a></div><div class="ttdeci">bool m_useOMPinDecoder</div><div class="ttdoc">use Open MP in decoder</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00538">PGFimage.h:538</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a0e70eeba0994fafcbfe6cbea3a734096a36fd199cb724d615fbe67a12f7ab69d0"><div class="ttname"><a href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096a36fd199cb724d615fbe67a12f7ab69d0">UP_CachePrefix</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00101">PGFtypes.h:101</a></div></div>
<div class="ttc" id="classCPGFImage_html_a18e28eef51d17c3bd0be4d4f758a6a86"><div class="ttname"><a href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">CPGFImage::m_userDataPolicy</a></div><div class="ttdeci">UINT32 m_userDataPolicy</div><div class="ttdoc">user data (metadata) policy during open</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00533">PGFimage.h:533</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a513fcd9e30f1a99d382b5c001499cdf5"><div class="ttname"><a href="PGFtypes_8h.html#a513fcd9e30f1a99d382b5c001499cdf5">MaxUserDataSize</a></div><div class="ttdeci">#define MaxUserDataSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00283">PGFtypes.h:283</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3215ac6bee3c5f6bb7e1c4b7fc53a4a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3215ac6bee3c5f6bb7e1c4b7fc53a4a2">&#9670;&nbsp;</a></span>ConfigureEncoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ConfigureEncoder </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>useOMP</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>favorSpeedOverSize</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Configures the encoder. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">useOMP</td><td>Use parallel threading with Open MP during encoding. Default value: true. Influences the encoding only if the codec has been compiled with OpenMP support. </td></tr>
    <tr><td class="paramname">favorSpeedOverSize</td><td>Favors encoding speed over compression ratio. Default value: false </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00250">250</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{ <a class="code" href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">m_useOMPinEncoder</a> = useOMP; <a class="code" href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">m_favorSpeedOverSize</a> = favorSpeedOverSize; }</div><div class="ttc" id="classCPGFImage_html_a6925d3950e8f48487205d46de7920d3e"><div class="ttname"><a href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">CPGFImage::m_favorSpeedOverSize</a></div><div class="ttdeci">bool m_favorSpeedOverSize</div><div class="ttdoc">favor encoding speed over compression ratio</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00536">PGFimage.h:536</a></div></div>
<div class="ttc" id="classCPGFImage_html_a140110570c6d492b23db50189d3f4d48"><div class="ttname"><a href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">CPGFImage::m_useOMPinEncoder</a></div><div class="ttdeci">bool m_useOMPinEncoder</div><div class="ttdoc">use Open MP in encoder</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00537">PGFimage.h:537</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a3e55e2e2d8ddf79506769feb8938ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a3e55e2e2d8ddf79506769feb8938ec">&#9670;&nbsp;</a></span>Destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00124">124</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                        {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="keyword">delete</span> <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]; <span class="comment">// also deletes m_channel</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keyword">delete</span>[] <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">userData</a>; </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keyword">delete</span>[] <a class="code" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keyword">delete</span> <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keyword">delete</span> <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> != -100) <a class="code" href="classCPGFImage.html#ab32b4053e41cc205cce45be8045e603b">Init</a>();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_aeeb6e57e8343eb3d42406f0baf3ae6e1"><div class="ttname"><a href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">PGFPostHeader::userData</a></div><div class="ttdeci">UINT8 * userData</div><div class="ttdoc">user data of size userDataLen (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00170">PGFtypes.h:170</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab32b4053e41cc205cce45be8045e603b"><div class="ttname"><a href="classCPGFImage.html#ab32b4053e41cc205cce45be8045e603b">CPGFImage::Init</a></div><div class="ttdeci">void Init()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00069">PGFimage.cpp:69</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1635ef5dca13bd07276d112a72316a73"><div class="ttname"><a href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">CPGFImage::m_levelLength</a></div><div class="ttdeci">UINT32 * m_levelLength</div><div class="ttdoc">length of each level in bytes; first level starts immediately after this array</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00525">PGFimage.h:525</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1db75413dfdc6f752088a53de0e6b998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1db75413dfdc6f752088a53de0e6b998">&#9670;&nbsp;</a></span>Downsample()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Downsample </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nChannel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00809">809</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                 {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        ASSERT(ch &gt; 0);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> w = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0];</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> w2 = w/2;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> h2 = <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0]/2;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> oddW = w%2;                           <span class="comment">// don&#39;t use bool -&gt; problems with MaxSpeed optimization</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> oddH = <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0]%2;         <span class="comment">// &quot;</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="keywordtype">int</span> loPos = 0;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordtype">int</span> hiPos = w;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="keywordtype">int</span> sampledPos = 0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* buff = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[ch]; ASSERT(buff);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; h2; i++) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; w2; j++) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                        <span class="comment">// compute average of pixel block</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        buff[sampledPos] = (buff[loPos] + buff[loPos + 1] + buff[hiPos] + buff[hiPos + 1]) &gt;&gt; 2;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        loPos += 2; hiPos += 2;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                        sampledPos++;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                <span class="keywordflow">if</span> (oddW) { </div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                        buff[sampledPos] = (buff[loPos] + buff[hiPos]) &gt;&gt; 1;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                        loPos++; hiPos++;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                        sampledPos++;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                loPos += w; hiPos += w;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">if</span> (oddH) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; w2; j++) {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        buff[sampledPos] = (buff[loPos] + buff[loPos+1]) &gt;&gt; 1;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                        loPos += 2; hiPos += 2;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                        sampledPos++;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                <span class="keywordflow">if</span> (oddW) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                        buff[sampledPos] = buff[loPos];</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="comment">// downsampled image has half width and half height</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[ch] = (<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[ch] + 1)/2;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[ch] = (<a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[ch] + 1)/2;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div><div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a9c711365d0d6188b89262027e60265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a9c711365d0d6188b89262027e60265">&#9670;&nbsp;</a></span>GetAlignedROI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPGFRect.html">PGFRect</a> CPGFImage::GetAlignedROI </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6a79885f55b60739b16fb961efb041ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a79885f55b60739b16fb961efb041ce">&#9670;&nbsp;</a></span>GetBitmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::GetBitmap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>bpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channelMap</em>[] = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get image data in interleaved format: (ordering of RGB data is BGR[A]) Upsampling, YUV to RGB transform and interleaving are done here to reduce the number of passes over the data. The absolute value of pitch is the number of bytes of an image row of the given image buffer. If pitch is negative, then the image buffer must point to the last row of a bottom-up image (first byte on last row). if pitch is positive, then the image buffer must point to the first row of a top-down image (first byte). The sequence of output channels in the output image buffer does not need to be the same as provided by PGF. In case of different sequences you have to provide a channelMap of size of expected channels (depending on image mode). For example, PGF provides a channel sequence BGR in RGB color mode. If your provided image buffer expects a channel sequence ARGB, then the channelMap looks like { 3, 2, 1, 0 }. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pitch</td><td>The number of bytes of a row of the image buffer. </td></tr>
    <tr><td class="paramname">buff</td><td>An image buffer. </td></tr>
    <tr><td class="paramname">bpp</td><td>The number of bits per pixel used in image buffer. </td></tr>
    <tr><td class="paramname">channelMap</td><td>A integer array containing the mapping of PGF channel ordering to expected channel ordering. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after each copied buffer row. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01788">1788</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                                                                                                                    {</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        ASSERT(buff);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        UINT32 w = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0];  <span class="comment">// width of decoded image</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        UINT32 h = <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0]; <span class="comment">// height of decoded image</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        UINT32 yw = w;                  <span class="comment">// y-channel width</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        UINT32 uw = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[1]; <span class="comment">// u-channel width</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        UINT32 roiOffsetX = 0;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        UINT32 roiOffsetY = 0;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        UINT32 yOffset = 0;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;        UINT32 uOffset = 0;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="preprocessor">#ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="keyword">const</span> <a class="code" href="structPGFRect.html">PGFRect</a>&amp; roi = <a class="code" href="classCPGFImage.html#a1a9c711365d0d6188b89262027e60265">GetAlignedROI</a>(); <span class="comment">// in pixels, roi is usually larger than levelRoi</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        ASSERT(w == roi.<a class="code" href="structPGFRect.html#a70d366f5adc104f7037b627f35a18729">Width</a>() &amp;&amp; h == roi.<a class="code" href="structPGFRect.html#a139b8bb60ea476cd14856476b2d37b0f">Height</a>());</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;        <span class="keyword">const</span> <a class="code" href="structPGFRect.html">PGFRect</a> levelRoi = <a class="code" href="classCPGFImage.html#a6e745b509e9bea4ad35f951f37693fc4">ComputeLevelROI</a>();</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        ASSERT(roi.<a class="code" href="structPGFRect.html#ac3472e1dc20bc4b1584058376fd7b989">left</a> &lt;= levelRoi.left &amp;&amp; levelRoi.right &lt;= roi.<a class="code" href="structPGFRect.html#a9174d8de6b9018e0c4ef8e29a501b10a">right</a>); </div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        ASSERT(roi.<a class="code" href="structPGFRect.html#a79df6810b4ffbf8c8825a67733d56913">top</a> &lt;= levelRoi.top &amp;&amp; levelRoi.bottom &lt;= roi.<a class="code" href="structPGFRect.html#a7dc57925fee73fb4b3a1e3744971f579">bottom</a>); </div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">ROIisSupported</a>() &amp;&amp; (levelRoi.Width() &lt; w || levelRoi.Height() &lt; h)) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                <span class="comment">// ROI is used </span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                w = levelRoi.Width();</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                h = levelRoi.Height();</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                roiOffsetX = levelRoi.left - roi.<a class="code" href="structPGFRect.html#ac3472e1dc20bc4b1584058376fd7b989">left</a>;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                roiOffsetY = levelRoi.top - roi.<a class="code" href="structPGFRect.html#a79df6810b4ffbf8c8825a67733d56913">top</a>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                yOffset = roiOffsetX + roiOffsetY*yw;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                        <span class="keyword">const</span> <a class="code" href="structPGFRect.html">PGFRect</a>&amp; downsampledRoi = <a class="code" href="classCPGFImage.html#a1a9c711365d0d6188b89262027e60265">GetAlignedROI</a>(1);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                        uOffset = levelRoi.left/2 - downsampledRoi.<a class="code" href="structPGFRect.html#ac3472e1dc20bc4b1584058376fd7b989">left</a> + (levelRoi.top/2 - downsampledRoi.<a class="code" href="structPGFRect.html#a79df6810b4ffbf8c8825a67733d56913">top</a>)*<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[1];</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                        uOffset = yOffset;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;                }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        }</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> dP = 1.0/h;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <span class="keywordtype">int</span> defMap[] = { 0, 1, 2, 3, 4, 5, 6, 7 }; ASSERT(<span class="keyword">sizeof</span>(defMap)/<span class="keyword">sizeof</span>(defMap[0]) == <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>);</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <span class="keywordflow">if</span> (channelMap == <span class="keyword">nullptr</span>) channelMap = defMap;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> uAvg, vAvg;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        <span class="keywordtype">double</span> percent = 0;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        UINT32 i, j;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="keywordflow">switch</span>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a>) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a>:</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                {</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 1);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 1);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;                        ASSERT(bpp == 1);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                        <span class="keyword">const</span> UINT32 w2 = (w + 7)/8;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a> &amp; <a class="code" href="PGFtypes_8h.html#a7ec86ea7c424e6e90984fb8ef0e3ada0">Version7</a>) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                                <span class="comment">// new unpacked version has a little better compression ratio</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                                <span class="comment">// since version 7</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                                <span class="keywordflow">for</span> (i = 0; i &lt; h; i++) {</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                                        UINT32 cnt = 0;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                                        <span class="keywordflow">for</span> (j = 0; j &lt; w2; j++) {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                                                UINT8 <span class="keywordtype">byte</span> = 0;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                                                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 8; k++) {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                                                        <span class="keywordtype">byte</span> &lt;&lt;= 1;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                                                        UINT8 bit = 0;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                                                        <span class="keywordflow">if</span> (cnt &lt; w) {</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                                                                bit = y[yOffset + cnt] &amp; 1;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                                                        }</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                                                        <span class="keywordtype">byte</span> |= bit;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                                                        cnt++;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                                                }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                                                buff[j] = byte;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                                        }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                                                percent += dP;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                                        }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                                }</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                                <span class="comment">// old versions</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                <span class="comment">// packed pixels: 8 pixel in 1 byte of channel[0]</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                                <span class="keywordflow">if</span> (!(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a> &amp; <a class="code" href="PGFtypes_8h.html#a99612b00f7a591c93702520453567913">Version5</a>)) yw = w2; <span class="comment">// not version 5 or 6</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                                yOffset = roiOffsetX/8 + roiOffsetY*yw; <span class="comment">// 1 byte in y contains 8 pixel values</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                                <span class="keywordflow">for</span> (i = 0; i &lt; h; i++) {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                                        <span class="keywordflow">for</span> (j = 0; j &lt; w2; j++) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                                                buff[j] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(y[yOffset + j] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>);</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                                        }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                                                percent += dP;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                                        }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                                }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                        }</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a>:</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a>:</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a5e4deddebb6ff58e1168fc20b0e15cb3">ImageModeHSLColor</a>:</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aca2b65c53ff44940ed27f809de3b28f5">ImageModeHSBColor</a>:</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                {</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> &gt;= 1);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                        UINT32 cnt, channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                                UINT32 yPos = yOffset;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                                <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                                        <span class="keywordflow">for</span> (UINT32 c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                                                buff[cnt + channelMap[c]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][yPos] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>);</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                                        }</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                                        yPos++;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                                }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                                yOffset += yw;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                                buff += pitch;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                                }</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                        }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a>:</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                {</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> &gt;= 1);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*16);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                        UINT32 cnt, channels;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                        <span class="keywordflow">if</span> (bpp%16 == 0) {</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                                UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                                <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                                channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                                                <span class="keywordflow">for</span> (UINT32 c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                                                        buff16[cnt + channelMap[c]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][yPos] + yuvOffset16) &lt;&lt; shift);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                                                }</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                                                yPos++;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                                        }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                        buff16 += pitch16;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                                                percent += dP;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                                        }</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                                }</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                                ASSERT(bpp%8 == 0);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = <a class="code" href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a>(0, <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 8);</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                                channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                                </div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;                                                <span class="keywordflow">for</span> (UINT32 c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;                                                        buff[cnt + channelMap[c]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][yPos] + yuvOffset16) &gt;&gt; shift);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                                                }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                                                yPos++;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                                        }</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                                                percent += dP;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                                        }</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                                }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                        }</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                }</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>:</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                {</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                        ASSERT(bpp &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                        UINT8 *buffg = &amp;buff[channelMap[1]],</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                                  *buffr = &amp;buff[channelMap[2]],</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                                  *buffb = &amp;buff[channelMap[0]];</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                        UINT8 g;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                        UINT32 cnt, channels = bpp/8;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                                                <span class="comment">// u and v are downsampled</span></div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                                                uAvg = u[uPos];</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                                                vAvg = v[uPos];</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                                                buffg[cnt] = g = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(y[yPos] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a> - ((uAvg + vAvg ) &gt;&gt; 2)); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                                                buffr[cnt] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(uAvg + g);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                                                buffb[cnt] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(vAvg + g);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                                                <span class="keywordflow">if</span> (j &amp; 1) uPos++;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                                                yPos++;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                                        }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;                                        <span class="keywordflow">if</span> (i &amp; 1) uOffset += uw;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                                        buffb += pitch;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;                                        buffg += pitch;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                                        buffr += pitch;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;                                        }</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                                }</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                                        <span class="keywordflow">for</span> (j = 0; j &lt; w; j++) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                                                uAvg = u[yPos];</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                                vAvg = v[yPos];</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                                                buffg[cnt] = g = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(y[yPos] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a> - ((uAvg + vAvg ) &gt;&gt; 2)); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                                                buffr[cnt] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(uAvg + g);</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                                                buffb[cnt] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(vAvg + g);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                                                yPos++;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                                        }</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                                        buffb += pitch;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                                        buffg += pitch;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                                        buffr += pitch;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                                        }</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                                }</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                        }</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a>:</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                {</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 48);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                        UINT32 cnt, channels;</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> g;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                        <span class="keywordflow">if</span> (bpp &gt;= 48 &amp;&amp; bpp%16 == 0) {</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                                UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                                <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                                channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                                                uAvg = u[uPos];</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                                                vAvg = v[uPos];</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;                                                g = y[yPos] + yuvOffset16 - ((uAvg + vAvg ) &gt;&gt; 2); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                                                buff16[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>(g &lt;&lt; shift);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                                                buff16[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((uAvg + g) &lt;&lt; shift);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                                                buff16[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((vAvg + g) &lt;&lt; shift);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                                                yPos++;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                                        }</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                                        buff16 += pitch16;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                                        }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                                }</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                                ASSERT(bpp%8 == 0);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = <a class="code" href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a>(0, <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 8);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                                channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                                                uAvg = u[uPos];</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                                                vAvg = v[uPos];</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                                                g = y[yPos] + yuvOffset16 - ((uAvg + vAvg ) &gt;&gt; 2); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                                                buff[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(g &gt;&gt; shift); </div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                                                buff[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((uAvg + g) &gt;&gt; shift);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                                                buff[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((vAvg + g) &gt;&gt; shift);</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                                                yPos++;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                                        }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;                                        }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;                                }</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;                        }</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                }</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a>:</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                {</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* l = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(l);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(a);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* b = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(b);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                        UINT32 cnt, channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                                UINT32 uPos = uOffset;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                                UINT32 yPos = yOffset;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                                cnt = 0;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                                <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                                        uAvg = a[uPos];</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                                        vAvg = b[uPos];</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                                        buff[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(l[yPos] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                                        buff[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(uAvg + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>); </div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                                        buff[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(vAvg + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>);</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                                        yPos++;</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                                }</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                                yOffset += yw;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                                buff += pitch;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                                        percent += dP;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                                }</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                        }</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                }</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>:</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*16);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* l = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(l);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(a);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* b = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(b);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                        UINT32 cnt, channels;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                        <span class="keywordflow">if</span> (bpp%16 == 0) {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                                UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                                <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                                channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                                                uAvg = a[uPos];</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                                                vAvg = b[uPos];</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                                                buff16[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((l[yPos] + yuvOffset16) &lt;&lt; shift);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                                                buff16[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((uAvg + yuvOffset16) &lt;&lt; shift);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                                                buff16[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((vAvg + yuvOffset16) &lt;&lt; shift);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                                                yPos++;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                                        }</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                                        buff16 += pitch16;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                                        }</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                                }</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                                ASSERT(bpp%8 == 0);</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = <a class="code" href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a>(0, <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 8);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                                channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                                                uAvg = a[uPos];</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                                                vAvg = b[uPos];</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                                                buff[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((l[yPos] + yuvOffset16) &gt;&gt; shift);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                                                buff[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((uAvg + yuvOffset16) &gt;&gt; shift);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                                                buff[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((vAvg + yuvOffset16) &gt;&gt; shift);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                                                yPos++;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                                        }</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                                        }</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                                }</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                        }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>:</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a>:</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 4);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[3]; ASSERT(a);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;                        UINT8 g, aAvg;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                        UINT32 cnt, channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                                UINT32 uPos = uOffset;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                                UINT32 yPos = yOffset;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                                cnt = 0;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                                <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                                        uAvg = u[uPos];</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                                        vAvg = v[uPos];</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                                        aAvg = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(a[uPos] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                                        buff[cnt + channelMap[1]] = g = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(y[yPos] + <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a> - ((uAvg + vAvg ) &gt;&gt; 2)); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                                        buff[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(uAvg + g);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                                        buff[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(vAvg + g);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;                                        buff[cnt + channelMap[3]] = aAvg;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                                        yPos++;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                                }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                                yOffset += yw;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                                buff += pitch;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                                        percent += dP;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                                }</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                        }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                }</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a>: </div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 4);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 64);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[3]; ASSERT(a);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> g, aAvg;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                        UINT32 cnt, channels;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                        <span class="keywordflow">if</span> (bpp%16 == 0) {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                                UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                                <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                                channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                                                uAvg = u[uPos];</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;                                                vAvg = v[uPos];</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                                                aAvg = a[uPos] + yuvOffset16;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                                                g = y[yPos] + yuvOffset16 - ((uAvg + vAvg ) &gt;&gt; 2); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                                                buff16[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>(g &lt;&lt; shift);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                                                buff16[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((uAvg + g) &lt;&lt; shift);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;                                                buff16[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((vAvg + g) &lt;&lt; shift);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                                                buff16[cnt + channelMap[3]] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>(aAvg &lt;&lt; shift);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                                                yPos++;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;                                        }</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                                        buff16 += pitch16;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                        }</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                                }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                                ASSERT(bpp%8 == 0);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = <a class="code" href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a>(0, <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 8);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                                channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                                        UINT32 uPos = uOffset;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                                        cnt = 0;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                                                uAvg = u[uPos];</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                                                vAvg = v[uPos];</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                                                aAvg = a[uPos] + yuvOffset16;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                                                g = y[yPos] + yuvOffset16 - ((uAvg + vAvg ) &gt;&gt; 2); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                                                buff[cnt + channelMap[1]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(g &gt;&gt; shift); </div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                                                buff[cnt + channelMap[2]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((uAvg + g) &gt;&gt; shift);</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                                                buff[cnt + channelMap[0]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((vAvg + g) &gt;&gt; shift);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                                                buff[cnt + channelMap[3]] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(aAvg &gt;&gt; shift);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                                                cnt += channels;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                                                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (j &amp; 1)) uPos++;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                                                yPos++;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                                        }</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> || (i &amp; 1)) uOffset += uw;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                                        }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                                }</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                        }</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                }</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="preprocessor">#ifdef __PGF32SUPPORT__</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a>:</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                {</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 1);</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 32);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> yuvOffset31 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;                        <span class="keywordflow">if</span> (bpp == 32) {</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 31 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;                                UINT32 *buff32 = (UINT32 *)buff;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;                                <span class="keywordtype">int</span> pitch32 = pitch/4;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                                        <span class="keywordflow">for</span> (j = 0; j &lt; w; j++) {</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;                                                buff32[j] = <a class="code" href="classCPGFImage.html#a075dc79f2453625086a3f1987d692296">Clamp31</a>((y[yPos++] + yuvOffset31) &lt;&lt; shift);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                                        }</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;                                        buff32 += pitch32;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;                                        }</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                                }</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;                        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 16) {</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> usedBits = <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>();</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                                UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                                <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                                <span class="keywordflow">if</span> (usedBits &lt; 16) {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - usedBits;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;                                                UINT32 yPos = yOffset;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                                                <span class="keywordflow">for</span> (j = 0; j &lt; w; j++) {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                                                        buff16[j] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((y[yPos++] + yuvOffset31) &lt;&lt; shift);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                                                }</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                                                yOffset += yw;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                                                buff16 += pitch16;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;                                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;                                                        percent += dP;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;                                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                                                }</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                                        }</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;                                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">int</span> shift = <a class="code" href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a>(0, usedBits - 16);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                                                UINT32 yPos = yOffset;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                                                <span class="keywordflow">for</span> (j = 0; j &lt; w; j++) {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                                                        buff16[j] = <a class="code" href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">Clamp16</a>((y[yPos++] + yuvOffset31) &gt;&gt; shift);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                                                }</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                                                yOffset += yw;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                                                buff16 += pitch16;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                                                        percent += dP;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                                                }</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                                        }</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                                }</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                                ASSERT(bpp == 8);</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">int</span> shift = <a class="code" href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a>(0, <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 8);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                                </div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                                        UINT32 yPos = yOffset;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                                        <span class="keywordflow">for</span> (j = 0; j &lt; w; j++) {</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                                                buff[j] = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>((y[yPos++] + yuvOffset31) &gt;&gt; shift);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                                        }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                                        yOffset += yw;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                                        buff += pitch;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                                                percent += dP;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                                        }</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                                }</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                        }</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                        <span class="keywordflow">break</span>;  </div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                }</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a>: </div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;                {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*4);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                        ASSERT(bpp == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*4);</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                        ASSERT(!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;                        UINT16 yval;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                        UINT32 cnt;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;                                UINT32 yPos = yOffset;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;                                cnt = 0;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                                <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;                                        uAvg = u[yPos];</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;                                        vAvg = v[yPos];</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                                        yval = <a class="code" href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">Clamp4</a>(y[yPos] + <a class="code" href="PGFimage_8cpp.html#a532f21ec0d021733ebae0ad001bb0bef">YUVoffset4</a> - ((uAvg + vAvg ) &gt;&gt; 2)); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                                        <span class="keywordflow">if</span> (j%2 == 0) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                                                buff[cnt] = UINT8(<a class="code" href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">Clamp4</a>(vAvg + yval) | (yval &lt;&lt; 4));</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;                                                cnt++;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;                                                buff[cnt] = <a class="code" href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">Clamp4</a>(uAvg + yval);</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;                                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;                                                buff[cnt] |= <a class="code" href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">Clamp4</a>(vAvg + yval) &lt;&lt; 4;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                                                cnt++;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                                                buff[cnt] = UINT8(yval | (<a class="code" href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">Clamp4</a>(uAvg + yval) &lt;&lt; 4));</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                                                cnt++;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                                        }</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                                        yPos++;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;                                }</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;                                yOffset += yw;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                                buff += pitch;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                                        percent += dP;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                }</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                        }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;                }</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a>: </div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                {</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 16);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                        ASSERT(bpp == 16);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;                        ASSERT(!<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                        UINT16 yval;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                        UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;                        <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                        <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                                UINT32 yPos = yOffset;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                                <span class="keywordflow">for</span> (j = 0; j &lt; w; j++) {</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                                        uAvg = u[yPos];</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                                        vAvg = v[yPos];</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                                        yval = <a class="code" href="classCPGFImage.html#a15adcf6db4b6c3f60db26c7809b0bd54">Clamp6</a>(y[yPos++] + <a class="code" href="PGFimage_8cpp.html#ae908d3596ec0b26c916572376f8ac1d7">YUVoffset6</a> - ((uAvg + vAvg ) &gt;&gt; 2)); <span class="comment">// must be logical shift operator</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                                        buff16[j] = (yval &lt;&lt; 5) | ((<a class="code" href="classCPGFImage.html#a15adcf6db4b6c3f60db26c7809b0bd54">Clamp6</a>(uAvg + yval) &gt;&gt; 1) &lt;&lt; 11) | (<a class="code" href="classCPGFImage.html#a15adcf6db4b6c3f60db26c7809b0bd54">Clamp6</a>(vAvg + yval) &gt;&gt; 1);</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;                                }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                                yOffset += yw;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;                                buff16 += pitch16;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                                        percent += dP;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                                }</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                        }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                }</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                ASSERT(<span class="keyword">false</span>);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        }</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="comment">// display ROI (RGB) in debugger</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        roiimage.width = w;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;        roiimage.height = h;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <span class="keywordflow">if</span> (pitch &gt; 0) {</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                roiimage.pitch = pitch;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                roiimage.data = buff;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                roiimage.pitch = -pitch;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                roiimage.data = buff + (h - 1)*pitch;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        }</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;}                       </div><div class="ttc" id="PGFplatform_8h_html_af1937c5b38a21ec5e6b3e11851264be2"><div class="ttname"><a href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a></div><div class="ttdeci">#define ImageModeIndexedColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00100">PGFplatform.h:100</a></div></div>
<div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a1dbd9112d53e5eea856e65ed1e9c6d50"><div class="ttname"><a href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a></div><div class="ttdeci">#define ImageModeRGB12</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00117">PGFplatform.h:117</a></div></div>
<div class="ttc" id="structPGFHeader_html_a3ddaf075db8ee812ad688d9ed39e0698"><div class="ttname"><a href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">PGFHeader::mode</a></div><div class="ttdeci">UINT8 mode</div><div class="ttdoc">image mode according to Adobe's image modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00158">PGFtypes.h:158</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aca2b65c53ff44940ed27f809de3b28f5"><div class="ttname"><a href="PGFplatform_8h.html#aca2b65c53ff44940ed27f809de3b28f5">ImageModeHSBColor</a></div><div class="ttdeci">#define ImageModeHSBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00104">PGFplatform.h:104</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6cc4f75843c3c15f573aaa0131649b10"><div class="ttname"><a href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">CPGFImage::UsedBitsPerChannel</a></div><div class="ttdeci">BYTE UsedBitsPerChannel() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00755">PGFimage.cpp:755</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ab7cb460804a8abce27d823d09682c85b"><div class="ttname"><a href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a></div><div class="ttdeci">#define ImageModeRGBA</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00115">PGFplatform.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aa1d93456909be3c716a8c5a30b191c00"><div class="ttname"><a href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a></div><div class="ttdeci">#define ImageModeLabColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00107">PGFplatform.h:107</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aedd00370d778fa28db56e5d4032d4c5c"><div class="ttname"><a href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a></div><div class="ttdeci">#define ImageModeGray16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00108">PGFplatform.h:108</a></div></div>
<div class="ttc" id="structPGFRect_html_a9174d8de6b9018e0c4ef8e29a501b10a"><div class="ttname"><a href="structPGFRect.html#a9174d8de6b9018e0c4ef8e29a501b10a">PGFRect::right</a></div><div class="ttdeci">UINT32 right</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00225">PGFtypes.h:225</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a9c711365d0d6188b89262027e60265"><div class="ttname"><a href="classCPGFImage.html#a1a9c711365d0d6188b89262027e60265">CPGFImage::GetAlignedROI</a></div><div class="ttdeci">PGFRect GetAlignedROI(int c=0) const</div></div>
<div class="ttc" id="PGFplatform_8h_html_ae7de617953bf44d768dfd82b62a98db5"><div class="ttname"><a href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a></div><div class="ttdeci">#define ImageModeLab48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00110">PGFplatform.h:110</a></div></div>
<div class="ttc" id="classCPGFImage_html_a15adcf6db4b6c3f60db26c7809b0bd54"><div class="ttname"><a href="classCPGFImage.html#a15adcf6db4b6c3f60db26c7809b0bd54">CPGFImage::Clamp6</a></div><div class="ttdeci">UINT16 Clamp6(DataT v) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00566">PGFimage.h:566</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af50b920dae1922b4eb0bcd82361d880c"><div class="ttname"><a href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a></div><div class="ttdeci">#define ImageModeCMYKColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00102">PGFplatform.h:102</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac73bfc2f52b9da3083b7087d154c1e2e"><div class="ttname"><a href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a></div><div class="ttdeci">#define ImageModeGrayScale</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00099">PGFplatform.h:99</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_ae908d3596ec0b26c916572376f8ac1d7"><div class="ttname"><a href="PGFimage_8cpp.html#ae908d3596ec0b26c916572376f8ac1d7">YUVoffset6</a></div><div class="ttdeci">#define YUVoffset6</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00037">PGFimage.cpp:37</a></div></div>
<div class="ttc" id="classCPGFImage_html_a075dc79f2453625086a3f1987d692296"><div class="ttname"><a href="classCPGFImage.html#a075dc79f2453625086a3f1987d692296">CPGFImage::Clamp31</a></div><div class="ttdeci">UINT32 Clamp31(DataT v) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00576">PGFimage.h:576</a></div></div>
<div class="ttc" id="classCPGFImage_html_a666cd327643276fdd5e8b123fcbc991f"><div class="ttname"><a href="classCPGFImage.html#a666cd327643276fdd5e8b123fcbc991f">CPGFImage::Clamp16</a></div><div class="ttdeci">UINT16 Clamp16(DataT v) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00573">PGFimage.h:573</a></div></div>
<div class="ttc" id="structPGFRect_html_a139b8bb60ea476cd14856476b2d37b0f"><div class="ttname"><a href="structPGFRect.html#a139b8bb60ea476cd14856476b2d37b0f">PGFRect::Height</a></div><div class="ttdeci">UINT32 Height() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00258">PGFtypes.h:258</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af643213a7d426b69429d1430cef4ecbb"><div class="ttname"><a href="PGFplatform_8h.html#af643213a7d426b69429d1430cef4ecbb">__max</a></div><div class="ttdeci">#define __max(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00092">PGFplatform.h:92</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a205e54791f7ad54d357330bb99cab3b2"><div class="ttname"><a href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a></div><div class="ttdeci">#define ImageModeGray32</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00116">PGFplatform.h:116</a></div></div>
<div class="ttc" id="structPGFRect_html_a79df6810b4ffbf8c8825a67733d56913"><div class="ttname"><a href="structPGFRect.html#a79df6810b4ffbf8c8825a67733d56913">PGFRect::top</a></div><div class="ttdeci">UINT32 top</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00225">PGFtypes.h:225</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9db775cf3a36997b55106fbab7284c14"><div class="ttname"><a href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">CPGFImage::ROIisSupported</a></div><div class="ttdeci">bool ROIisSupported() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00466">PGFimage.h:466</a></div></div>
<div class="ttc" id="structPGFRect_html_ac3472e1dc20bc4b1584058376fd7b989"><div class="ttname"><a href="structPGFRect.html#ac3472e1dc20bc4b1584058376fd7b989">PGFRect::left</a></div><div class="ttdeci">UINT32 left</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00225">PGFtypes.h:225</a></div></div>
<div class="ttc" id="classCPGFImage_html_a7748968cec3128d6dbdeb224814ca14a"><div class="ttname"><a href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">CPGFImage::Clamp8</a></div><div class="ttdeci">UINT8 Clamp8(DataT v) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00569">PGFimage.h:569</a></div></div>
<div class="ttc" id="classCPGFImage_html_adc3d79612346af8109230039b1077c46"><div class="ttname"><a href="classCPGFImage.html#adc3d79612346af8109230039b1077c46">CPGFImage::Clamp4</a></div><div class="ttdeci">UINT8 Clamp4(DataT v) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00563">PGFimage.h:563</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a07e2059cc6697336c5484447578264fc"><div class="ttname"><a href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a></div><div class="ttdeci">#define ImageModeRGBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00101">PGFplatform.h:101</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a5e4deddebb6ff58e1168fc20b0e15cb3"><div class="ttname"><a href="PGFplatform_8h.html#a5e4deddebb6ff58e1168fc20b0e15cb3">ImageModeHSLColor</a></div><div class="ttdeci">#define ImageModeHSLColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00103">PGFplatform.h:103</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a8905b28d0e3b96cf340ed34957738648"><div class="ttname"><a href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a></div><div class="ttdeci">#define ImageModeBitmap</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00098">PGFplatform.h:98</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a7ec86ea7c424e6e90984fb8ef0e3ada0"><div class="ttname"><a href="PGFtypes_8h.html#a7ec86ea7c424e6e90984fb8ef0e3ada0">Version7</a></div><div class="ttdeci">#define Version7</div><div class="ttdoc">Codec major and minor version number stored in PGFHeader.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00073">PGFtypes.h:73</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="structPGFRect_html"><div class="ttname"><a href="structPGFRect.html">PGFRect</a></div><div class="ttdoc">Rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00224">PGFtypes.h:224</a></div></div>
<div class="ttc" id="structPGFRect_html_a70d366f5adc104f7037b627f35a18729"><div class="ttname"><a href="structPGFRect.html#a70d366f5adc104f7037b627f35a18729">PGFRect::Width</a></div><div class="ttdeci">UINT32 Width() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00255">PGFtypes.h:255</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac250ca543e6f93f370614801122b61f6"><div class="ttname"><a href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a></div><div class="ttdeci">#define ImageModeCMYK64</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00111">PGFplatform.h:111</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_a532f21ec0d021733ebae0ad001bb0bef"><div class="ttname"><a href="PGFimage_8cpp.html#a532f21ec0d021733ebae0ad001bb0bef">YUVoffset4</a></div><div class="ttdeci">#define YUVoffset4</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00036">PGFimage.cpp:36</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aadaf1bd7eedf80c33287cfd311dbf068"><div class="ttname"><a href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a></div><div class="ttdeci">#define ImageModeRGB16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00118">PGFplatform.h:118</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_a0fc648cb4d04d369ff4692cc07687039"><div class="ttname"><a href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a></div><div class="ttdeci">#define YUVoffset8</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00038">PGFimage.cpp:38</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6e745b509e9bea4ad35f951f37693fc4"><div class="ttname"><a href="classCPGFImage.html#a6e745b509e9bea4ad35f951f37693fc4">CPGFImage::ComputeLevelROI</a></div><div class="ttdeci">PGFRect ComputeLevelROI() const</div></div>
<div class="ttc" id="PGFplatform_8h_html_ac04b7a3633a0caadba20e20e161239e1"><div class="ttname"><a href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a></div><div class="ttdeci">#define ImageModeRGB48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00109">PGFplatform.h:109</a></div></div>
<div class="ttc" id="structPGFRect_html_a7dc57925fee73fb4b3a1e3744971f579"><div class="ttname"><a href="structPGFRect.html#a7dc57925fee73fb4b3a1e3744971f579">PGFRect::bottom</a></div><div class="ttdeci">UINT32 bottom</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00225">PGFtypes.h:225</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a99612b00f7a591c93702520453567913"><div class="ttname"><a href="PGFtypes_8h.html#a99612b00f7a591c93702520453567913">Version5</a></div><div class="ttdeci">#define Version5</div><div class="ttdoc">new coding scheme since major version 5</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00071">PGFtypes.h:71</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4be1897b3b07449b7e77f95a29032f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4be1897b3b07449b7e77f95a29032f6">&#9670;&nbsp;</a></span>GetChannel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* CPGFImage::GetChannel </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return an internal YUV image channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>A channel index </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An internal YUV image channel </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00317">317</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{ ASSERT(c &gt;= 0 &amp;&amp; c &lt; <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>); <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c]; }</div><div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9e57bf57786030eab6ed17df9d9342e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9e57bf57786030eab6ed17df9d9342e">&#9670;&nbsp;</a></span>GetColorTable() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::GetColorTable </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>iFirstColor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>nColors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RGBQUAD *&#160;</td>
          <td class="paramname"><em>prgbColors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves red, green, blue (RGB) color values from a range of entries in the palette of the DIB section. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iFirstColor</td><td>The color table index of the first entry to retrieve. </td></tr>
    <tr><td class="paramname">nColors</td><td>The number of color table entries to retrieve. </td></tr>
    <tr><td class="paramname">prgbColors</td><td>A pointer to the array of RGBQUAD structures to retrieve the color table entries. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01349">1349</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                                                                                           {</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">if</span> (iFirstColor + nColors &gt; <a class="code" href="PGFtypes_8h.html#a9d98169485fbcb79dd2277c567f3f27d">ColorTableLen</a>)      ReturnWithError(ColorTableError);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">for</span> (UINT32 i=iFirstColor, j=0; j &lt; nColors; i++, j++) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                prgbColors[j] = <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a3a7faf3091c0faa2e508ecdeb54ea706">clut</a>[i];</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div><div class="ttc" id="PGFtypes_8h_html_a9d98169485fbcb79dd2277c567f3f27d"><div class="ttname"><a href="PGFtypes_8h.html#a9d98169485fbcb79dd2277c567f3f27d">ColorTableLen</a></div><div class="ttdeci">#define ColorTableLen</div><div class="ttdoc">size of color lookup table (clut)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00066">PGFtypes.h:66</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a3a7faf3091c0faa2e508ecdeb54ea706"><div class="ttname"><a href="structPGFPostHeader.html#a3a7faf3091c0faa2e508ecdeb54ea706">PGFPostHeader::clut</a></div><div class="ttdeci">RGBQUAD clut[ColorTableLen]</div><div class="ttdoc">color table for indexed color images (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00169">PGFtypes.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef236343eaa0809a255d1bea58e9bf9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef236343eaa0809a255d1bea58e9bf9d">&#9670;&nbsp;</a></span>GetColorTable() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const RGBQUAD* CPGFImage::GetColorTable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Address of color table </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00330">330</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a3a7faf3091c0faa2e508ecdeb54ea706">clut</a>; }</div><div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a3a7faf3091c0faa2e508ecdeb54ea706"><div class="ttname"><a href="structPGFPostHeader.html#a3a7faf3091c0faa2e508ecdeb54ea706">PGFPostHeader::clut</a></div><div class="ttdeci">RGBQUAD clut[ColorTableLen]</div><div class="ttdoc">color table for indexed color images (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00169">PGFtypes.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf90fa7c083fba0479ce70200cccf716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf90fa7c083fba0479ce70200cccf716">&#9670;&nbsp;</a></span>GetEncodedHeaderLength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::GetEncodedHeaderLength </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return the length of all encoded headers in bytes. Precondition: The PGF image has been opened with a call of Open(...). </p><dl class="section return"><dt>Returns</dt><dd>The length of all encoded headers in bytes </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00648">648</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                               { </div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>); </div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#a4e9c1ffe92430bf2420b8da76f145fcf">GetEncodedHeaderLength</a>(); </div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="classCDecoder_html_a4e9c1ffe92430bf2420b8da76f145fcf"><div class="ttname"><a href="classCDecoder.html#a4e9c1ffe92430bf2420b8da76f145fcf">CDecoder::GetEncodedHeaderLength</a></div><div class="ttdeci">UINT32 GetEncodedHeaderLength() const</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8h_source.html#l00136">Decoder.h:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d39b7f0067bf5b35b0cd7cbba9a1d4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d39b7f0067bf5b35b0cd7cbba9a1d4f">&#9670;&nbsp;</a></span>GetEncodedLevelLength()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::GetEncodedLevelLength </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the length of an encoded PGF level in bytes. Precondition: The PGF image has been opened with a call of Open(...). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The image level </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of a PGF level in bytes </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00367">367</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;{ ASSERT(level &gt;= 0 &amp;&amp; level &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>); <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a>[<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> - level - 1]; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1635ef5dca13bd07276d112a72316a73"><div class="ttname"><a href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">CPGFImage::m_levelLength</a></div><div class="ttdeci">UINT32 * m_levelLength</div><div class="ttdoc">length of each level in bytes; first level starts immediately after this array</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00525">PGFimage.h:525</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a485b62ca1f9b649d6ff590fe28657cf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a485b62ca1f9b649d6ff590fe28657cf3">&#9670;&nbsp;</a></span>GetHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structPGFHeader.html">PGFHeader</a>* CPGFImage::GetHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the PGF header structure. </p><dl class="section return"><dt>Returns</dt><dd>A PGF header structure </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00335">335</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{ <span class="keywordflow">return</span> &amp;<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a205a92be52bd2047ade0398ed4bb2afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a205a92be52bd2047ade0398ed4bb2afb">&#9670;&nbsp;</a></span>GetMaxValue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::GetMaxValue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get maximum intensity value for image modes with more than eight bits per channel. Don't call this method before the PGF header has been read. </p><dl class="section return"><dt>Returns</dt><dd>The maximum intensity value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00341">341</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{ <span class="keywordflow">return</span> (1 &lt;&lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">usedBitsPerChannel</a>) - 1; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_abddcc9ee6e17690986cf77a6d16aceb6"><div class="ttname"><a href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">PGFHeader::usedBitsPerChannel</a></div><div class="ttdeci">UINT8 usedBitsPerChannel</div><div class="ttdoc">number of used bits per channel in 16- and 32-bit per channel modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00159">PGFtypes.h:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7c092c2b27df184d7e81bef579e270c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7c092c2b27df184d7e81bef579e270c">&#9670;&nbsp;</a></span>GetUserData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const UINT8 * CPGFImage::GetUserData </td>
          <td>(</td>
          <td class="paramtype">UINT32 &amp;&#160;</td>
          <td class="paramname"><em>cachedSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>pTotalSize</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return user data and size of user data. Precondition: The PGF image has been opened with a call of Open(...). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cachedSize</td><td>[out] Size of returned user data in bytes. </td></tr>
    <tr><td class="paramname">pTotalSize</td><td>[optional out] Pointer to return the size of user data stored in image header in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to user data or nullptr if there is no user data available.</dd></dl>
<p>Return user data and size of user data. Precondition: The PGF image has been opened with a call of Open(...). In an encoder scenario don't call this method before <a class="el" href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">WriteHeader()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cachedSize</td><td>[out] Size of returned user data in bytes. </td></tr>
    <tr><td class="paramname">pTotalSize</td><td>[optional out] Pointer to return the size of user data stored in image header in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to user data or nullptr if there is no user data available. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00337">337</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                                                                  {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        cachedSize = <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a104e3ef6de85dfdbbd867a250fcd82d4">cachedUserDataLen</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">if</span> (pTotalSize) *pTotalSize = <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a0fb630d6cd14ed865dd5fe20227279f2">userDataLen</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">userData</a>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="ttc" id="structPGFPostHeader_html_a0fb630d6cd14ed865dd5fe20227279f2"><div class="ttname"><a href="structPGFPostHeader.html#a0fb630d6cd14ed865dd5fe20227279f2">PGFPostHeader::userDataLen</a></div><div class="ttdeci">UINT32 userDataLen</div><div class="ttdoc">user data size in bytes (not part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00171">PGFtypes.h:171</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_aeeb6e57e8343eb3d42406f0baf3ae6e1"><div class="ttname"><a href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">PGFPostHeader::userData</a></div><div class="ttdeci">UINT8 * userData</div><div class="ttdoc">user data of size userDataLen (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00170">PGFtypes.h:170</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a104e3ef6de85dfdbbd867a250fcd82d4"><div class="ttname"><a href="structPGFPostHeader.html#a104e3ef6de85dfdbbd867a250fcd82d4">PGFPostHeader::cachedUserDataLen</a></div><div class="ttdeci">UINT32 cachedUserDataLen</div><div class="ttdoc">cached user data size in bytes (not part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00172">PGFtypes.h:172</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a216a89fa33c755a379ba243610284b03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a216a89fa33c755a379ba243610284b03">&#9670;&nbsp;</a></span>GetUserDataPos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT64 CPGFImage::GetUserDataPos </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the stream position of the user data or 0. Precondition: The PGF image has been opened with a call of Open(...). </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00346">346</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">m_userDataPos</a>; }                                                                       </div><div class="ttc" id="classCPGFImage_html_acf4ae6e169ddf84e32cf9b57a22800b3"><div class="ttname"><a href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">CPGFImage::m_userDataPos</a></div><div class="ttdeci">UINT64 m_userDataPos</div><div class="ttdoc">stream position of user data</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00531">PGFimage.h:531</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37c2f9a6b99c0e0b3564433e21f88e9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c2f9a6b99c0e0b3564433e21f88e9b">&#9670;&nbsp;</a></span>GetYUV()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::GetYUV </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>bpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channelMap</em>[] = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get YUV image data in interleaved format: (ordering is YUV[A]) The absolute value of pitch is the number of bytes of an image row of the given image buffer. If pitch is negative, then the image buffer must point to the last row of a bottom-up image (first byte on last row). if pitch is positive, then the image buffer must point to the first row of a top-down image (first byte). The sequence of output channels in the output image buffer does not need to be the same as provided by PGF. In case of different sequences you have to provide a channelMap of size of expected channels (depending on image mode). For example, PGF provides a channel sequence BGR in RGB color mode. If your provided image buffer expects a channel sequence VUY, then the channelMap looks like { 2, 1, 0 }. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pitch</td><td>The number of bytes of a row of the image buffer. </td></tr>
    <tr><td class="paramname">buff</td><td>An image buffer. </td></tr>
    <tr><td class="paramname">bpp</td><td>The number of bits per pixel used in image buffer. </td></tr>
    <tr><td class="paramname">channelMap</td><td>A integer array containing the mapping of PGF channel ordering to expected channel ordering. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after each copied buffer row. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure.</td></tr>
  </table>
  </dd>
</dl>
<p>Get YUV image data in interleaved format: (ordering is YUV[A]) The absolute value of pitch is the number of bytes of an image row of the given image buffer. If pitch is negative, then the image buffer must point to the last row of a bottom-up image (first byte on last row). if pitch is positive, then the image buffer must point to the first row of a top-down image (first byte). The sequence of output channels in the output image buffer does not need to be the same as provided by PGF. In case of different sequences you have to provide a channelMap of size of expected channels (depending on image mode). For example, PGF provides a channel sequence BGR in RGB color mode. If your provided image buffer expects a channel sequence VUY, then the channelMap looks like { 2, 1, 0 }. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pitch</td><td>The number of bytes of a row of the image buffer. </td></tr>
    <tr><td class="paramname">buff</td><td>An image buffer. </td></tr>
    <tr><td class="paramname">bpp</td><td>The number of bits per pixel used in image buffer. </td></tr>
    <tr><td class="paramname">channelMap</td><td>A integer array containing the mapping of PGF channel ordering to expected channel ordering. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after each copied buffer row. If cb returns true, then it stops proceeding. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l02549">2549</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                                                                                                                 {</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        ASSERT(buff);</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        <span class="keyword">const</span> UINT32 w = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0];</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;        <span class="keyword">const</span> UINT32 h = <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0];</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> wOdd = (1 == w%2);</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dataBits = <a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>*8; ASSERT(dataBits == 16 || dataBits == 32);</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch2 = pitch/<a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> yuvOffset = (dataBits == 16) ? <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a> : <a class="code" href="PGFimage_8cpp.html#aa4cf76945d82d946aa5e89ffd4072159">YUVoffset16</a>;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> dP = 1.0/h;</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="keywordtype">int</span> defMap[] = { 0, 1, 2, 3, 4, 5, 6, 7 }; ASSERT(<span class="keyword">sizeof</span>(defMap)/<span class="keyword">sizeof</span>(defMap[0]) == <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>);</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <span class="keywordflow">if</span> (channelMap == <span class="keyword">nullptr</span>) channelMap = defMap;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;        <span class="keywordtype">int</span> sampledPos = 0, yPos = 0;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> uAvg, vAvg;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        <span class="keywordtype">double</span> percent = 0;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;        UINT32 i, j;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3) { </div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                ASSERT(bpp%dataBits == 0);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                <span class="keywordtype">int</span> cnt, channels = bpp/dataBits; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                        <span class="keywordflow">if</span> (i%2) sampledPos -= (w + 1)/2;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                        cnt = 0;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                                        <span class="comment">// image was downsampled</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                                        uAvg = u[sampledPos];</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;                                        vAvg = v[sampledPos];</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;                                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;                                        uAvg = u[yPos];</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;                                        vAvg = v[yPos];</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                                }</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                                buff[cnt + channelMap[0]] = y[yPos];</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                                buff[cnt + channelMap[1]] = uAvg;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                                buff[cnt + channelMap[2]] = vAvg;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;                                yPos++; </div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;                                cnt += channels;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;                                <span class="keywordflow">if</span> (j%2) sampledPos++;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;                        }</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                        buff += pitch2;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                        <span class="keywordflow">if</span> (wOdd) sampledPos++;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;                                percent += dP;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;                        }</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;                }</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 4) {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;                ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                ASSERT(bpp%dataBits == 0);</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[3]; ASSERT(a);</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                UINT8 aAvg;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;                <span class="keywordtype">int</span> cnt, channels = bpp/dataBits; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;                <span class="keywordflow">for</span> (i=0; i &lt; h; i++) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;                        <span class="keywordflow">if</span> (i%2) sampledPos -= (w + 1)/2;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                        cnt = 0;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                        <span class="keywordflow">for</span> (j=0; j &lt; w; j++) {</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                                        <span class="comment">// image was downsampled</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                                        uAvg = u[sampledPos];</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                                        vAvg = v[sampledPos];</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                                        aAvg = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(a[sampledPos] + yuvOffset);</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;                                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                                        uAvg = u[yPos];</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;                                        vAvg = v[yPos];</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;                                        aAvg = <a class="code" href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">Clamp8</a>(a[yPos] + yuvOffset);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;                                }</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                                <span class="comment">// Yuv</span></div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;                                buff[cnt + channelMap[0]] = y[yPos];</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;                                buff[cnt + channelMap[1]] = uAvg;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                                buff[cnt + channelMap[2]] = vAvg;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;                                buff[cnt + channelMap[3]] = aAvg;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                                yPos++; </div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                                cnt += channels;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;                                <span class="keywordflow">if</span> (j%2) sampledPos++;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;                        }</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;                        buff += pitch2;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;                        <span class="keywordflow">if</span> (wOdd) sampledPos++;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;                                percent += dP;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                        }</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;                }</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        }</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;}</div><div class="ttc" id="PGFimage_8cpp_html_aa4cf76945d82d946aa5e89ffd4072159"><div class="ttname"><a href="PGFimage_8cpp.html#aa4cf76945d82d946aa5e89ffd4072159">YUVoffset16</a></div><div class="ttdeci">#define YUVoffset16</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00039">PGFimage.cpp:39</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="classCPGFImage_html_a7748968cec3128d6dbdeb224814ca14a"><div class="ttname"><a href="classCPGFImage.html#a7748968cec3128d6dbdeb224814ca14a">CPGFImage::Clamp8</a></div><div class="ttdeci">UINT8 Clamp8(DataT v) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00569">PGFimage.h:569</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_a0fc648cb4d04d369ff4692cc07687039"><div class="ttname"><a href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a></div><div class="ttdeci">#define YUVoffset8</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00038">PGFimage.cpp:38</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab401a02923fc9161e890602f26c829e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab401a02923fc9161e890602f26c829e">&#9670;&nbsp;</a></span>Height()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::Height </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return image height of channel 0 at given level in pixels. The returned height is independent of any Read-operations and ROI. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>A level </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Image level height in pixels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00420">420</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{ ASSERT(level &gt;= 0); <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#ad7e2f885a059a39ca15a47ecb497833b">LevelSizeL</a>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>, level); }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad7e2f885a059a39ca15a47ecb497833b"><div class="ttname"><a href="classCPGFImage.html#ad7e2f885a059a39ca15a47ecb497833b">CPGFImage::LevelSizeL</a></div><div class="ttdeci">static UINT32 LevelSizeL(UINT32 size, int level)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00499">PGFimage.h:499</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c0895f4738c5222de1920c941a71541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0895f4738c5222de1920c941a71541">&#9670;&nbsp;</a></span>ImportBitmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ImportBitmap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>bpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channelMap</em>[] = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Import an image from a specified image buffer. This method is usually called before Write(...) and after SetHeader(...). The absolute value of pitch is the number of bytes of an image row. If pitch is negative, then buff points to the last row of a bottom-up image (first byte on last row). If pitch is positive, then buff points to the first row of a top-down image (first byte). The sequence of input channels in the input image buffer does not need to be the same as expected from PGF. In case of different sequences you have to provide a channelMap of size of expected channels (depending on image mode). For example, PGF expects in RGB color mode a channel sequence BGR. If your provided image buffer contains a channel sequence ARGB, then the channelMap looks like { 3, 2, 1, 0 }. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pitch</td><td>The number of bytes of a row of the image buffer. </td></tr>
    <tr><td class="paramname">buff</td><td>An image buffer. </td></tr>
    <tr><td class="paramname">bpp</td><td>The number of bits per pixel used in image buffer. </td></tr>
    <tr><td class="paramname">channelMap</td><td>A integer array containing the mapping of input channel ordering to expected channel ordering. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after each imported buffer row. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00791">791</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                                                                                                 {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        ASSERT(buff);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="comment">// color transform</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="classCPGFImage.html#a7a870dea53390ffe1af210069f6b30eb">RgbToYuv</a>(pitch, buff, bpp, channelMap, cb, data);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                <span class="comment">// Subsampling of the chrominance and alpha channels</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                        <a class="code" href="classCPGFImage.html#a1db75413dfdc6f752088a53de0e6b998">Downsample</a>(i);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="classCPGFImage_html_a7a870dea53390ffe1af210069f6b30eb"><div class="ttname"><a href="classCPGFImage.html#a7a870dea53390ffe1af210069f6b30eb">CPGFImage::RgbToYuv</a></div><div class="ttdeci">void RgbToYuv(int pitch, UINT8 *rgbBuff, BYTE bpp, int channelMap[], CallbackPtr cb, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l01388">PGFimage.cpp:1388</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1db75413dfdc6f752088a53de0e6b998"><div class="ttname"><a href="classCPGFImage.html#a1db75413dfdc6f752088a53de0e6b998">CPGFImage::Downsample</a></div><div class="ttdeci">void Downsample(int nChannel)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00809">PGFimage.cpp:809</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c32194271d4e115b8f5c7fdfc1670a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c32194271d4e115b8f5c7fdfc1670a5">&#9670;&nbsp;</a></span>ImportIsSupported()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::ImportIsSupported </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check for valid import image mode. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Image mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if an image of given mode can be imported with ImportBitmap(...) </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01304">1304</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                                           {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="keywordtype">size_t</span> size = <a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">if</span> (size &gt;= 2) {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                <span class="keywordflow">switch</span>(mode) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a>:</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a>:</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a>:</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>:</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a>:</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a5e4deddebb6ff58e1168fc20b0e15cb3">ImageModeHSLColor</a>:</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aca2b65c53ff44940ed27f809de3b28f5">ImageModeHSBColor</a>:</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                        <span class="comment">//case ImageModeDuotone:</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a>:</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a>:</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a>:</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>:</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        <span class="keywordflow">if</span> (size &gt;= 3) {</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="keywordflow">switch</span>(mode) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a>:</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a>:</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>:</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a>:</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                        <span class="comment">//case ImageModeDuotone16:</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <span class="keywordflow">if</span> (size &gt;=4) {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                <span class="keywordflow">switch</span>(mode) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a>:</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                }</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div><div class="ttc" id="PGFplatform_8h_html_af1937c5b38a21ec5e6b3e11851264be2"><div class="ttname"><a href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a></div><div class="ttdeci">#define ImageModeIndexedColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00100">PGFplatform.h:100</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a1dbd9112d53e5eea856e65ed1e9c6d50"><div class="ttname"><a href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a></div><div class="ttdeci">#define ImageModeRGB12</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00117">PGFplatform.h:117</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aca2b65c53ff44940ed27f809de3b28f5"><div class="ttname"><a href="PGFplatform_8h.html#aca2b65c53ff44940ed27f809de3b28f5">ImageModeHSBColor</a></div><div class="ttdeci">#define ImageModeHSBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00104">PGFplatform.h:104</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ab7cb460804a8abce27d823d09682c85b"><div class="ttname"><a href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a></div><div class="ttdeci">#define ImageModeRGBA</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00115">PGFplatform.h:115</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aa1d93456909be3c716a8c5a30b191c00"><div class="ttname"><a href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a></div><div class="ttdeci">#define ImageModeLabColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00107">PGFplatform.h:107</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aedd00370d778fa28db56e5d4032d4c5c"><div class="ttname"><a href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a></div><div class="ttdeci">#define ImageModeGray16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00108">PGFplatform.h:108</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ae7de617953bf44d768dfd82b62a98db5"><div class="ttname"><a href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a></div><div class="ttdeci">#define ImageModeLab48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00110">PGFplatform.h:110</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af50b920dae1922b4eb0bcd82361d880c"><div class="ttname"><a href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a></div><div class="ttdeci">#define ImageModeCMYKColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00102">PGFplatform.h:102</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac73bfc2f52b9da3083b7087d154c1e2e"><div class="ttname"><a href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a></div><div class="ttdeci">#define ImageModeGrayScale</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00099">PGFplatform.h:99</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a205e54791f7ad54d357330bb99cab3b2"><div class="ttname"><a href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a></div><div class="ttdeci">#define ImageModeGray32</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00116">PGFplatform.h:116</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a07e2059cc6697336c5484447578264fc"><div class="ttname"><a href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a></div><div class="ttdeci">#define ImageModeRGBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00101">PGFplatform.h:101</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a5e4deddebb6ff58e1168fc20b0e15cb3"><div class="ttname"><a href="PGFplatform_8h.html#a5e4deddebb6ff58e1168fc20b0e15cb3">ImageModeHSLColor</a></div><div class="ttdeci">#define ImageModeHSLColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00103">PGFplatform.h:103</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a8905b28d0e3b96cf340ed34957738648"><div class="ttname"><a href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a></div><div class="ttdeci">#define ImageModeBitmap</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00098">PGFplatform.h:98</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac250ca543e6f93f370614801122b61f6"><div class="ttname"><a href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a></div><div class="ttdeci">#define ImageModeCMYK64</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00111">PGFplatform.h:111</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aadaf1bd7eedf80c33287cfd311dbf068"><div class="ttname"><a href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a></div><div class="ttdeci">#define ImageModeRGB16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00118">PGFplatform.h:118</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac04b7a3633a0caadba20e20e161239e1"><div class="ttname"><a href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a></div><div class="ttdeci">#define ImageModeRGB48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00109">PGFplatform.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5685c45a74b14b9f12ee2d81f49718f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5685c45a74b14b9f12ee2d81f49718f3">&#9670;&nbsp;</a></span>ImportYUV()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ImportYUV </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>bpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channelMap</em>[] = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Import a YUV image from a specified image buffer. The absolute value of pitch is the number of bytes of an image row. If pitch is negative, then buff points to the last row of a bottom-up image (first byte on last row). If pitch is positive, then buff points to the first row of a top-down image (first byte). The sequence of input channels in the input image buffer does not need to be the same as expected from PGF. In case of different sequences you have to provide a channelMap of size of expected channels (depending on image mode). For example, PGF expects in RGB color mode a channel sequence BGR. If your provided image buffer contains a channel sequence VUY, then the channelMap looks like { 2, 1, 0 }. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pitch</td><td>The number of bytes of a row of the image buffer. </td></tr>
    <tr><td class="paramname">buff</td><td>An image buffer. </td></tr>
    <tr><td class="paramname">bpp</td><td>The number of bits per pixel used in image buffer. </td></tr>
    <tr><td class="paramname">channelMap</td><td>A integer array containing the mapping of input channel ordering to expected channel ordering. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after each imported buffer row. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure.</td></tr>
  </table>
  </dd>
</dl>
<p>Import a YUV image from a specified image buffer. The absolute value of pitch is the number of bytes of an image row. If pitch is negative, then buff points to the last row of a bottom-up image (first byte on last row). If pitch is positive, then buff points to the first row of a top-down image (first byte). The sequence of input channels in the input image buffer does not need to be the same as expected from PGF. In case of different sequences you have to provide a channelMap of size of expected channels (depending on image mode). For example, PGF expects in RGB color mode a channel sequence BGR. If your provided image buffer contains a channel sequence VUY, then the channelMap looks like { 2, 1, 0 }. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pitch</td><td>The number of bytes of a row of the image buffer. </td></tr>
    <tr><td class="paramname">buff</td><td>An image buffer. </td></tr>
    <tr><td class="paramname">bpp</td><td>The number of bits per pixel used in image buffer. </td></tr>
    <tr><td class="paramname">channelMap</td><td>A integer array containing the mapping of input channel ordering to expected channel ordering. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after each imported buffer row. If cb returns true, then it stops proceeding. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l02660">2660</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                                                                                                              {</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        ASSERT(buff);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> dP = 1.0/<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> dataBits = <a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>*8; ASSERT(dataBits == 16 || dataBits == 32);</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch2 = pitch/<a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> yuvOffset = (dataBits == 16) ? <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a> : <a class="code" href="PGFimage_8cpp.html#aa4cf76945d82d946aa5e89ffd4072159">YUVoffset16</a>;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;        <span class="keywordtype">int</span> yPos = 0, cnt = 0;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        <span class="keywordtype">double</span> percent = 0;</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;        <span class="keywordtype">int</span> defMap[] = { 0, 1, 2, 3, 4, 5, 6, 7 }; ASSERT(<span class="keyword">sizeof</span>(defMap)/<span class="keyword">sizeof</span>(defMap[0]) == <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>);</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        <span class="keywordflow">if</span> (channelMap == <span class="keyword">nullptr</span>) channelMap = defMap;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3)     {</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;                ASSERT(bpp%dataBits == 0);</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/dataBits; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;                <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;                                percent += dP;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;                        }</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;                        cnt = 0;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                        <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                                y[yPos] = buff[cnt + channelMap[0]];</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                                u[yPos] = buff[cnt + channelMap[1]];</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                                v[yPos] = buff[cnt + channelMap[2]];</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                                yPos++;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;                                cnt += channels;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;                        }</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                        buff += pitch2;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                }       </div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 4) {</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;                ASSERT(bpp%dataBits == 0);</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[3]; ASSERT(a);</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/dataBits; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;                <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;                                percent += dP;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;                        }</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;                        cnt = 0;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;                        <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;                                y[yPos] = buff[cnt + channelMap[0]];</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;                                u[yPos] = buff[cnt + channelMap[1]];</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;                                v[yPos] = buff[cnt + channelMap[2]];</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;                                a[yPos] = buff[cnt + channelMap[3]] - yuvOffset;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;                                yPos++;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;                                cnt += channels;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                        }</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;                        buff += pitch2;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;                }       </div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;        }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;                <span class="comment">// Subsampling of the chrominance and alpha channels</span></div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                        <a class="code" href="classCPGFImage.html#a1db75413dfdc6f752088a53de0e6b998">Downsample</a>(i);</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                }</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;        }</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;}</div><div class="ttc" id="PGFimage_8cpp_html_aa4cf76945d82d946aa5e89ffd4072159"><div class="ttname"><a href="PGFimage_8cpp.html#aa4cf76945d82d946aa5e89ffd4072159">YUVoffset16</a></div><div class="ttdeci">#define YUVoffset16</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00039">PGFimage.cpp:39</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1db75413dfdc6f752088a53de0e6b998"><div class="ttname"><a href="classCPGFImage.html#a1db75413dfdc6f752088a53de0e6b998">CPGFImage::Downsample</a></div><div class="ttdeci">void Downsample(int nChannel)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00809">PGFimage.cpp:809</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_a0fc648cb4d04d369ff4692cc07687039"><div class="ttname"><a href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a></div><div class="ttdeci">#define YUVoffset8</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00038">PGFimage.cpp:38</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab32b4053e41cc205cce45be8045e603b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab32b4053e41cc205cce45be8045e603b">&#9670;&nbsp;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00069">69</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                     {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="comment">// init pointers</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">// init members</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="classCPGFImage.html#af6d3fe5a8622634d1d0faf56cde335ef">m_streamReinitialized</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> = 0;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a> = 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">m_userDataPos</a> = 0;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">m_favorSpeedOverSize</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">m_useOMPinEncoder</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">m_useOMPinDecoder</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">m_cb</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="classCPGFImage.html#a45861a83c95188610063233149187f3c">m_cbArg</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">m_progressMode</a> = <a class="code" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157ea441b3bb041d0f7715659f45d8b766983">PM_Relative</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">m_percent</a> = 0;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">m_userDataPolicy</a> = <a class="code" href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096ad52de87e33912adabcf1e22f05e38227">UP_CacheAll</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">// init preHeader</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        memcpy(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#a8b27eabb723f35b4fdb9e357e69b334b">magic</a>, <a class="code" href="PGFtypes_8h.html#a6af5fdbb431a51fc87698ac0b2da8e34">PGFMagic</a>, 3);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a> = <a class="code" href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a> = 0;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="comment">// init postHeader</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">userData</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a0fb630d6cd14ed865dd5fe20227279f2">userDataLen</a> = 0;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a104e3ef6de85dfdbbd867a250fcd82d4">cachedUserDataLen</a> = 0;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// init channels</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>; i++) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i] = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i] = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">// set image width and height</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>; i++) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0] = 0;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0] = 0;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a6925d3950e8f48487205d46de7920d3e"><div class="ttname"><a href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">CPGFImage::m_favorSpeedOverSize</a></div><div class="ttdeci">bool m_favorSpeedOverSize</div><div class="ttdoc">favor encoding speed over compression ratio</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00536">PGFimage.h:536</a></div></div>
<div class="ttc" id="classCPGFImage_html_acf4ae6e169ddf84e32cf9b57a22800b3"><div class="ttname"><a href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">CPGFImage::m_userDataPos</a></div><div class="ttdeci">UINT64 m_userDataPos</div><div class="ttdoc">stream position of user data</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00531">PGFimage.h:531</a></div></div>
<div class="ttc" id="classCPGFImage_html_a01d0752d97900040fa1db7f02d4770cb"><div class="ttname"><a href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">CPGFImage::m_useOMPinDecoder</a></div><div class="ttdeci">bool m_useOMPinDecoder</div><div class="ttdoc">use Open MP in decoder</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00538">PGFimage.h:538</a></div></div>
<div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_aba6dadeb0788b7e02ab3c4425c6ef38a"><div class="ttname"><a href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a></div><div class="ttdeci">#define PGFVersion</div><div class="ttdoc">current standard version</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00076">PGFtypes.h:76</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a04561479f4f8aa5a0775d8b541a1157ea441b3bb041d0f7715659f45d8b766983"><div class="ttname"><a href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157ea441b3bb041d0f7715659f45d8b766983">PM_Relative</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00100">PGFtypes.h:100</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a0fb630d6cd14ed865dd5fe20227279f2"><div class="ttname"><a href="structPGFPostHeader.html#a0fb630d6cd14ed865dd5fe20227279f2">PGFPostHeader::userDataLen</a></div><div class="ttdeci">UINT32 userDataLen</div><div class="ttdoc">user data size in bytes (not part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00171">PGFtypes.h:171</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_aeeb6e57e8343eb3d42406f0baf3ae6e1"><div class="ttname"><a href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">PGFPostHeader::userData</a></div><div class="ttdeci">UINT8 * userData</div><div class="ttdoc">user data of size userDataLen (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00170">PGFtypes.h:170</a></div></div>
<div class="ttc" id="classCPGFImage_html_af6d3fe5a8622634d1d0faf56cde335ef"><div class="ttname"><a href="classCPGFImage.html#af6d3fe5a8622634d1d0faf56cde335ef">CPGFImage::m_streamReinitialized</a></div><div class="ttdeci">bool m_streamReinitialized</div><div class="ttdoc">stream has been reinitialized</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00540">PGFimage.h:540</a></div></div>
<div class="ttc" id="classCPGFImage_html_a57cc024db6e510f95f3238f448a0fed5"><div class="ttname"><a href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">CPGFImage::m_quant</a></div><div class="ttdeci">BYTE m_quant</div><div class="ttdoc">quantization parameter</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00534">PGFimage.h:534</a></div></div>
<div class="ttc" id="classCPGFImage_html_a45861a83c95188610063233149187f3c"><div class="ttname"><a href="classCPGFImage.html#a45861a83c95188610063233149187f3c">CPGFImage::m_cbArg</a></div><div class="ttdeci">void * m_cbArg</div><div class="ttdoc">refresh callback argument</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00546">PGFimage.h:546</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a6af5fdbb431a51fc87698ac0b2da8e34"><div class="ttname"><a href="PGFtypes_8h.html#a6af5fdbb431a51fc87698ac0b2da8e34">PGFMagic</a></div><div class="ttdeci">#define PGFMagic</div><div class="ttdoc">PGF identification.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00061">PGFtypes.h:61</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a0e70eeba0994fafcbfe6cbea3a734096ad52de87e33912adabcf1e22f05e38227"><div class="ttname"><a href="PGFtypes_8h.html#a0e70eeba0994fafcbfe6cbea3a734096ad52de87e33912adabcf1e22f05e38227">UP_CacheAll</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00101">PGFtypes.h:101</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a104e3ef6de85dfdbbd867a250fcd82d4"><div class="ttname"><a href="structPGFPostHeader.html#a104e3ef6de85dfdbbd867a250fcd82d4">PGFPostHeader::cachedUserDataLen</a></div><div class="ttdeci">UINT32 cachedUserDataLen</div><div class="ttdoc">cached user data size in bytes (not part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00172">PGFtypes.h:172</a></div></div>
<div class="ttc" id="classCPGFImage_html_a8b4d6d5ef343f0f428b35c9bf1020569"><div class="ttname"><a href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">CPGFImage::m_progressMode</a></div><div class="ttdeci">ProgressMode m_progressMode</div><div class="ttdoc">progress mode used in Read and Write; PM_Relative is default mode</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00548">PGFimage.h:548</a></div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="structPGFMagicVersion_html_a8b27eabb723f35b4fdb9e357e69b334b"><div class="ttname"><a href="structPGFMagicVersion.html#a8b27eabb723f35b4fdb9e357e69b334b">PGFMagicVersion::magic</a></div><div class="ttdeci">char magic[3]</div><div class="ttdoc">PGF identification = &quot;PGF&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00114">PGFtypes.h:114</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1635ef5dca13bd07276d112a72316a73"><div class="ttname"><a href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">CPGFImage::m_levelLength</a></div><div class="ttdeci">UINT32 * m_levelLength</div><div class="ttdoc">length of each level in bytes; first level starts immediately after this array</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00525">PGFimage.h:525</a></div></div>
<div class="ttc" id="structPGFPreHeader_html_a71b1463b71b722459dad25a3ef0b492b"><div class="ttname"><a href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">PGFPreHeader::hSize</a></div><div class="ttdeci">UINT32 hSize</div><div class="ttdoc">total size of PGFHeader, [ColorTable], and [UserData] in bytes (since Version 6: 4 Bytes)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00124">PGFtypes.h:124</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="classCPGFImage_html_a140110570c6d492b23db50189d3f4d48"><div class="ttname"><a href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">CPGFImage::m_useOMPinEncoder</a></div><div class="ttdeci">bool m_useOMPinEncoder</div><div class="ttdoc">use Open MP in encoder</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00537">PGFimage.h:537</a></div></div>
<div class="ttc" id="classCPGFImage_html_a18e28eef51d17c3bd0be4d4f758a6a86"><div class="ttname"><a href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">CPGFImage::m_userDataPolicy</a></div><div class="ttdeci">UINT32 m_userDataPolicy</div><div class="ttdoc">user data (metadata) policy during open</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00533">PGFimage.h:533</a></div></div>
<div class="ttc" id="classCPGFImage_html_adc2499451b8f96483a892e53fe5849b1"><div class="ttname"><a href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">CPGFImage::m_percent</a></div><div class="ttdeci">double m_percent</div><div class="ttdoc">progress [0..1]</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00547">PGFimage.h:547</a></div></div>
<div class="ttc" id="classCPGFImage_html_ac262a389df92493dfca63b2f1f06fe78"><div class="ttname"><a href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">CPGFImage::m_cb</a></div><div class="ttdeci">RefreshCB m_cb</div><div class="ttdoc">pointer to refresh callback procedure</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00545">PGFimage.h:545</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b6f8f9c75dd377a3cd6bf1e07e68531"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6f8f9c75dd377a3cd6bf1e07e68531">&#9670;&nbsp;</a></span>IsFullyRead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::IsFullyRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if all levels have been read. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00436">436</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> == 0; }</div><div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73a46482fbfc549f8baa485c9b09f67a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a46482fbfc549f8baa485c9b09f67a">&#9670;&nbsp;</a></span>IsOpen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::IsOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the PGF has been opened for reading. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00077">77</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a> != <span class="keyword">nullptr</span>; }</div><div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4619eb255afd03dabea2b0afbe6e0d94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4619eb255afd03dabea2b0afbe6e0d94">&#9670;&nbsp;</a></span>Level()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::Level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return current image level. Since Read(...) can be used to read each image level separately, it is helpful to know the current level. The current level immediately after Open(...) is <a class="el" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels()</a>. </p><dl class="section return"><dt>Returns</dt><dd>Current image level </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00427">427</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;{ <span class="keywordflow">return</span> (BYTE)<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>; }</div><div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3678d05c031dc4cbf5451e7f4f6bdf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3678d05c031dc4cbf5451e7f4f6bdf3">&#9670;&nbsp;</a></span>Levels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::Levels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of image levels. </p><dl class="section return"><dt>Returns</dt><dd>Number of image levels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00432">432</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a96e7712f6033810f386a23f2faec0037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96e7712f6033810f386a23f2faec0037">&#9670;&nbsp;</a></span>LevelSizeH()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static UINT32 CPGFImage::LevelSizeH </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute and return image width/height of HH subband at given level. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Original image size (e.g. width or height at level 0) </td></tr>
    <tr><td class="paramname">level</td><td>An image level </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>high pass size at given level in pixels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00506">506</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{ ASSERT(level &gt;= 0); UINT32 d = 1 &lt;&lt; (level - 1); <span class="keywordflow">return</span> (size + d - 1) &gt;&gt; level; }</div></div><!-- fragment -->
</div>
</div>
<a id="ad7e2f885a059a39ca15a47ecb497833b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e2f885a059a39ca15a47ecb497833b">&#9670;&nbsp;</a></span>LevelSizeL()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static UINT32 CPGFImage::LevelSizeL </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute and return image width/height of LL subband at given level. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Original image size (e.g. width or height at level 0) </td></tr>
    <tr><td class="paramname">level</td><td>An image level </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Image width/height at given level in pixels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00499">499</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;{ ASSERT(level &gt;= 0); UINT32 d = 1 &lt;&lt; level; <span class="keywordflow">return</span> (size + d - 1) &gt;&gt; level; }</div></div><!-- fragment -->
</div>
</div>
<a id="a368601b5942e4406cdb87120406ff075"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a368601b5942e4406cdb87120406ff075">&#9670;&nbsp;</a></span>MaxChannelDepth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BYTE CPGFImage::MaxChannelDepth </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>version</em> = <code><a class="el" href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return maximum channel depth. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>pgf pre-header version number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>maximum channel depth in bit of given version (16 or 32 bit) </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00518">518</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;{ <span class="keywordflow">return</span> (version &amp; <a class="code" href="PGFtypes_8h.html#aa4ea0b8cc599de9a0f0af11de65b1eb4">PGF32</a>) ? 32 : 16; }</div><div class="ttc" id="PGFtypes_8h_html_aa4ea0b8cc599de9a0f0af11de65b1eb4"><div class="ttname"><a href="PGFtypes_8h.html#aa4ea0b8cc599de9a0f0af11de65b1eb4">PGF32</a></div><div class="ttdeci">#define PGF32</div><div class="ttdoc">32 bit values are used -&gt; allows at maximum 30 input bits, otherwise 16 bit values are used -&gt; allows...</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00069">PGFtypes.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c60aabdcf2556e9a425052e7f5b5d30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c60aabdcf2556e9a425052e7f5b5d30">&#9670;&nbsp;</a></span>Mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::Mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the image mode. An image mode is a predefined constant value (see also <a class="el" href="PGFtypes_8h.html" title="PGF definitions.">PGFtypes.h</a>) compatible with Adobe Photoshop. It represents an image type and format. </p><dl class="section return"><dt>Returns</dt><dd>Image mode </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00455">455</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a>; }</div><div class="ttc" id="structPGFHeader_html_a3ddaf075db8ee812ad688d9ed39e0698"><div class="ttname"><a href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">PGFHeader::mode</a></div><div class="ttdeci">UINT8 mode</div><div class="ttdoc">image mode according to Adobe's image modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00158">PGFtypes.h:158</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adbe9092b915a2c5b2361f4db186b991c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbe9092b915a2c5b2361f4db186b991c">&#9670;&nbsp;</a></span>Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPGFStream.html">CPGFStream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open a PGF image at current stream position: read pre-header, header, and ckeck image type. Precondition: The stream has been opened for reading. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>A PGF stream </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00141">141</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                       {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        ASSERT(stream);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">// create decoder and read PGFPreHeader PGFHeader PGFPostHeader LevelLengths</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a> = <span class="keyword">new</span> <a class="code" href="classCDecoder.html">CDecoder</a>(stream, <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>, <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>, <a class="code" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a>, </div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <a class="code" href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">m_userDataPos</a>, <a class="code" href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">m_useOMPinDecoder</a>, <a class="code" href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">m_userDataPolicy</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &gt; <a class="code" href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a>) ReturnWithError(FormatCannotRead);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">// set current level</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">// set image width and height</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0] = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0] = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="comment">// complete header</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a0f517491e6b64353cd9ba45f8697b865">CompleteHeader</a>()) ReturnWithError(FormatCannotRead);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// interpret quant parameter</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> &gt; <a class="code" href="PGFtypes_8h.html#ac3fdd6d7d71ed50f3b7365d5bc287cda">DownsampleThreshold</a> &amp;&amp; </div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a> || </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                 <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a> || </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                 <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a> || </div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                 <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a> || </div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                 <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a> || </div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                 <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a> || </div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                 <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>)) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a> = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> - 1;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                <a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a> = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">// set channel dimensions (chrominance is subsampled by factor 2)</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a>) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                        <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i] = (<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0] + 1) &gt;&gt; 1;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i] = (<a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0] + 1) &gt;&gt; 1;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=1; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i] = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[0];</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i] = <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[0];</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                }</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &gt; 0) {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                <span class="comment">// init wavelet subbands</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i] = <span class="keyword">new</span> <a class="code" href="classCSubband.html#a30d2cc4fc1b1060bf29a6576d926a615">CWaveletTransform</a>(<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i], <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i], <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="comment">// used in Read when PM_Absolute</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <a class="code" href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">m_percent</a> = pow(0.25, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <span class="comment">// very small image: we don&#39;t use DWT and encoding</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="comment">// read channels</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        <span class="keyword">const</span> UINT32 size = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[c]*<a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[c];</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c] = <span class="keyword">new</span>(std::nothrow) <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>[size];</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c]) ReturnWithError(InsufficientMemory);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        <span class="comment">// read channel data from stream</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        <span class="keywordflow">for</span> (UINT32 i=0; i &lt; size; i++) {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                <span class="keywordtype">int</span> count = <a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                stream-&gt;<a class="code" href="classCPGFStream.html#afdc81fe9b4d2d962b8112e50eace95a2">Read</a>(&amp;count, &amp;<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][i]);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                <span class="keywordflow">if</span> (count != <a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>) ReturnWithError(MissingData);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                        }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="ttc" id="classCPGFStream_html_afdc81fe9b4d2d962b8112e50eace95a2"><div class="ttname"><a href="classCPGFStream.html#afdc81fe9b4d2d962b8112e50eace95a2">CPGFStream::Read</a></div><div class="ttdeci">virtual void Read(int *count, void *buffer)=0</div></div>
<div class="ttc" id="classCPGFImage_html_acf4ae6e169ddf84e32cf9b57a22800b3"><div class="ttname"><a href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">CPGFImage::m_userDataPos</a></div><div class="ttdeci">UINT64 m_userDataPos</div><div class="ttdoc">stream position of user data</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00531">PGFimage.h:531</a></div></div>
<div class="ttc" id="classCPGFImage_html_a01d0752d97900040fa1db7f02d4770cb"><div class="ttname"><a href="classCPGFImage.html#a01d0752d97900040fa1db7f02d4770cb">CPGFImage::m_useOMPinDecoder</a></div><div class="ttdeci">bool m_useOMPinDecoder</div><div class="ttdoc">use Open MP in decoder</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00538">PGFimage.h:538</a></div></div>
<div class="ttc" id="structPGFHeader_html_a3ddaf075db8ee812ad688d9ed39e0698"><div class="ttname"><a href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">PGFHeader::mode</a></div><div class="ttdeci">UINT8 mode</div><div class="ttdoc">image mode according to Adobe's image modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00158">PGFtypes.h:158</a></div></div>
<div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ab7cb460804a8abce27d823d09682c85b"><div class="ttname"><a href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a></div><div class="ttdeci">#define ImageModeRGBA</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00115">PGFplatform.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_a0f517491e6b64353cd9ba45f8697b865"><div class="ttname"><a href="classCPGFImage.html#a0f517491e6b64353cd9ba45f8697b865">CPGFImage::CompleteHeader</a></div><div class="ttdeci">bool CompleteHeader()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00218">PGFimage.cpp:218</a></div></div>
<div class="ttc" id="classCPGFImage_html_a57cc024db6e510f95f3238f448a0fed5"><div class="ttname"><a href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">CPGFImage::m_quant</a></div><div class="ttdeci">BYTE m_quant</div><div class="ttdoc">quantization parameter</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00534">PGFimage.h:534</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aa1d93456909be3c716a8c5a30b191c00"><div class="ttname"><a href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a></div><div class="ttdeci">#define ImageModeLabColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00107">PGFplatform.h:107</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ae7de617953bf44d768dfd82b62a98db5"><div class="ttname"><a href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a></div><div class="ttdeci">#define ImageModeLab48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00110">PGFplatform.h:110</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af50b920dae1922b4eb0bcd82361d880c"><div class="ttname"><a href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a></div><div class="ttdeci">#define ImageModeCMYKColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00102">PGFplatform.h:102</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a2468e509eae9683e25af403249b743a3"><div class="ttname"><a href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a></div><div class="ttdeci">#define MaxLevel</div><div class="ttdoc">maximum number of transform levels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00062">PGFtypes.h:62</a></div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="classCDecoder_html"><div class="ttname"><a href="classCDecoder.html">CDecoder</a></div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8h_source.html#l00046">Decoder.h:46</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_ac3fdd6d7d71ed50f3b7365d5bc287cda"><div class="ttname"><a href="PGFtypes_8h.html#ac3fdd6d7d71ed50f3b7365d5bc287cda">DownsampleThreshold</a></div><div class="ttdeci">#define DownsampleThreshold</div><div class="ttdoc">if quality is larger than this threshold than downsampling is used</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00065">PGFtypes.h:65</a></div></div>
<div class="ttc" id="classCSubband_html_a30d2cc4fc1b1060bf29a6576d926a615"><div class="ttname"><a href="classCSubband.html#a30d2cc4fc1b1060bf29a6576d926a615">CSubband::CWaveletTransform</a></div><div class="ttdeci">friend class CWaveletTransform</div><div class="ttdef"><b>Definition:</b> <a href="Subband_8h_source.html#l00043">Subband.h:43</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1635ef5dca13bd07276d112a72316a73"><div class="ttname"><a href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">CPGFImage::m_levelLength</a></div><div class="ttdeci">UINT32 * m_levelLength</div><div class="ttdoc">length of each level in bytes; first level starts immediately after this array</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00525">PGFimage.h:525</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a07e2059cc6697336c5484447578264fc"><div class="ttname"><a href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a></div><div class="ttdeci">#define ImageModeRGBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00101">PGFplatform.h:101</a></div></div>
<div class="ttc" id="classCPGFImage_html_a18e28eef51d17c3bd0be4d4f758a6a86"><div class="ttname"><a href="classCPGFImage.html#a18e28eef51d17c3bd0be4d4f758a6a86">CPGFImage::m_userDataPolicy</a></div><div class="ttdeci">UINT32 m_userDataPolicy</div><div class="ttdoc">user data (metadata) policy during open</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00533">PGFimage.h:533</a></div></div>
<div class="ttc" id="classCPGFImage_html_adc2499451b8f96483a892e53fe5849b1"><div class="ttname"><a href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">CPGFImage::m_percent</a></div><div class="ttdeci">double m_percent</div><div class="ttdoc">progress [0..1]</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00547">PGFimage.h:547</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac250ca543e6f93f370614801122b61f6"><div class="ttname"><a href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a></div><div class="ttdeci">#define ImageModeCMYK64</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00111">PGFplatform.h:111</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
<div class="ttc" id="structPGFHeader_html_ac314a16d5984aea88f4a5ff38f49c08b"><div class="ttname"><a href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">PGFHeader::quality</a></div><div class="ttdeci">UINT8 quality</div><div class="ttdoc">quantization parameter: 0=lossless, 4=standard, 6=poor quality</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00155">PGFtypes.h:155</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac04b7a3633a0caadba20e20e161239e1"><div class="ttname"><a href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a></div><div class="ttdeci">#define ImageModeRGB48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00109">PGFplatform.h:109</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d8ca06237591aae49d7f25278067c63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d8ca06237591aae49d7f25278067c63">&#9670;&nbsp;</a></span>Quality()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::Quality </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the PGF quality. The quality is inbetween 0 and MaxQuality. PGF quality 0 means lossless quality. </p><dl class="section return"><dt>Returns</dt><dd>PGF quality </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00442">442</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a>; }</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_ac314a16d5984aea88f4a5ff38f49c08b"><div class="ttname"><a href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">PGFHeader::quality</a></div><div class="ttdeci">UINT8 quality</div><div class="ttdoc">quantization parameter: 0=lossless, 4=standard, 6=poor quality</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00155">PGFtypes.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a1d49cdf9da6934381bb25332d85ccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a1d49cdf9da6934381bb25332d85ccf">&#9670;&nbsp;</a></span>Read() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Read </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read and decode some levels of a PGF image at current stream position. A PGF image is structered in levels, numbered between 0 and <a class="el" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels()</a> - 1. Each level can be seen as a single image, containing the same content as all other levels, but in a different size (width, height). The image size at level i is double the size (width, height) of the image at level i+1. The image at level 0 contains the original size. Precondition: The PGF image has been opened with a call of Open(...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>[0, nLevels) The image level of the resulting image in the internal image buffer. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after reading a single level. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00402">402</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                                                {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        ASSERT((level &gt;= 0 &amp;&amp; level &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>) || <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> == 0); <span class="comment">// m_header.nLevels == 0: image didn&#39;t use wavelet transform</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">ROIisSupported</a>() &amp;&amp; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &gt; 0) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                <span class="comment">// new encoding scheme supporting ROI</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <a class="code" href="structPGFRect.html">PGFRect</a> rect(0, 0, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <a class="code" href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">Read</a>(rect, level, cb, data);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> == 0) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">if</span> (level == 0) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                        <span class="comment">// the data has already been read during open</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                        <span class="comment">// now update progress</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(1.0, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> levelDiff = <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> - level;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keywordtype">double</span> percent = (<a class="code" href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">m_progressMode</a> == <a class="code" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157ea441b3bb041d0f7715659f45d8b766983">PM_Relative</a>) ? pow(0.25, levelDiff) : <a class="code" href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">m_percent</a>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <span class="comment">// encoding scheme without ROI</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">while</span> (<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> &gt; level) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                <a class="code" href="classCWaveletTransform.html">CWaveletTransform</a>* wtChannel = <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i];</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                ASSERT(wtChannel);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                <span class="comment">// decode file and write stream to m_wtChannel</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>) { </div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                        <span class="comment">// last level also has LL band</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                        wtChannel-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a>)-&gt;<a class="code" href="classCSubband.html#af109a0516ded3bea57348a0f4318c2fb">PlaceTile</a>(*<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>, <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                }</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a> &amp; <a class="code" href="PGFtypes_8h.html#a99612b00f7a591c93702520453567913">Version5</a>) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                        <span class="comment">// since version 5</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                        wtChannel-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a>)-&gt;<a class="code" href="classCSubband.html#af109a0516ded3bea57348a0f4318c2fb">PlaceTile</a>(*<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>, <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                        wtChannel-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a>)-&gt;<a class="code" href="classCSubband.html#af109a0516ded3bea57348a0f4318c2fb">PlaceTile</a>(*<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>, <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                                        <span class="comment">// until version 4</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#a7112215e28ac56d75bdf4a5786f57a34">DecodeInterleaved</a>(wtChannel, <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                }</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                wtChannel-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a>)-&gt;<a class="code" href="classCSubband.html#af109a0516ded3bea57348a0f4318c2fb">PlaceTile</a>(*<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>, <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                        }</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                        <span class="keyword">volatile</span> OSError error = NoError; <span class="comment">// volatile prevents optimizations</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#ifdef LIBPGF_USE_OPENMP</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">                        #pragma omp parallel for default(shared) </span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                <span class="comment">// inverse transform from m_wtChannel to m_channel</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                <span class="keywordflow">if</span> (error == NoError) {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                        OSError err = <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a26a70797c2a0db893876b75d131f420c">InverseTransform</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, &amp;<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i], &amp;<a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i], &amp;<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);       </div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                                        <span class="keywordflow">if</span> (err != NoError) error = err;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                ASSERT(<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                        }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                        <span class="keywordflow">if</span> (error != NoError) ReturnWithError(error);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        <span class="comment">// set new level: must be done before refresh callback</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>--;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        <span class="comment">// now we have to refresh the display</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">m_cb</a>) <a class="code" href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">m_cb</a>(<a class="code" href="classCPGFImage.html#a45861a83c95188610063233149187f3c">m_cbArg</a>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                        <span class="comment">// now update progress</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                percent *= 4;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">m_progressMode</a> == <a class="code" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157ea5c4b3258347f3f6ce4dbfb52ccd70e02">PM_Absolute</a>) <a class="code" href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">m_percent</a> = percent;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="ttc" id="classCWaveletTransform_html_a26a70797c2a0db893876b75d131f420c"><div class="ttname"><a href="classCWaveletTransform.html#a26a70797c2a0db893876b75d131f420c">CWaveletTransform::InverseTransform</a></div><div class="ttdeci">OSError InverseTransform(int level, UINT32 *width, UINT32 *height, DataT **data)</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8cpp_source.html#l00245">WaveletTransform.cpp:245</a></div></div>
<div class="ttc" id="classCPGFImage_html_a4a1d49cdf9da6934381bb25332d85ccf"><div class="ttname"><a href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">CPGFImage::Read</a></div><div class="ttdeci">void Read(int level=0, CallbackPtr cb=nullptr, void *data=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00402">PGFimage.cpp:402</a></div></div>
<div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a04561479f4f8aa5a0775d8b541a1157ea441b3bb041d0f7715659f45d8b766983"><div class="ttname"><a href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157ea441b3bb041d0f7715659f45d8b766983">PM_Relative</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00100">PGFtypes.h:100</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCDecoder_html_a7112215e28ac56d75bdf4a5786f57a34"><div class="ttname"><a href="classCDecoder.html#a7112215e28ac56d75bdf4a5786f57a34">CDecoder::DecodeInterleaved</a></div><div class="ttdeci">void DecodeInterleaved(CWaveletTransform *wtChannel, int level, int quantParam)</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8cpp_source.html#l00333">Decoder.cpp:333</a></div></div>
<div class="ttc" id="classCPGFImage_html_a57cc024db6e510f95f3238f448a0fed5"><div class="ttname"><a href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">CPGFImage::m_quant</a></div><div class="ttdeci">BYTE m_quant</div><div class="ttdoc">quantization parameter</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00534">PGFimage.h:534</a></div></div>
<div class="ttc" id="classCPGFImage_html_a45861a83c95188610063233149187f3c"><div class="ttname"><a href="classCPGFImage.html#a45861a83c95188610063233149187f3c">CPGFImage::m_cbArg</a></div><div class="ttdeci">void * m_cbArg</div><div class="ttdoc">refresh callback argument</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00546">PGFimage.h:546</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="classCWaveletTransform_html"><div class="ttname"><a href="classCWaveletTransform.html">CWaveletTransform</a></div><div class="ttdoc">PGF wavelet transform.</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8h_source.html#l00055">WaveletTransform.h:55</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a04561479f4f8aa5a0775d8b541a1157ea5c4b3258347f3f6ce4dbfb52ccd70e02"><div class="ttname"><a href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157ea5c4b3258347f3f6ce4dbfb52ccd70e02">PM_Absolute</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00100">PGFtypes.h:100</a></div></div>
<div class="ttc" id="classCPGFImage_html_a8b4d6d5ef343f0f428b35c9bf1020569"><div class="ttname"><a href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">CPGFImage::m_progressMode</a></div><div class="ttdeci">ProgressMode m_progressMode</div><div class="ttdoc">progress mode used in Read and Write; PM_Relative is default mode</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00548">PGFimage.h:548</a></div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="classCSubband_html_af109a0516ded3bea57348a0f4318c2fb"><div class="ttname"><a href="classCSubband.html#af109a0516ded3bea57348a0f4318c2fb">CSubband::PlaceTile</a></div><div class="ttdeci">void PlaceTile(CDecoder &amp;decoder, int quantParam, bool tile=false, UINT32 tileX=0, UINT32 tileY=0)</div><div class="ttdef"><b>Definition:</b> <a href="Subband_8cpp_source.html#l00203">Subband.cpp:203</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCWaveletTransform_html_a347b59b1d7bc18de9294c714afac7ddf"><div class="ttname"><a href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">CWaveletTransform::GetSubband</a></div><div class="ttdeci">CSubband * GetSubband(int level, Orientation orientation)</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8h_source.html#l00093">WaveletTransform.h:93</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9db775cf3a36997b55106fbab7284c14"><div class="ttname"><a href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">CPGFImage::ROIisSupported</a></div><div class="ttdeci">bool ROIisSupported() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00466">PGFimage.h:466</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCPGFImage_html_adc2499451b8f96483a892e53fe5849b1"><div class="ttname"><a href="classCPGFImage.html#adc2499451b8f96483a892e53fe5849b1">CPGFImage::m_percent</a></div><div class="ttdeci">double m_percent</div><div class="ttdoc">progress [0..1]</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00547">PGFimage.h:547</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="structPGFRect_html"><div class="ttname"><a href="structPGFRect.html">PGFRect</a></div><div class="ttdoc">Rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00224">PGFtypes.h:224</a></div></div>
<div class="ttc" id="classCPGFImage_html_ac262a389df92493dfca63b2f1f06fe78"><div class="ttname"><a href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">CPGFImage::m_cb</a></div><div class="ttdeci">RefreshCB m_cb</div><div class="ttdoc">pointer to refresh callback procedure</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00545">PGFimage.h:545</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a99612b00f7a591c93702520453567913"><div class="ttname"><a href="PGFtypes_8h.html#a99612b00f7a591c93702520453567913">Version5</a></div><div class="ttdeci">#define Version5</div><div class="ttdoc">new coding scheme since major version 5</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00071">PGFtypes.h:71</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad25f535f946f5a711576d6b28774cbb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad25f535f946f5a711576d6b28774cbb9">&#9670;&nbsp;</a></span>Read() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPGFRect.html">PGFRect</a> &amp;&#160;</td>
          <td class="paramname"><em>rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a rectangular region of interest of a PGF image at current stream position. The origin of the coordinate axis is the top-left corner of the image. All coordinates are measured in pixels. It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rect</td><td>[inout] Rectangular region of interest (ROI) at level 0. The rect might be cropped. </td></tr>
    <tr><td class="paramname">level</td><td>[0, nLevels) The image level of the resulting image in the internal image buffer. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after reading a single level. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a570d1d1072cdd3e24b838c066abc8da3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a570d1d1072cdd3e24b838c066abc8da3">&#9670;&nbsp;</a></span>ReadEncodedData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::ReadEncodedData </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>targetLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the data of an encoded PGF level and copies it to a target buffer without decoding. Precondition: The PGF image has been opened with a call of Open(...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The image level </td></tr>
    <tr><td class="paramname">target</td><td>The target buffer </td></tr>
    <tr><td class="paramname">targetLen</td><td>The length of the target buffer in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes copied to the target buffer </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00706">706</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                                                                                  {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        ASSERT(level &gt;= 0 &amp;&amp; level &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        ASSERT(target);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        ASSERT(targetLen &gt; 0);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="comment">// reset stream position</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#ae6d16df70a317f3dc805894cf6101fe2">SetStreamPosToData</a>();</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment">// position stream</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        UINT64 offset = 0;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> - 1; i &gt; level; i--) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                offset += <a class="code" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a>[<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> - 1 - i];</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#acc125e94ea5c6af11a91ac1c4a43cf8f">Skip</a>(offset);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="comment">// compute number of bytes to read</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        UINT32 len = <a class="code" href="PGFplatform_8h.html#ad6d0138bf7e2cdaabeedc3fea40767ad">__min</a>(targetLen, <a class="code" href="classCPGFImage.html#a9d39b7f0067bf5b35b0cd7cbba9a1d4f">GetEncodedLevelLength</a>(level));</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment">// read data</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        len = <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#a4146a0adddfe52ca79de8b0be58e8482">ReadEncodedData</a>(target, len);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        ASSERT(len &gt;= 0 &amp;&amp; len &lt;= targetLen);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">return</span> len;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9d39b7f0067bf5b35b0cd7cbba9a1d4f"><div class="ttname"><a href="classCPGFImage.html#a9d39b7f0067bf5b35b0cd7cbba9a1d4f">CPGFImage::GetEncodedLevelLength</a></div><div class="ttdeci">UINT32 GetEncodedLevelLength(int level) const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00367">PGFimage.h:367</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCDecoder_html_ae6d16df70a317f3dc805894cf6101fe2"><div class="ttname"><a href="classCDecoder.html#ae6d16df70a317f3dc805894cf6101fe2">CDecoder::SetStreamPosToData</a></div><div class="ttdeci">void SetStreamPosToData()</div><div class="ttdoc">Resets stream position to beginning of data block.</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8h_source.html#l00144">Decoder.h:144</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1635ef5dca13bd07276d112a72316a73"><div class="ttname"><a href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">CPGFImage::m_levelLength</a></div><div class="ttdeci">UINT32 * m_levelLength</div><div class="ttdoc">length of each level in bytes; first level starts immediately after this array</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00525">PGFimage.h:525</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ad6d0138bf7e2cdaabeedc3fea40767ad"><div class="ttname"><a href="PGFplatform_8h.html#ad6d0138bf7e2cdaabeedc3fea40767ad">__min</a></div><div class="ttdeci">#define __min(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00091">PGFplatform.h:91</a></div></div>
<div class="ttc" id="classCDecoder_html_acc125e94ea5c6af11a91ac1c4a43cf8f"><div class="ttname"><a href="classCDecoder.html#acc125e94ea5c6af11a91ac1c4a43cf8f">CDecoder::Skip</a></div><div class="ttdeci">void Skip(UINT64 offset)</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8cpp_source.html#l00449">Decoder.cpp:449</a></div></div>
<div class="ttc" id="classCDecoder_html_a4146a0adddfe52ca79de8b0be58e8482"><div class="ttname"><a href="classCDecoder.html#a4146a0adddfe52ca79de8b0be58e8482">CDecoder::ReadEncodedData</a></div><div class="ttdeci">UINT32 ReadEncodedData(UINT8 *target, UINT32 len) const</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8cpp_source.html#l00246">Decoder.cpp:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a55a27e09a6bcd1bca6d57335956dc76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55a27e09a6bcd1bca6d57335956dc76c">&#9670;&nbsp;</a></span>ReadEncodedHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::ReadEncodedHeader </td>
          <td>(</td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>targetLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the encoded PGF header and copies it to a target buffer. Precondition: The PGF image has been opened with a call of Open(...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td>The target buffer </td></tr>
    <tr><td class="paramname">targetLen</td><td>The length of the target buffer in bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes copied to the target buffer </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00660">660</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                                                         {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        ASSERT(target);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        ASSERT(targetLen &gt; 0);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="comment">// reset stream position</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#ab043bb3599b2301bebd22527258ac4cf">SetStreamPosToStart</a>();</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="comment">// compute number of bytes to read</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        UINT32 len = <a class="code" href="PGFplatform_8h.html#ad6d0138bf7e2cdaabeedc3fea40767ad">__min</a>(targetLen, <a class="code" href="classCPGFImage.html#acf90fa7c083fba0479ce70200cccf716">GetEncodedHeaderLength</a>());</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="comment">// read data</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        len = <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#a4146a0adddfe52ca79de8b0be58e8482">ReadEncodedData</a>(target, len);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        ASSERT(len &gt;= 0 &amp;&amp; len &lt;= targetLen);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">return</span> len;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ad6d0138bf7e2cdaabeedc3fea40767ad"><div class="ttname"><a href="PGFplatform_8h.html#ad6d0138bf7e2cdaabeedc3fea40767ad">__min</a></div><div class="ttdeci">#define __min(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00091">PGFplatform.h:91</a></div></div>
<div class="ttc" id="classCDecoder_html_a4146a0adddfe52ca79de8b0be58e8482"><div class="ttname"><a href="classCDecoder.html#a4146a0adddfe52ca79de8b0be58e8482">CDecoder::ReadEncodedData</a></div><div class="ttdeci">UINT32 ReadEncodedData(UINT8 *target, UINT32 len) const</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8cpp_source.html#l00246">Decoder.cpp:246</a></div></div>
<div class="ttc" id="classCPGFImage_html_acf90fa7c083fba0479ce70200cccf716"><div class="ttname"><a href="classCPGFImage.html#acf90fa7c083fba0479ce70200cccf716">CPGFImage::GetEncodedHeaderLength</a></div><div class="ttdeci">UINT32 GetEncodedHeaderLength() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00648">PGFimage.cpp:648</a></div></div>
<div class="ttc" id="classCDecoder_html_ab043bb3599b2301bebd22527258ac4cf"><div class="ttname"><a href="classCDecoder.html#ab043bb3599b2301bebd22527258ac4cf">CDecoder::SetStreamPosToStart</a></div><div class="ttdeci">void SetStreamPosToStart()</div><div class="ttdoc">Resets stream position to beginning of PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8h_source.html#l00140">Decoder.h:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a126846c7265783e14da0f4dde6c9346b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a126846c7265783e14da0f4dde6c9346b">&#9670;&nbsp;</a></span>ReadPreview()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ReadPreview </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Read and decode smallest level of a PGF image at current stream position. For details, please refert to Read(...) Precondition: The PGF image has been opened with a call of Open(...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00111">111</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{ <a class="code" href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">Read</a>(<a class="code" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels</a>() - 1); }</div><div class="ttc" id="classCPGFImage_html_a4a1d49cdf9da6934381bb25332d85ccf"><div class="ttname"><a href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">CPGFImage::Read</a></div><div class="ttdeci">void Read(int level=0, CallbackPtr cb=nullptr, void *data=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00402">PGFimage.cpp:402</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab3678d05c031dc4cbf5451e7f4f6bdf3"><div class="ttname"><a href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">CPGFImage::Levels</a></div><div class="ttdeci">BYTE Levels() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00432">PGFimage.h:432</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf906b469e11800e819db00009255b90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf906b469e11800e819db00009255b90">&#9670;&nbsp;</a></span>Reconstruct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Reconstruct </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>After you've written a PGF image, you can call this method followed by GetBitmap/GetYUV to get a quick reconstruction (coded -&gt; decoded image). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>The image level of the resulting image in the internal image buffer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00348">348</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                       {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> == 0) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="comment">// image didn&#39;t use wavelet transform</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">if</span> (level == 0) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                ASSERT(<a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i] = <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(0, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a>)-&gt;<a class="code" href="classCSubband.html#aa4a60fd0c2e3ad2742bca6b8e819d5c5">GetBuffer</a>();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordtype">int</span> currentLevel = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="preprocessor">        #ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">ROIisSupported</a>()) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        <span class="comment">// enable ROI reading</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        <a class="code" href="classCPGFImage.html#a83c737ee649fdc92c55b7a6ffe1153b2">SetROI</a>(<a class="code" href="structPGFRect.html">PGFRect</a>(0, 0, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>));</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keywordflow">while</span> (currentLevel &gt; level) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                ASSERT(<a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                <span class="comment">// dequantize subbands</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                <span class="keywordflow">if</span> (currentLevel == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>) { </div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                        <span class="comment">// last level also has LL band</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(currentLevel, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a>)-&gt;<a class="code" href="classCSubband.html#a45102bab9eee9b4e2beeea105712f292">Dequantize</a>(<a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(currentLevel, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a>)-&gt;<a class="code" href="classCSubband.html#a45102bab9eee9b4e2beeea105712f292">Dequantize</a>(<a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(currentLevel, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a>)-&gt;<a class="code" href="classCSubband.html#a45102bab9eee9b4e2beeea105712f292">Dequantize</a>(<a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(currentLevel, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a>)-&gt;<a class="code" href="classCSubband.html#a45102bab9eee9b4e2beeea105712f292">Dequantize</a>(<a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                <span class="comment">// inverse transform from m_wtChannel to m_channel</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                OSError err = <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a26a70797c2a0db893876b75d131f420c">InverseTransform</a>(currentLevel, &amp;<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i], &amp;<a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i], &amp;<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                <span class="keywordflow">if</span> (err != NoError) ReturnWithError(err);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                ASSERT(<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                        }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        currentLevel--;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div><div class="ttc" id="classCWaveletTransform_html_a26a70797c2a0db893876b75d131f420c"><div class="ttname"><a href="classCWaveletTransform.html#a26a70797c2a0db893876b75d131f420c">CWaveletTransform::InverseTransform</a></div><div class="ttdeci">OSError InverseTransform(int level, UINT32 *width, UINT32 *height, DataT **data)</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8cpp_source.html#l00245">WaveletTransform.cpp:245</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCSubband_html_a45102bab9eee9b4e2beeea105712f292"><div class="ttname"><a href="classCSubband.html#a45102bab9eee9b4e2beeea105712f292">CSubband::Dequantize</a></div><div class="ttdeci">void Dequantize(int quantParam)</div><div class="ttdef"><b>Definition:</b> <a href="Subband_8cpp_source.html#l00154">Subband.cpp:154</a></div></div>
<div class="ttc" id="classCSubband_html_aa4a60fd0c2e3ad2742bca6b8e819d5c5"><div class="ttname"><a href="classCSubband.html#aa4a60fd0c2e3ad2742bca6b8e819d5c5">CSubband::GetBuffer</a></div><div class="ttdeci">DataT * GetBuffer()</div><div class="ttdef"><b>Definition:</b> <a href="Subband_8h_source.html#l00107">Subband.h:107</a></div></div>
<div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_a57cc024db6e510f95f3238f448a0fed5"><div class="ttname"><a href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">CPGFImage::m_quant</a></div><div class="ttdeci">BYTE m_quant</div><div class="ttdoc">quantization parameter</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00534">PGFimage.h:534</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="classCPGFImage_html_a83c737ee649fdc92c55b7a6ffe1153b2"><div class="ttname"><a href="classCPGFImage.html#a83c737ee649fdc92c55b7a6ffe1153b2">CPGFImage::SetROI</a></div><div class="ttdeci">void SetROI(PGFRect rect)</div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCWaveletTransform_html_a347b59b1d7bc18de9294c714afac7ddf"><div class="ttname"><a href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">CWaveletTransform::GetSubband</a></div><div class="ttdeci">CSubband * GetSubband(int level, Orientation orientation)</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8h_source.html#l00093">WaveletTransform.h:93</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9db775cf3a36997b55106fbab7284c14"><div class="ttname"><a href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">CPGFImage::ROIisSupported</a></div><div class="ttdeci">bool ROIisSupported() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00466">PGFimage.h:466</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="structPGFRect_html"><div class="ttname"><a href="structPGFRect.html">PGFRect</a></div><div class="ttdoc">Rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00224">PGFtypes.h:224</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7df11c06be23e14f83c9aa343f1204d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df11c06be23e14f83c9aa343f1204d0">&#9670;&nbsp;</a></span>ResetStreamPos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::ResetStreamPos </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startOfData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset stream position to start of PGF pre-header or start of data. Must not be called before <a class="el" href="classCPGFImage.html#adbe9092b915a2c5b2361f4db186b991c">Open()</a> or before <a class="el" href="classCPGFImage.html#acd13d233dceaeefce3def7d71ebf4f82">Write()</a>. Use this method after <a class="el" href="classCPGFImage.html#a4a1d49cdf9da6934381bb25332d85ccf">Read()</a> if you want to read the same image several times, e.g. reading different ROIs. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startOfData</td><td>true: you want to read the same image several times. false: resets stream position to the initial position </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00682">682</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                               {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> (startOfData) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                ASSERT(<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#ae6d16df70a317f3dc805894cf6101fe2">SetStreamPosToData</a>();</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                        <a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>-&gt;<a class="code" href="classCDecoder.html#ab043bb3599b2301bebd22527258ac4cf">SetStreamPosToStart</a>();</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                        <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#ae0e408b0d15b7b2ad1f28236e980b00e">SetStreamPosToStart</a>();</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                        ASSERT(<span class="keyword">false</span>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="classCDecoder_html_ae6d16df70a317f3dc805894cf6101fe2"><div class="ttname"><a href="classCDecoder.html#ae6d16df70a317f3dc805894cf6101fe2">CDecoder::SetStreamPosToData</a></div><div class="ttdeci">void SetStreamPosToData()</div><div class="ttdoc">Resets stream position to beginning of data block.</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8h_source.html#l00144">Decoder.h:144</a></div></div>
<div class="ttc" id="classCEncoder_html_ae0e408b0d15b7b2ad1f28236e980b00e"><div class="ttname"><a href="classCEncoder.html#ae0e408b0d15b7b2ad1f28236e980b00e">CEncoder::SetStreamPosToStart</a></div><div class="ttdeci">void SetStreamPosToStart()</div><div class="ttdoc">Resets stream position to beginning of PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8h_source.html#l00188">Encoder.h:188</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCDecoder_html_ab043bb3599b2301bebd22527258ac4cf"><div class="ttname"><a href="classCDecoder.html#ab043bb3599b2301bebd22527258ac4cf">CDecoder::SetStreamPosToStart</a></div><div class="ttdeci">void SetStreamPosToStart()</div><div class="ttdoc">Resets stream position to beginning of PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="Decoder_8h_source.html#l00140">Decoder.h:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a870dea53390ffe1af210069f6b30eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a870dea53390ffe1af210069f6b30eb">&#9670;&nbsp;</a></span>RgbToYuv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::RgbToYuv </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pitch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT8 *&#160;</td>
          <td class="paramname"><em>rgbBuff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>bpp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channelMap</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01388">1388</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                                                                                                         {</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        ASSERT(buff);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        UINT32 yPos = 0, cnt = 0;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordtype">double</span> percent = 0;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> dP = 1.0/<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordtype">int</span> defMap[] = { 0, 1, 2, 3, 4, 5, 6, 7 }; ASSERT(<span class="keyword">sizeof</span>(defMap)/<span class="keyword">sizeof</span>(defMap[0]) == <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">if</span> (channelMap == <span class="keyword">nullptr</span>) channelMap = defMap;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">switch</span>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a>) {</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a>:</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                {</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 1);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 1);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                        ASSERT(bpp == 1);</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                        </div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                        <span class="keyword">const</span> UINT32 w = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                        <span class="keyword">const</span> UINT32 w2 = (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a> + 7)/8;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                        <span class="comment">// new unpacked version since version 7</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h = 0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                                }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                                <span class="keywordflow">for</span> (UINT32 j = 0; j &lt; w2; j++) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                                        UINT8 <span class="keywordtype">byte</span> = buff[j];</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 8; k++) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                                                UINT8 bit = (<span class="keywordtype">byte</span> &amp; 0x80) &gt;&gt; 7;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                                                <span class="keywordflow">if</span> (cnt &lt; w) y[yPos++] = bit;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                                                <span class="keywordtype">byte</span> &lt;&lt;= 1;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                                                cnt++;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                        }</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                                }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                                buff += pitch;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                        }</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                        <span class="comment">/* old version: packed values: 8 pixels in 1 byte</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">                        for (UINT32 h = 0; h &lt; m_header.height; h++) {</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">                                if (cb) {</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="comment">                                        if ((*cb)(percent, true, data)) ReturnWithError(EscapePressed);</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;<span class="comment">                                        percent += dP;</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;<span class="comment">                                }</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">                                for (UINT32 j = 0; j &lt; w2; j++) {</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">                                        y[yPos++] = buff[j] - YUVoffset8;</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">                                }</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">                                // version 5 and 6</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">                                // for (UINT32 j = w2; j &lt; w; j++) {</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">                                //      y[yPos++] = YUVoffset8;</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">                                //}</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">                                buff += pitch;</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">                        }</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">                        */</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                }</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a>:</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a>:</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a5e4deddebb6ff58e1168fc20b0e15cb3">ImageModeHSLColor</a>:</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aca2b65c53ff44940ed27f809de3b28f5">ImageModeHSBColor</a>:</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a>:</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> &gt;= 1);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                                }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                                                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][yPos] = buff[cnt + channelMap[c]] - <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                                        }</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                        yPos++;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                                buff += pitch;  </div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                        }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                }</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a>:</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>:</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> &gt;= 1);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*16);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;                        ASSERT(bpp%16 == 0);</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                        UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                                }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                                                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][yPos] = (buff16[cnt + channelMap[c]] &gt;&gt; shift) - yuvOffset16;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                                        }</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                                        yPos++;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                                }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                                buff16 += pitch16;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                        }</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a>:</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                        UINT8 b, g, r;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                                }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                                        b = buff[cnt + channelMap[0]];</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                                        g = buff[cnt + channelMap[1]];</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                                        r = buff[cnt + channelMap[2]];</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                                        y[yPos] = ((b + (g &lt;&lt; 1) + r) &gt;&gt; 2) - <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                                        u[yPos] = r - g;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                                        v[yPos] = b - g;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                                        yPos++;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                                }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                                buff += pitch;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                        }       </div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a>:</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                {</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*16);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                        ASSERT(bpp%16 == 0);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                        UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                        UINT16 b, g, r;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                                }</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                        b = buff16[cnt + channelMap[0]] &gt;&gt; shift;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                                        g = buff16[cnt + channelMap[1]] &gt;&gt; shift;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                                        r = buff16[cnt + channelMap[2]] &gt;&gt; shift;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                                        y[yPos] = ((b + (g &lt;&lt; 1) + r) &gt;&gt; 2) - yuvOffset16;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                                        u[yPos] = r - g;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                        v[yPos] = b - g;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                        yPos++;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                                }</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                                buff16 += pitch16;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                        }       </div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                }</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a>:</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a>:</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 4);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*8);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                        ASSERT(bpp%8 == 0);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/8; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[3]; ASSERT(a);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                        UINT8 b, g, r;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                                }</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                                        b = buff[cnt + channelMap[0]];</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                                        g = buff[cnt + channelMap[1]];</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                                        r = buff[cnt + channelMap[2]];</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                                        y[yPos] = ((b + (g &lt;&lt; 1) + r) &gt;&gt; 2) - <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                                        u[yPos] = r - g;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                                        v[yPos] = b - g;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                                        a[yPos++] = buff[cnt + channelMap[3]] - <a class="code" href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                                }</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                                buff += pitch;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                        }       </div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                }</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a>:</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                {</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 4);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*16);</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;                        ASSERT(bpp%16 == 0);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                        UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> channels = bpp/16; ASSERT(channels &gt;= <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 16 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset16 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                        </div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* a = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[3]; ASSERT(a);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                        UINT16 b, g, r;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                                }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                                        b = buff16[cnt + channelMap[0]] &gt;&gt; shift;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                                        g = buff16[cnt + channelMap[1]] &gt;&gt; shift;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                                        r = buff16[cnt + channelMap[2]] &gt;&gt; shift;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                                        y[yPos] = ((b + (g &lt;&lt; 1) + r) &gt;&gt; 2) - yuvOffset16;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                                        u[yPos] = r - g;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                                        v[yPos] = b - g;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;                                        a[yPos++] = (buff16[cnt + channelMap[3]] &gt;&gt; shift) - yuvOffset16;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                                        cnt += channels;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;                                }</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                                buff16 += pitch16;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                        }       </div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                }</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="preprocessor">#ifdef __PGF32SUPPORT__</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a>:</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                {</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 1);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 32);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;                        ASSERT(bpp == 32);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                        ASSERT(<a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a> == <span class="keyword">sizeof</span>(UINT32));</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                        UINT32 *buff32 = (UINT32 *)buff;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch32 = pitch/4;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> shift = 31 - <a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>(); ASSERT(shift &gt;= 0);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                        <span class="keyword">const</span> <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> yuvOffset31 = 1 &lt;&lt; (<a class="code" href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">UsedBitsPerChannel</a>() - 1);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                                }</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                                        y[yPos++] = (buff32[w] &gt;&gt; shift) - yuvOffset31;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                                }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                                buff32 += pitch32;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                        }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                }</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a>:</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*4);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                        ASSERT(bpp == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>*4);</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                        UINT8 rgb = 0, b, g, r;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                                }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                                cnt = 0;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                                        <span class="keywordflow">if</span> (w%2 == 0) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                                                <span class="comment">// even pixel position</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                                                rgb = buff[cnt];</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                                                b = rgb &amp; 0x0F;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                                                g = (rgb &amp; 0xF0) &gt;&gt; 4;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                                                cnt++;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                                rgb = buff[cnt];</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                                                r = rgb &amp; 0x0F;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                                                <span class="comment">// odd pixel position</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                                                b = (rgb &amp; 0xF0) &gt;&gt; 4;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                                                cnt++;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                                                rgb = buff[cnt];</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                                                g = rgb &amp; 0x0F;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                                                r = (rgb &amp; 0xF0) &gt;&gt; 4;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                                                cnt++;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                        }</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                                        y[yPos] = ((b + (g &lt;&lt; 1) + r) &gt;&gt; 2) - <a class="code" href="PGFimage_8cpp.html#a532f21ec0d021733ebae0ad001bb0bef">YUVoffset4</a>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                                        u[yPos] = r - g;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                        v[yPos] = b - g;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                                        yPos++;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                                }</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                                buff += pitch;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                        }       </div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                }</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a>:</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                {</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> == 3);</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a> == 16);</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                        ASSERT(bpp == 16);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                        </div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* y = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[0]; ASSERT(y);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* u = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[1]; ASSERT(u);</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* v = <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[2]; ASSERT(v);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                        UINT16 *buff16 = (UINT16 *)buff;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                        UINT16 rgb, b, g, r;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">int</span> pitch16 = pitch/2;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                        <span class="keywordflow">for</span> (UINT32 h=0; h &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>; h++) {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                                        <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                                        percent += dP;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                                }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                                <span class="keywordflow">for</span> (UINT32 w=0; w &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>; w++) {</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                                        rgb = buff16[w]; </div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                                        r = (rgb &amp; 0xF800) &gt;&gt; 10;       <span class="comment">// highest 5 bits</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                                        g = (rgb &amp; 0x07E0) &gt;&gt; 5;        <span class="comment">// middle 6 bits</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                                        b = (rgb &amp; 0x001F) &lt;&lt; 1;        <span class="comment">// lowest 5 bits</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                                        <span class="comment">// Yuv</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                                        y[yPos] = ((b + (g &lt;&lt; 1) + r) &gt;&gt; 2) - <a class="code" href="PGFimage_8cpp.html#ae908d3596ec0b26c916572376f8ac1d7">YUVoffset6</a>;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                                        u[yPos] = r - g;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                                        v[yPos] = b - g;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                                        yPos++;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                                }</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                                buff16 += pitch16;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                        }       </div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                ASSERT(<span class="keyword">false</span>);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;        }</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;}</div><div class="ttc" id="PGFplatform_8h_html_af1937c5b38a21ec5e6b3e11851264be2"><div class="ttname"><a href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a></div><div class="ttdeci">#define ImageModeIndexedColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00100">PGFplatform.h:100</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a1dbd9112d53e5eea856e65ed1e9c6d50"><div class="ttname"><a href="PGFplatform_8h.html#a1dbd9112d53e5eea856e65ed1e9c6d50">ImageModeRGB12</a></div><div class="ttdeci">#define ImageModeRGB12</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00117">PGFplatform.h:117</a></div></div>
<div class="ttc" id="structPGFHeader_html_a3ddaf075db8ee812ad688d9ed39e0698"><div class="ttname"><a href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">PGFHeader::mode</a></div><div class="ttdeci">UINT8 mode</div><div class="ttdoc">image mode according to Adobe's image modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00158">PGFtypes.h:158</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aca2b65c53ff44940ed27f809de3b28f5"><div class="ttname"><a href="PGFplatform_8h.html#aca2b65c53ff44940ed27f809de3b28f5">ImageModeHSBColor</a></div><div class="ttdeci">#define ImageModeHSBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00104">PGFplatform.h:104</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6cc4f75843c3c15f573aaa0131649b10"><div class="ttname"><a href="classCPGFImage.html#a6cc4f75843c3c15f573aaa0131649b10">CPGFImage::UsedBitsPerChannel</a></div><div class="ttdeci">BYTE UsedBitsPerChannel() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00755">PGFimage.cpp:755</a></div></div>
<div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ab7cb460804a8abce27d823d09682c85b"><div class="ttname"><a href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a></div><div class="ttdeci">#define ImageModeRGBA</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00115">PGFplatform.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aa1d93456909be3c716a8c5a30b191c00"><div class="ttname"><a href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a></div><div class="ttdeci">#define ImageModeLabColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00107">PGFplatform.h:107</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aedd00370d778fa28db56e5d4032d4c5c"><div class="ttname"><a href="PGFplatform_8h.html#aedd00370d778fa28db56e5d4032d4c5c">ImageModeGray16</a></div><div class="ttdeci">#define ImageModeGray16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00108">PGFplatform.h:108</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ae7de617953bf44d768dfd82b62a98db5"><div class="ttname"><a href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a></div><div class="ttdeci">#define ImageModeLab48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00110">PGFplatform.h:110</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af50b920dae1922b4eb0bcd82361d880c"><div class="ttname"><a href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a></div><div class="ttdeci">#define ImageModeCMYKColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00102">PGFplatform.h:102</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac73bfc2f52b9da3083b7087d154c1e2e"><div class="ttname"><a href="PGFplatform_8h.html#ac73bfc2f52b9da3083b7087d154c1e2e">ImageModeGrayScale</a></div><div class="ttdeci">#define ImageModeGrayScale</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00099">PGFplatform.h:99</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_ae908d3596ec0b26c916572376f8ac1d7"><div class="ttname"><a href="PGFimage_8cpp.html#ae908d3596ec0b26c916572376f8ac1d7">YUVoffset6</a></div><div class="ttdeci">#define YUVoffset6</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00037">PGFimage.cpp:37</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a205e54791f7ad54d357330bb99cab3b2"><div class="ttname"><a href="PGFplatform_8h.html#a205e54791f7ad54d357330bb99cab3b2">ImageModeGray32</a></div><div class="ttdeci">#define ImageModeGray32</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00116">PGFplatform.h:116</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a07e2059cc6697336c5484447578264fc"><div class="ttname"><a href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a></div><div class="ttdeci">#define ImageModeRGBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00101">PGFplatform.h:101</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a5e4deddebb6ff58e1168fc20b0e15cb3"><div class="ttname"><a href="PGFplatform_8h.html#a5e4deddebb6ff58e1168fc20b0e15cb3">ImageModeHSLColor</a></div><div class="ttdeci">#define ImageModeHSLColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00103">PGFplatform.h:103</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a8905b28d0e3b96cf340ed34957738648"><div class="ttname"><a href="PGFplatform_8h.html#a8905b28d0e3b96cf340ed34957738648">ImageModeBitmap</a></div><div class="ttdeci">#define ImageModeBitmap</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00098">PGFplatform.h:98</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac250ca543e6f93f370614801122b61f6"><div class="ttname"><a href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a></div><div class="ttdeci">#define ImageModeCMYK64</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00111">PGFplatform.h:111</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_a532f21ec0d021733ebae0ad001bb0bef"><div class="ttname"><a href="PGFimage_8cpp.html#a532f21ec0d021733ebae0ad001bb0bef">YUVoffset4</a></div><div class="ttdeci">#define YUVoffset4</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00036">PGFimage.cpp:36</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aadaf1bd7eedf80c33287cfd311dbf068"><div class="ttname"><a href="PGFplatform_8h.html#aadaf1bd7eedf80c33287cfd311dbf068">ImageModeRGB16</a></div><div class="ttdeci">#define ImageModeRGB16</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00118">PGFplatform.h:118</a></div></div>
<div class="ttc" id="PGFimage_8cpp_html_a0fc648cb4d04d369ff4692cc07687039"><div class="ttname"><a href="PGFimage_8cpp.html#a0fc648cb4d04d369ff4692cc07687039">YUVoffset8</a></div><div class="ttdeci">#define YUVoffset8</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00038">PGFimage.cpp:38</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac04b7a3633a0caadba20e20e161239e1"><div class="ttname"><a href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a></div><div class="ttdeci">#define ImageModeRGB48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00109">PGFplatform.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9db775cf3a36997b55106fbab7284c14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9db775cf3a36997b55106fbab7284c14">&#9670;&nbsp;</a></span>ROIisSupported()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::ROIisSupported </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return true if the pgf image supports Region Of Interest (ROI). </p><dl class="section return"><dt>Returns</dt><dd>true if the pgf image supports ROI. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00466">466</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{ <span class="keywordflow">return</span> (<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a> &amp; <a class="code" href="PGFtypes_8h.html#a0ba6d90f8f69de741164e86a2b4c10af">PGFROI</a>) == <a class="code" href="PGFtypes_8h.html#a0ba6d90f8f69de741164e86a2b4c10af">PGFROI</a>; }</div><div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a0ba6d90f8f69de741164e86a2b4c10af"><div class="ttname"><a href="PGFtypes_8h.html#a0ba6d90f8f69de741164e86a2b4c10af">PGFROI</a></div><div class="ttdeci">#define PGFROI</div><div class="ttdoc">supports Regions Of Interest</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00070">PGFtypes.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2f470e1cfdb1300338e32f0926588a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f470e1cfdb1300338e32f0926588a6c">&#9670;&nbsp;</a></span>SetChannel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetChannel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>c</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set internal PGF image buffer channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>A YUV data channel </td></tr>
    <tr><td class="paramname">c</td><td>A channel index </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00272">272</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{ ASSERT(c &gt;= 0 &amp;&amp; c &lt; <a class="code" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>); <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c] = channel; }</div><div class="ttc" id="PGFtypes_8h_html_a94219182f88d4dbed1021ed04db75e41"><div class="ttname"><a href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a></div><div class="ttdeci">#define MaxChannels</div><div class="ttdoc">maximum number of (color) channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00064">PGFtypes.h:64</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a35b54c9108fa67d99fad592b415b2bf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35b54c9108fa67d99fad592b415b2bf5">&#9670;&nbsp;</a></span>SetColorTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetColorTable </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>iFirstColor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>nColors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const RGBQUAD *&#160;</td>
          <td class="paramname"><em>prgbColors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the red, green, blue (RGB) color values for a range of entries in the palette (clut). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iFirstColor</td><td>The color table index of the first entry to set. </td></tr>
    <tr><td class="paramname">nColors</td><td>The number of color table entries to set. </td></tr>
    <tr><td class="paramname">prgbColors</td><td>A pointer to the array of RGBQUAD structures to set the color table entries. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01363">1363</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                                                                           {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keywordflow">if</span> (iFirstColor + nColors &gt; <a class="code" href="PGFtypes_8h.html#a9d98169485fbcb79dd2277c567f3f27d">ColorTableLen</a>)      ReturnWithError(ColorTableError);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordflow">for</span> (UINT32 i=iFirstColor, j=0; j &lt; nColors; i++, j++) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a3a7faf3091c0faa2e508ecdeb54ea706">clut</a>[i] = prgbColors[j];</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        }</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;}</div><div class="ttc" id="PGFtypes_8h_html_a9d98169485fbcb79dd2277c567f3f27d"><div class="ttname"><a href="PGFtypes_8h.html#a9d98169485fbcb79dd2277c567f3f27d">ColorTableLen</a></div><div class="ttdeci">#define ColorTableLen</div><div class="ttdoc">size of color lookup table (clut)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00066">PGFtypes.h:66</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a3a7faf3091c0faa2e508ecdeb54ea706"><div class="ttname"><a href="structPGFPostHeader.html#a3a7faf3091c0faa2e508ecdeb54ea706">PGFPostHeader::clut</a></div><div class="ttdeci">RGBQUAD clut[ColorTableLen]</div><div class="ttdoc">color table for indexed color images (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00169">PGFtypes.h:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a200790d3be292a19fe8cbdd78ddfc386"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a200790d3be292a19fe8cbdd78ddfc386">&#9670;&nbsp;</a></span>SetHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetHeader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structPGFHeader.html">PGFHeader</a> &amp;&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>flags</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UINT8 *&#160;</td>
          <td class="paramname"><em>userData</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>userDataLength</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set PGF header and user data. Precondition: The PGF image has been never opened with Open(...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">header</td><td>A valid and already filled in PGF header structure </td></tr>
    <tr><td class="paramname">flags</td><td>A combination of additional version flags. In case you use level-wise encoding then set flag = PGFROI. </td></tr>
    <tr><td class="paramname">userData</td><td>A user-defined memory block containing any kind of cached metadata. </td></tr>
    <tr><td class="paramname">userDataLength</td><td>The size of user-defined memory block in bytes </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00893">893</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                                                                                                                 {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        ASSERT(!<a class="code" href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">m_decoder</a>);     <span class="comment">// current image must be closed</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        ASSERT(header.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> &lt;= <a class="code" href="PGFtypes_8h.html#a70d2da7f475eb7f6564e75d64ee77ae4">MaxQuality</a>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        ASSERT(userDataLength &lt;= <a class="code" href="PGFtypes_8h.html#a513fcd9e30f1a99d382b5c001499cdf5">MaxUserDataSize</a>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        </div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="comment">// init state</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">#ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <a class="code" href="classCPGFImage.html#af6d3fe5a8622634d1d0faf56cde335ef">m_streamReinitialized</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// init preHeader</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        memcpy(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#a8b27eabb723f35b4fdb9e357e69b334b">magic</a>, <a class="code" href="PGFtypes_8h.html#a6af5fdbb431a51fc87698ac0b2da8e34">PGFMagic</a>, 3);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a> = <a class="code" href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a> | flags;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a> = <a class="code" href="PGFtypes_8h.html#a36882df0caa9057f3144aeb429a2d468">HeaderSize</a>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="comment">// copy header</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        memcpy(&amp;<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>, &amp;header, <a class="code" href="PGFtypes_8h.html#a36882df0caa9057f3144aeb429a2d468">HeaderSize</a>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="comment">// check quality</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> &gt; <a class="code" href="PGFtypes_8h.html#a70d2da7f475eb7f6564e75d64ee77ae4">MaxQuality</a>) <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> = <a class="code" href="PGFtypes_8h.html#a70d2da7f475eb7f6564e75d64ee77ae4">MaxQuality</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="comment">// complete header</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="classCPGFImage.html#a0f517491e6b64353cd9ba45f8697b865">CompleteHeader</a>();</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="comment">// check and set number of levels</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <a class="code" href="classCPGFImage.html#ad1ac56e997c83c4c7fe8283b70b84b85">ComputeLevels</a>();</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="comment">// check for downsample</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> &gt; <a class="code" href="PGFtypes_8h.html#ac3fdd6d7d71ed50f3b7365d5bc287cda">DownsampleThreshold</a> &amp;&amp;  (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a> || </div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                                                                                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a> || </div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                                                                                                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a> || </div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                                                                                                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a> || </div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                                                                                                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a> || </div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                                                                                                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a> || </div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                                                                                                        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a>)) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                <a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a> = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> - 1;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                <a class="code" href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">m_downsample</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a> = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="comment">// update header size and copy user data</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">mode</a> == <a class="code" href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a>) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                <span class="comment">// update header size</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a> += <a class="code" href="PGFtypes_8h.html#a50366374d6b8b02c5314f67cdd5aba9b">ColorTableSize</a>;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">if</span> (userDataLength &amp;&amp; userData) {</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                <span class="keywordflow">if</span> (userDataLength &gt; <a class="code" href="PGFtypes_8h.html#a513fcd9e30f1a99d382b5c001499cdf5">MaxUserDataSize</a>) userDataLength = <a class="code" href="PGFtypes_8h.html#a513fcd9e30f1a99d382b5c001499cdf5">MaxUserDataSize</a>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">userData</a> = <span class="keyword">new</span>(std::nothrow) UINT8[userDataLength];</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">userData</a>) ReturnWithError(InsufficientMemory);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a0fb630d6cd14ed865dd5fe20227279f2">userDataLen</a> = <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#a104e3ef6de85dfdbbd867a250fcd82d4">cachedUserDataLen</a> = userDataLength;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                memcpy(<a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>.<a class="code" href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">userData</a>, userData, userDataLength);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <span class="comment">// update header size</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a> += userDataLength;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="comment">// allocate channels</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <span class="comment">// set current width and height</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i] = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i] = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                <span class="comment">// allocate channels</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                ASSERT(!<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i] = <span class="keyword">new</span>(std::nothrow) <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>[<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>*<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">height</a>];</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                if (!<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                        <span class="keywordflow">if</span> (i) i--;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                        <span class="keywordflow">while</span>(i) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                <span class="keyword">delete</span>[] <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]; <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i] = 0;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                                i--;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                        }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                        ReturnWithError(InsufficientMemory);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                }</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div><div class="ttc" id="PGFplatform_8h_html_af1937c5b38a21ec5e6b3e11851264be2"><div class="ttname"><a href="PGFplatform_8h.html#af1937c5b38a21ec5e6b3e11851264be2">ImageModeIndexedColor</a></div><div class="ttdeci">#define ImageModeIndexedColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00100">PGFplatform.h:100</a></div></div>
<div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="structPGFHeader_html_a3ddaf075db8ee812ad688d9ed39e0698"><div class="ttname"><a href="structPGFHeader.html#a3ddaf075db8ee812ad688d9ed39e0698">PGFHeader::mode</a></div><div class="ttdeci">UINT8 mode</div><div class="ttdoc">image mode according to Adobe's image modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00158">PGFtypes.h:158</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_aba6dadeb0788b7e02ab3c4425c6ef38a"><div class="ttname"><a href="PGFtypes_8h.html#aba6dadeb0788b7e02ab3c4425c6ef38a">PGFVersion</a></div><div class="ttdeci">#define PGFVersion</div><div class="ttdoc">current standard version</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00076">PGFtypes.h:76</a></div></div>
<div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a50366374d6b8b02c5314f67cdd5aba9b"><div class="ttname"><a href="PGFtypes_8h.html#a50366374d6b8b02c5314f67cdd5aba9b">ColorTableSize</a></div><div class="ttdeci">#define ColorTableSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00281">PGFtypes.h:281</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a0fb630d6cd14ed865dd5fe20227279f2"><div class="ttname"><a href="structPGFPostHeader.html#a0fb630d6cd14ed865dd5fe20227279f2">PGFPostHeader::userDataLen</a></div><div class="ttdeci">UINT32 userDataLen</div><div class="ttdoc">user data size in bytes (not part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00171">PGFtypes.h:171</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ab7cb460804a8abce27d823d09682c85b"><div class="ttname"><a href="PGFplatform_8h.html#ab7cb460804a8abce27d823d09682c85b">ImageModeRGBA</a></div><div class="ttdeci">#define ImageModeRGBA</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00115">PGFplatform.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1058b29a3d046e171a2fe48168b66d38"><div class="ttname"><a href="classCPGFImage.html#a1058b29a3d046e171a2fe48168b66d38">CPGFImage::m_decoder</a></div><div class="ttdeci">CDecoder * m_decoder</div><div class="ttdoc">PGF decoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00523">PGFimage.h:523</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_aeeb6e57e8343eb3d42406f0baf3ae6e1"><div class="ttname"><a href="structPGFPostHeader.html#aeeb6e57e8343eb3d42406f0baf3ae6e1">PGFPostHeader::userData</a></div><div class="ttdeci">UINT8 * userData</div><div class="ttdoc">user data of size userDataLen (optional part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00170">PGFtypes.h:170</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_af6d3fe5a8622634d1d0faf56cde335ef"><div class="ttname"><a href="classCPGFImage.html#af6d3fe5a8622634d1d0faf56cde335ef">CPGFImage::m_streamReinitialized</a></div><div class="ttdeci">bool m_streamReinitialized</div><div class="ttdoc">stream has been reinitialized</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00540">PGFimage.h:540</a></div></div>
<div class="ttc" id="classCPGFImage_html_a0f517491e6b64353cd9ba45f8697b865"><div class="ttname"><a href="classCPGFImage.html#a0f517491e6b64353cd9ba45f8697b865">CPGFImage::CompleteHeader</a></div><div class="ttdeci">bool CompleteHeader()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00218">PGFimage.cpp:218</a></div></div>
<div class="ttc" id="classCPGFImage_html_a57cc024db6e510f95f3238f448a0fed5"><div class="ttname"><a href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">CPGFImage::m_quant</a></div><div class="ttdeci">BYTE m_quant</div><div class="ttdoc">quantization parameter</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00534">PGFimage.h:534</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a36882df0caa9057f3144aeb429a2d468"><div class="ttname"><a href="PGFtypes_8h.html#a36882df0caa9057f3144aeb429a2d468">HeaderSize</a></div><div class="ttdeci">#define HeaderSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00280">PGFtypes.h:280</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_aa1d93456909be3c716a8c5a30b191c00"><div class="ttname"><a href="PGFplatform_8h.html#aa1d93456909be3c716a8c5a30b191c00">ImageModeLabColor</a></div><div class="ttdeci">#define ImageModeLabColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00107">PGFplatform.h:107</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a6af5fdbb431a51fc87698ac0b2da8e34"><div class="ttname"><a href="PGFtypes_8h.html#a6af5fdbb431a51fc87698ac0b2da8e34">PGFMagic</a></div><div class="ttdeci">#define PGFMagic</div><div class="ttdoc">PGF identification.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00061">PGFtypes.h:61</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ae7de617953bf44d768dfd82b62a98db5"><div class="ttname"><a href="PGFplatform_8h.html#ae7de617953bf44d768dfd82b62a98db5">ImageModeLab48</a></div><div class="ttdeci">#define ImageModeLab48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00110">PGFplatform.h:110</a></div></div>
<div class="ttc" id="structPGFPostHeader_html_a104e3ef6de85dfdbbd867a250fcd82d4"><div class="ttname"><a href="structPGFPostHeader.html#a104e3ef6de85dfdbbd867a250fcd82d4">PGFPostHeader::cachedUserDataLen</a></div><div class="ttdeci">UINT32 cachedUserDataLen</div><div class="ttdoc">cached user data size in bytes (not part of file header)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00172">PGFtypes.h:172</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_af50b920dae1922b4eb0bcd82361d880c"><div class="ttname"><a href="PGFplatform_8h.html#af50b920dae1922b4eb0bcd82361d880c">ImageModeCMYKColor</a></div><div class="ttdeci">#define ImageModeCMYKColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00102">PGFplatform.h:102</a></div></div>
<div class="ttc" id="structPGFMagicVersion_html_a8b27eabb723f35b4fdb9e357e69b334b"><div class="ttname"><a href="structPGFMagicVersion.html#a8b27eabb723f35b4fdb9e357e69b334b">PGFMagicVersion::magic</a></div><div class="ttdeci">char magic[3]</div><div class="ttdoc">PGF identification = &quot;PGF&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00114">PGFtypes.h:114</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad1ac56e997c83c4c7fe8283b70b84b85"><div class="ttname"><a href="classCPGFImage.html#ad1ac56e997c83c4c7fe8283b70b84b85">CPGFImage::ComputeLevels</a></div><div class="ttdeci">void ComputeLevels()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00853">PGFimage.cpp:853</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9226595ea6b907e4d07301a6ee641b87"><div class="ttname"><a href="classCPGFImage.html#a9226595ea6b907e4d07301a6ee641b87">CPGFImage::m_downsample</a></div><div class="ttdeci">bool m_downsample</div><div class="ttdoc">chrominance channels are downsampled</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00535">PGFimage.h:535</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_ac3fdd6d7d71ed50f3b7365d5bc287cda"><div class="ttname"><a href="PGFtypes_8h.html#ac3fdd6d7d71ed50f3b7365d5bc287cda">DownsampleThreshold</a></div><div class="ttdeci">#define DownsampleThreshold</div><div class="ttdoc">if quality is larger than this threshold than downsampling is used</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00065">PGFtypes.h:65</a></div></div>
<div class="ttc" id="structPGFPreHeader_html_a71b1463b71b722459dad25a3ef0b492b"><div class="ttname"><a href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">PGFPreHeader::hSize</a></div><div class="ttdeci">UINT32 hSize</div><div class="ttdoc">total size of PGFHeader, [ColorTable], and [UserData] in bytes (since Version 6: 4 Bytes)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00124">PGFtypes.h:124</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a70d2da7f475eb7f6564e75d64ee77ae4"><div class="ttname"><a href="PGFtypes_8h.html#a70d2da7f475eb7f6564e75d64ee77ae4">MaxQuality</a></div><div class="ttdeci">#define MaxQuality</div><div class="ttdoc">maximum quality</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00094">PGFtypes.h:94</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_a07e2059cc6697336c5484447578264fc"><div class="ttname"><a href="PGFplatform_8h.html#a07e2059cc6697336c5484447578264fc">ImageModeRGBColor</a></div><div class="ttdeci">#define ImageModeRGBColor</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00101">PGFplatform.h:101</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a513fcd9e30f1a99d382b5c001499cdf5"><div class="ttname"><a href="PGFtypes_8h.html#a513fcd9e30f1a99d382b5c001499cdf5">MaxUserDataSize</a></div><div class="ttdeci">#define MaxUserDataSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00283">PGFtypes.h:283</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac250ca543e6f93f370614801122b61f6"><div class="ttname"><a href="PGFplatform_8h.html#ac250ca543e6f93f370614801122b61f6">ImageModeCMYK64</a></div><div class="ttdeci">#define ImageModeCMYK64</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00111">PGFplatform.h:111</a></div></div>
<div class="ttc" id="structPGFHeader_html_ac314a16d5984aea88f4a5ff38f49c08b"><div class="ttname"><a href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">PGFHeader::quality</a></div><div class="ttdeci">UINT8 quality</div><div class="ttdoc">quantization parameter: 0=lossless, 4=standard, 6=poor quality</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00155">PGFtypes.h:155</a></div></div>
<div class="ttc" id="structPGFHeader_html_a7262335e99ca409759e1aa8c0f0164b1"><div class="ttname"><a href="structPGFHeader.html#a7262335e99ca409759e1aa8c0f0164b1">PGFHeader::height</a></div><div class="ttdeci">UINT32 height</div><div class="ttdoc">image height in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00153">PGFtypes.h:153</a></div></div>
<div class="ttc" id="PGFplatform_8h_html_ac04b7a3633a0caadba20e20e161239e1"><div class="ttname"><a href="PGFplatform_8h.html#ac04b7a3633a0caadba20e20e161239e1">ImageModeRGB48</a></div><div class="ttdeci">#define ImageModeRGB48</div><div class="ttdef"><b>Definition:</b> <a href="PGFplatform_8h_source.html#l00109">PGFplatform.h:109</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a6370e6737d250360cb6431d885a685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a6370e6737d250360cb6431d885a685">&#9670;&nbsp;</a></span>SetMaxValue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetMaxValue </td>
          <td>(</td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>maxValue</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set maximum intensity value for image modes with more than eight bits per channel. Call this method after SetHeader, but before ImportBitmap. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxValue</td><td>The maximum intensity value. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00737">737</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                           {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keyword">const</span> BYTE bpc = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>/<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        BYTE pot = 0;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">while</span>(maxValue &gt; 0) {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                pot++;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                maxValue &gt;&gt;= 1;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="comment">// store bits per channel</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span> (pot &gt; bpc) pot = bpc;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">if</span> (pot &gt; 31) pot = 31;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">usedBitsPerChannel</a> = pot;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_abddcc9ee6e17690986cf77a6d16aceb6"><div class="ttname"><a href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">PGFHeader::usedBitsPerChannel</a></div><div class="ttdeci">UINT8 usedBitsPerChannel</div><div class="ttdoc">number of used bits per channel in 16- and 32-bit per channel modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00159">PGFtypes.h:159</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5ec0d246d068c55fdea5712f2b1609c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ec0d246d068c55fdea5712f2b1609c">&#9670;&nbsp;</a></span>SetProgressMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetProgressMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157e">ProgressMode</a>&#160;</td>
          <td class="paramname"><em>pm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set progress mode used in Read and Write. Default mode is PM_Relative. This method must be called before <a class="el" href="classCPGFImage.html#adbe9092b915a2c5b2361f4db186b991c">Open()</a> or <a class="el" href="classCPGFImage.html#a200790d3be292a19fe8cbdd78ddfc386">SetHeader()</a>. PM_Relative: 100% = level difference between current level and target level of Read/Write PM_Absolute: 100% = number of levels </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00296">296</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{ <a class="code" href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">m_progressMode</a> = pm; }</div><div class="ttc" id="classCPGFImage_html_a8b4d6d5ef343f0f428b35c9bf1020569"><div class="ttname"><a href="classCPGFImage.html#a8b4d6d5ef343f0f428b35c9bf1020569">CPGFImage::m_progressMode</a></div><div class="ttdeci">ProgressMode m_progressMode</div><div class="ttdoc">progress mode used in Read and Write; PM_Relative is default mode</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00548">PGFimage.h:548</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbca597528f7f9bd28ddd95e8f530e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbca597528f7f9bd28ddd95e8f530e24">&#9670;&nbsp;</a></span>SetRefreshCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetRefreshCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="PGFtypes_8h.html#a80e898ce785fbd6fb0dfcc5903be79c2">RefreshCB</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set refresh callback procedure and its parameter. The refresh callback is called during Read(...) after each level read. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callback</td><td>A refresh callback procedure </td></tr>
    <tr><td class="paramname">arg</td><td>A parameter of the refresh callback procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00303">303</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{ <a class="code" href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">m_cb</a> = callback; <a class="code" href="classCPGFImage.html#a45861a83c95188610063233149187f3c">m_cbArg</a> = arg; }</div><div class="ttc" id="classCPGFImage_html_a45861a83c95188610063233149187f3c"><div class="ttname"><a href="classCPGFImage.html#a45861a83c95188610063233149187f3c">CPGFImage::m_cbArg</a></div><div class="ttdeci">void * m_cbArg</div><div class="ttdoc">refresh callback argument</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00546">PGFimage.h:546</a></div></div>
<div class="ttc" id="classCPGFImage_html_ac262a389df92493dfca63b2f1f06fe78"><div class="ttname"><a href="classCPGFImage.html#ac262a389df92493dfca63b2f1f06fe78">CPGFImage::m_cb</a></div><div class="ttdeci">RefreshCB m_cb</div><div class="ttdoc">pointer to refresh callback procedure</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00545">PGFimage.h:545</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83c737ee649fdc92c55b7a6ffe1153b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83c737ee649fdc92c55b7a6ffe1153b2">&#9670;&nbsp;</a></span>SetROI()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::SetROI </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPGFRect.html">PGFRect</a>&#160;</td>
          <td class="paramname"><em>rect</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a921e1ec08da8ddf6ab4d5657e5610fee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921e1ec08da8ddf6ab4d5657e5610fee">&#9670;&nbsp;</a></span>UpdatePostHeaderSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::UpdatePostHeaderSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01123">1123</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                       {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        INT64 offset = <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#a8aadfcf080fad9a5cd82b532dc847d5b">ComputeOffset</a>(); ASSERT(offset &gt;= 0);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">if</span> (offset &gt; 0) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                <span class="comment">// update post-header size and rewrite pre-header</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a> += (UINT32)offset;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#adcacefab75d6ab0e562d854f31d242ff">UpdatePostHeaderSize</a>(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="comment">// write dummy levelLength into stream</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#ad29dd5328d1198a672599034e7315922">WriteLevelLength</a>(<a class="code" href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">m_levelLength</a>);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="classCEncoder_html_ad29dd5328d1198a672599034e7315922"><div class="ttname"><a href="classCEncoder.html#ad29dd5328d1198a672599034e7315922">CEncoder::WriteLevelLength</a></div><div class="ttdeci">UINT32 WriteLevelLength(UINT32 *&amp;levelLength)</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8cpp_source.html#l00177">Encoder.cpp:177</a></div></div>
<div class="ttc" id="classCEncoder_html_adcacefab75d6ab0e562d854f31d242ff"><div class="ttname"><a href="classCEncoder.html#adcacefab75d6ab0e562d854f31d242ff">CEncoder::UpdatePostHeaderSize</a></div><div class="ttdeci">void UpdatePostHeaderSize(PGFPreHeader preHeader)</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8cpp_source.html#l00160">Encoder.cpp:160</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1635ef5dca13bd07276d112a72316a73"><div class="ttname"><a href="classCPGFImage.html#a1635ef5dca13bd07276d112a72316a73">CPGFImage::m_levelLength</a></div><div class="ttdeci">UINT32 * m_levelLength</div><div class="ttdoc">length of each level in bytes; first level starts immediately after this array</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00525">PGFimage.h:525</a></div></div>
<div class="ttc" id="structPGFPreHeader_html_a71b1463b71b722459dad25a3ef0b492b"><div class="ttname"><a href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">PGFPreHeader::hSize</a></div><div class="ttdeci">UINT32 hSize</div><div class="ttdoc">total size of PGFHeader, [ColorTable], and [UserData] in bytes (since Version 6: 4 Bytes)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00124">PGFtypes.h:124</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCEncoder_html_a8aadfcf080fad9a5cd82b532dc847d5b"><div class="ttname"><a href="classCEncoder.html#a8aadfcf080fad9a5cd82b532dc847d5b">CEncoder::ComputeOffset</a></div><div class="ttdeci">INT64 ComputeOffset() const</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8h_source.html#l00184">Encoder.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6cc4f75843c3c15f573aaa0131649b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc4f75843c3c15f573aaa0131649b10">&#9670;&nbsp;</a></span>UsedBitsPerChannel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::UsedBitsPerChannel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns number of used bits per input/output image channel. Precondition: header must be initialized. </p><dl class="section return"><dt>Returns</dt><dd>number of used bits per input/output image channel. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00755">755</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                                         {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keyword">const</span> BYTE bpc = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">bpp</a>/<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">if</span> (bpc &gt; 8) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">usedBitsPerChannel</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="keywordflow">return</span> bpc;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_abddcc9ee6e17690986cf77a6d16aceb6"><div class="ttname"><a href="structPGFHeader.html#abddcc9ee6e17690986cf77a6d16aceb6">PGFHeader::usedBitsPerChannel</a></div><div class="ttdeci">UINT8 usedBitsPerChannel</div><div class="ttdoc">number of used bits per channel in 16- and 32-bit per channel modes</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00159">PGFtypes.h:159</a></div></div>
<div class="ttc" id="structPGFHeader_html_aedea199e29cd6c404c82ab97c67e46b4"><div class="ttname"><a href="structPGFHeader.html#aedea199e29cd6c404c82ab97c67e46b4">PGFHeader::bpp</a></div><div class="ttdeci">UINT8 bpp</div><div class="ttdoc">bits per pixel</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00156">PGFtypes.h:156</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa872f5010f55a3bc696706d259b52051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa872f5010f55a3bc696706d259b52051">&#9670;&nbsp;</a></span>Version()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::Version </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the used codec major version of a pgf image </p><dl class="section return"><dt>Returns</dt><dd>PGF codec major version of this image </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00484">484</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{ BYTE ver = <a class="code" href="classCPGFImage.html#a58e8d626654a10486149146c8cd41d11">CodecMajorVersion</a>(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">version</a>); <span class="keywordflow">return</span> (ver &lt;= 7) ? ver : (BYTE)<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a637699477fb97e62d8cc3c102fac1fbb">version</a>.<a class="code" href="structPGFVersionNumber.html#a382f48922a9135e41e53f60e28815af2">major</a>; }</div><div class="ttc" id="structPGFMagicVersion_html_aa7ff5e50537cac9dd4c62d4c8982d09d"><div class="ttname"><a href="structPGFMagicVersion.html#aa7ff5e50537cac9dd4c62d4c8982d09d">PGFMagicVersion::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdoc">PGF version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00115">PGFtypes.h:115</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="classCPGFImage_html_a58e8d626654a10486149146c8cd41d11"><div class="ttname"><a href="classCPGFImage.html#a58e8d626654a10486149146c8cd41d11">CPGFImage::CodecMajorVersion</a></div><div class="ttdeci">static BYTE CodecMajorVersion(BYTE version=PGFVersion)</div><div class="ttdoc">Return major version.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00767">PGFimage.cpp:767</a></div></div>
<div class="ttc" id="structPGFVersionNumber_html_a382f48922a9135e41e53f60e28815af2"><div class="ttname"><a href="structPGFVersionNumber.html#a382f48922a9135e41e53f60e28815af2">PGFVersionNumber::major</a></div><div class="ttdeci">UINT16 major</div><div class="ttdoc">major version number</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00140">PGFtypes.h:140</a></div></div>
<div class="ttc" id="structPGFHeader_html_a637699477fb97e62d8cc3c102fac1fbb"><div class="ttname"><a href="structPGFHeader.html#a637699477fb97e62d8cc3c102fac1fbb">PGFHeader::version</a></div><div class="ttdeci">PGFVersionNumber version</div><div class="ttdoc">codec version number: (since Version 7)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00160">PGFtypes.h:160</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a327590f3bda3700649fbc7c99f8206f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a327590f3bda3700649fbc7c99f8206f2">&#9670;&nbsp;</a></span>Width()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::Width </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return image width of channel 0 at given level in pixels. The returned width is independent of any Read-operations and ROI. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>A level </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Image level width in pixels </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00413">413</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{ ASSERT(level &gt;= 0); <span class="keywordflow">return</span> <a class="code" href="classCPGFImage.html#ad7e2f885a059a39ca15a47ecb497833b">LevelSizeL</a>(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">width</a>, level); }</div><div class="ttc" id="structPGFHeader_html_a766a68c3284c2ae6d2f54c82e7350ed9"><div class="ttname"><a href="structPGFHeader.html#a766a68c3284c2ae6d2f54c82e7350ed9">PGFHeader::width</a></div><div class="ttdeci">UINT32 width</div><div class="ttdoc">image width in pixels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00152">PGFtypes.h:152</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad7e2f885a059a39ca15a47ecb497833b"><div class="ttname"><a href="classCPGFImage.html#ad7e2f885a059a39ca15a47ecb497833b">CPGFImage::LevelSizeL</a></div><div class="ttdeci">static UINT32 LevelSizeL(UINT32 size, int level)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00499">PGFimage.h:499</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd13d233dceaeefce3def7d71ebf4f82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd13d233dceaeefce3def7d71ebf4f82">&#9670;&nbsp;</a></span>Write() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::Write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPGFStream.html">CPGFStream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>nWrittenBytes</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encode and write an entire PGF image (header and image) at current stream position. A PGF image is structered in levels, numbered between 0 and <a class="el" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels()</a> - 1. Each level can be seen as a single image, containing the same content as all other levels, but in a different size (width, height). The image size at level i is double the size (width, height) of the image at level i+1. The image at level 0 contains the original size. Precondition: the PGF image contains a valid header (see also SetHeader(...)). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>A PGF stream </td></tr>
    <tr><td class="paramname">nWrittenBytes</td><td>[in-out] The number of bytes written into stream are added to the input value. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after writing a single level. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01220">1220</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                                                                                                 {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        ASSERT(stream);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="comment">// create wavelet transform channels and encoder</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        UINT32 nBytes = <a class="code" href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">WriteHeader</a>(stream);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="comment">// write image</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        nBytes += <a class="code" href="classCPGFImage.html#a0f0657eaf1a62ab14c01834e5c7adb07">WriteImage</a>(stream, cb, data);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="comment">// return written bytes</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">if</span> (nWrittenBytes) *nWrittenBytes += nBytes;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="classCPGFImage_html_a0f0657eaf1a62ab14c01834e5c7adb07"><div class="ttname"><a href="classCPGFImage.html#a0f0657eaf1a62ab14c01834e5c7adb07">CPGFImage::WriteImage</a></div><div class="ttdeci">UINT32 WriteImage(CPGFStream *stream, CallbackPtr cb=nullptr, void *data=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l01149">PGFimage.cpp:1149</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1d853cd049417f0afc9a868664d7134d"><div class="ttname"><a href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">CPGFImage::WriteHeader</a></div><div class="ttdeci">UINT32 WriteHeader(CPGFStream *stream)</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l00978">PGFimage.cpp:978</a></div></div>
<div class="ttc" id="structPGFPreHeader_html_a71b1463b71b722459dad25a3ef0b492b"><div class="ttname"><a href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">PGFPreHeader::hSize</a></div><div class="ttdeci">UINT32 hSize</div><div class="ttdoc">total size of PGFHeader, [ColorTable], and [UserData] in bytes (since Version 6: 4 Bytes)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00124">PGFtypes.h:124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a0ef3ad10c8a14b2b9a8d6153387ffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a0ef3ad10c8a14b2b9a8d6153387ffe">&#9670;&nbsp;</a></span>Write() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::Write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encode and write down to given level at current stream position. A PGF image is structered in levels, numbered between 0 and <a class="el" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels()</a> - 1. Each level can be seen as a single image, containing the same content as all other levels, but in a different size (width, height). The image size at level i is double the size (width, height) of the image at level i+1. The image at level 0 contains the original size. Preconditions: the PGF image contains a valid header (see also SetHeader(...)) and <a class="el" href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">WriteHeader()</a> has been called before. <a class="el" href="classCPGFImage.html#ab3678d05c031dc4cbf5451e7f4f6bdf3">Levels()</a> &gt; 0. The ROI encoding scheme must be used (see also SetHeader(...)). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>[0, nLevels) The image level of the resulting image in the internal image buffer. </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after writing a single level. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written into stream. </dd></dl>

</div>
</div>
<a id="a1d853cd049417f0afc9a868664d7134d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d853cd049417f0afc9a868664d7134d">&#9670;&nbsp;</a></span>WriteHeader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::WriteHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPGFStream.html">CPGFStream</a> *&#160;</td>
          <td class="paramname"><em>stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create wavelet transform channels and encoder. Write header at current stream position. Call this method before your first call of Write(int level) or <a class="el" href="classCPGFImage.html#a0f0657eaf1a62ab14c01834e5c7adb07">WriteImage()</a>, but after <a class="el" href="classCPGFImage.html#a200790d3be292a19fe8cbdd78ddfc386">SetHeader()</a>. This method is called inside of Write(stream, ...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>A PGF stream </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written into stream.</dd></dl>
<p>Create wavelet transform channels and encoder. Write header at current stream position. Performs forward FWT. Call this method before your first call of Write(int level) or <a class="el" href="classCPGFImage.html#a0f0657eaf1a62ab14c01834e5c7adb07">WriteImage()</a>, but after <a class="el" href="classCPGFImage.html#a200790d3be292a19fe8cbdd78ddfc386">SetHeader()</a>. This method is called inside of Write(stream, ...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>A PGF stream </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written into stream. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l00978">978</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                                {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &lt;= <a class="code" href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a>);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">quality</a> &lt;= <a class="code" href="PGFtypes_8h.html#a70d2da7f475eb7f6564e75d64ee77ae4">MaxQuality</a>); <span class="comment">// quality is already initialized</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &gt; 0) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                <span class="keyword">volatile</span> OSError error = NoError; <span class="comment">// volatile prevents optimizations</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                <span class="comment">// create new wt channels</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="preprocessor">#ifdef LIBPGF_USE_OPENMP</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="preprocessor">                #pragma omp parallel for default(shared)</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                        <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a> *temp = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                        <span class="keywordflow">if</span> (error == NoError) {</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                                        ASSERT(<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                                        <span class="comment">// copy m_channel to temp</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                                        <span class="keywordtype">int</span> size = <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i]*<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i];</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                                        temp = <span class="keyword">new</span>(std::nothrow) <a class="code" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>[size];</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                                        <span class="keywordflow">if</span> (temp) {</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                                                memcpy(temp, <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i], size*<a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                                                <span class="keyword">delete</span> <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i];  <span class="comment">// also deletes m_channel</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                                                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i] = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                                                error = InsufficientMemory;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                        }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                }</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                                <span class="keywordflow">if</span> (error == NoError) {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                                        <span class="keywordflow">if</span> (temp) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                                                ASSERT(!<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                                                <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i] = temp;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                                        }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i] = <span class="keyword">new</span> <a class="code" href="classCSubband.html#a30d2cc4fc1b1060bf29a6576d926a615">CWaveletTransform</a>(<a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i], <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i], <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>, <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i]);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                                        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]) {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="preprocessor">                                        #ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                                                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;SetROI(<a class="code" href="structPGFRect.html">PGFRect</a>(0, 0, <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[i], <a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[i]));</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="preprocessor">                                        #endif</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                                        </div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                                                <span class="comment">// wavelet subband decomposition </span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                                                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l=0; error == NoError &amp;&amp; l &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>; l++) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                                                        OSError err = <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a7278418accd9329b9264ebe5f584001f">ForwardTransform</a>(l, <a class="code" href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">m_quant</a>);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                                        <span class="keywordflow">if</span> (err != NoError) error = err;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                                }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                                                <span class="keyword">delete</span>[] <a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[i];</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                                                error = InsufficientMemory;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                                        }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                                }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                        }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                <span class="keywordflow">if</span> (error != NoError) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                        <span class="comment">// free already allocated memory</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                                <span class="keyword">delete</span> <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i];</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                        }</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                        ReturnWithError(error);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                <span class="comment">// create encoder, write headers and user data, but not level-length area</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a> = <span class="keyword">new</span> <a class="code" href="classCEncoder.html">CEncoder</a>(stream, <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>, <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>, <a class="code" href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">m_userDataPos</a>, <a class="code" href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">m_useOMPinEncoder</a>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">m_favorSpeedOverSize</a>) <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#aa2ffd887a5d8b2e63dfa5b7188ca49f1">FavorSpeedOverSize</a>();</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="preprocessor">        #ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">ROIisSupported</a>()) {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                        <span class="comment">// new encoding scheme supporting ROI</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                        <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;SetROI();</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="preprocessor">        #endif</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="comment">// very small image: we don&#39;t use DWT and encoding</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                <span class="comment">// create encoder, write headers and user data, but not level-length area</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a> = <span class="keyword">new</span> <a class="code" href="classCEncoder.html">CEncoder</a>(stream, <a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>, <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>, <a class="code" href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">m_postHeader</a>, <a class="code" href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">m_userDataPos</a>, <a class="code" href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">m_useOMPinEncoder</a>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        INT64 nBytes = <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#a5c8dc9273c8a17ce72e86fec5f389112">ComputeHeaderLength</a>();</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">return</span> (nBytes &gt; 0) ? (UINT32)nBytes : 0;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div><div class="ttc" id="classCPGFImage_html_a6925d3950e8f48487205d46de7920d3e"><div class="ttname"><a href="classCPGFImage.html#a6925d3950e8f48487205d46de7920d3e">CPGFImage::m_favorSpeedOverSize</a></div><div class="ttdeci">bool m_favorSpeedOverSize</div><div class="ttdoc">favor encoding speed over compression ratio</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00536">PGFimage.h:536</a></div></div>
<div class="ttc" id="classCPGFImage_html_acf4ae6e169ddf84e32cf9b57a22800b3"><div class="ttname"><a href="classCPGFImage.html#acf4ae6e169ddf84e32cf9b57a22800b3">CPGFImage::m_userDataPos</a></div><div class="ttdeci">UINT64 m_userDataPos</div><div class="ttdoc">stream position of user data</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00531">PGFimage.h:531</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_acb1ee3f52ccfad782dcaa0abd79e5d05"><div class="ttname"><a href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a></div><div class="ttdeci">INT32 DataT</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00268">PGFtypes.h:268</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_a57cc024db6e510f95f3238f448a0fed5"><div class="ttname"><a href="classCPGFImage.html#a57cc024db6e510f95f3238f448a0fed5">CPGFImage::m_quant</a></div><div class="ttdeci">BYTE m_quant</div><div class="ttdoc">quantization parameter</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00534">PGFimage.h:534</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="classCWaveletTransform_html_a7278418accd9329b9264ebe5f584001f"><div class="ttname"><a href="classCWaveletTransform.html#a7278418accd9329b9264ebe5f584001f">CWaveletTransform::ForwardTransform</a></div><div class="ttdeci">OSError ForwardTransform(int level, int quant)</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8cpp_source.html#l00088">WaveletTransform.cpp:88</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a2468e509eae9683e25af403249b743a3"><div class="ttname"><a href="PGFtypes_8h.html#a2468e509eae9683e25af403249b743a3">MaxLevel</a></div><div class="ttdeci">#define MaxLevel</div><div class="ttdoc">maximum number of transform levels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00062">PGFtypes.h:62</a></div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab8635df22839ffb68bada53e38b9ce73"><div class="ttname"><a href="classCPGFImage.html#ab8635df22839ffb68bada53e38b9ce73">CPGFImage::m_postHeader</a></div><div class="ttdeci">PGFPostHeader m_postHeader</div><div class="ttdoc">PGF post-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00530">PGFimage.h:530</a></div></div>
<div class="ttc" id="classCSubband_html_a30d2cc4fc1b1060bf29a6576d926a615"><div class="ttname"><a href="classCSubband.html#a30d2cc4fc1b1060bf29a6576d926a615">CSubband::CWaveletTransform</a></div><div class="ttdeci">friend class CWaveletTransform</div><div class="ttdef"><b>Definition:</b> <a href="Subband_8h_source.html#l00043">Subband.h:43</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9db775cf3a36997b55106fbab7284c14"><div class="ttname"><a href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">CPGFImage::ROIisSupported</a></div><div class="ttdeci">bool ROIisSupported() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00466">PGFimage.h:466</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a70d2da7f475eb7f6564e75d64ee77ae4"><div class="ttname"><a href="PGFtypes_8h.html#a70d2da7f475eb7f6564e75d64ee77ae4">MaxQuality</a></div><div class="ttdeci">#define MaxQuality</div><div class="ttdoc">maximum quality</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00094">PGFtypes.h:94</a></div></div>
<div class="ttc" id="classCPGFImage_html_a140110570c6d492b23db50189d3f4d48"><div class="ttname"><a href="classCPGFImage.html#a140110570c6d492b23db50189d3f4d48">CPGFImage::m_useOMPinEncoder</a></div><div class="ttdeci">bool m_useOMPinEncoder</div><div class="ttdoc">use Open MP in encoder</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00537">PGFimage.h:537</a></div></div>
<div class="ttc" id="classCEncoder_html_a5c8dc9273c8a17ce72e86fec5f389112"><div class="ttname"><a href="classCEncoder.html#a5c8dc9273c8a17ce72e86fec5f389112">CEncoder::ComputeHeaderLength</a></div><div class="ttdeci">INT64 ComputeHeaderLength() const</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8h_source.html#l00174">Encoder.h:174</a></div></div>
<div class="ttc" id="classCEncoder_html_aa2ffd887a5d8b2e63dfa5b7188ca49f1"><div class="ttname"><a href="classCEncoder.html#aa2ffd887a5d8b2e63dfa5b7188ca49f1">CEncoder::FavorSpeedOverSize</a></div><div class="ttdeci">void FavorSpeedOverSize()</div><div class="ttdoc">Encoder favors speed over compression size.</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8h_source.html#l00121">Encoder.h:121</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="structPGFRect_html"><div class="ttname"><a href="structPGFRect.html">PGFRect</a></div><div class="ttdoc">Rectangle.</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00224">PGFtypes.h:224</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
<div class="ttc" id="structPGFHeader_html_ac314a16d5984aea88f4a5ff38f49c08b"><div class="ttname"><a href="structPGFHeader.html#ac314a16d5984aea88f4a5ff38f49c08b">PGFHeader::quality</a></div><div class="ttdeci">UINT8 quality</div><div class="ttdoc">quantization parameter: 0=lossless, 4=standard, 6=poor quality</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00155">PGFtypes.h:155</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
<div class="ttc" id="classCEncoder_html"><div class="ttname"><a href="classCEncoder.html">CEncoder</a></div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8h_source.html#l00046">Encoder.h:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0f0657eaf1a62ab14c01834e5c7adb07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f0657eaf1a62ab14c01834e5c7adb07">&#9670;&nbsp;</a></span>WriteImage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::WriteImage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCPGFStream.html">CPGFStream</a> *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CallbackPtr&#160;</td>
          <td class="paramname"><em>cb</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Encode and write an image at current stream position. Call this method after <a class="el" href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">WriteHeader()</a>. In case you want to write uncached metadata, then do that after <a class="el" href="classCPGFImage.html#a1d853cd049417f0afc9a868664d7134d">WriteHeader()</a> and before <a class="el" href="classCPGFImage.html#a0f0657eaf1a62ab14c01834e5c7adb07">WriteImage()</a>. This method is called inside of Write(stream, ...). It might throw an <a class="el" href="structIOException.html" title="PGF exception.">IOException</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>A PGF stream </td></tr>
    <tr><td class="paramname">cb</td><td>A pointer to a callback procedure. The procedure is called after writing a single level. If cb returns true, then it stops proceeding. </td></tr>
    <tr><td class="paramname">data</td><td>Data Pointer to C++ class container to host callback procedure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written into stream. </dd></dl>

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01149">1149</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                                                                               {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        ASSERT(stream);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">m_preHeader</a>.<a class="code" href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">hSize</a>);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="keywordtype">int</span> levels = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordtype">double</span> percent = pow(0.25, levels);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="comment">// update post-header size, rewrite pre-header, and write dummy levelLength</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        UINT32 nWrittenBytes = <a class="code" href="classCPGFImage.html#a921e1ec08da8ddf6ab4d5657e5610fee">UpdatePostHeaderSize</a>();</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="keywordflow">if</span> (levels == 0) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                <span class="comment">// for very small images: write channels uncoded</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c=0; c &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; c++) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                        <span class="keyword">const</span> UINT32 size = <a class="code" href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">m_width</a>[c]*<a class="code" href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">m_height</a>[c];</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                        <span class="comment">// write channel data into stream</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                        <span class="keywordflow">for</span> (UINT32 i=0; i &lt; size; i++) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                <span class="keywordtype">int</span> count = <a class="code" href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                                stream-&gt;<a class="code" href="classCPGFStream.html#a0a46ae977995134787219288f4123134">Write</a>(&amp;count, &amp;<a class="code" href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">m_channel</a>[c][i]);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                        }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="comment">// now update progress</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                        <span class="keywordflow">if</span> ((*cb)(1, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                <span class="comment">// encode quantized wavelet coefficients and write to PGF file</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                <span class="comment">// encode subbands, higher levels first</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <span class="comment">// color channels are interleaved</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                <span class="comment">// encode all levels</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> = levels; <a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> &gt; 0; ) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                        <a class="code" href="classCPGFImage.html#a1075a31893ee4ea2c686f5b471dd3664">WriteLevel</a>(); <span class="comment">// decrements m_currentLevel</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                        <span class="comment">// now update progress</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                        <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                                percent *= 4;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                                <span class="keywordflow">if</span> ((*cb)(percent, <span class="keyword">true</span>, data)) ReturnWithError(EscapePressed);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                        }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                <span class="comment">// flush encoder and write level lengths</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#a8e25f046e6f9bb67a7c5b3e71e5b6a32">Flush</a>();</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        }</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="comment">// update level lengths</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        nWrittenBytes += <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#a93d5e9bf075e804eb9626d4b0292c4dd">UpdateLevelLength</a>(); <span class="comment">// return written image bytes </span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="comment">// delete encoder</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keyword">delete</span> <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>; <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a> = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        ASSERT(!<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">return</span> nWrittenBytes;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="ttc" id="classCPGFStream_html_a0a46ae977995134787219288f4123134"><div class="ttname"><a href="classCPGFStream.html#a0a46ae977995134787219288f4123134">CPGFStream::Write</a></div><div class="ttdeci">virtual void Write(int *count, void *buffer)=0</div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1075a31893ee4ea2c686f5b471dd3664"><div class="ttname"><a href="classCPGFImage.html#a1075a31893ee4ea2c686f5b471dd3664">CPGFImage::WriteLevel</a></div><div class="ttdeci">void WriteLevel()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l01067">PGFimage.cpp:1067</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_adbb49c2b6ab931f68f08a8dc1141727d"><div class="ttname"><a href="PGFtypes_8h.html#adbb49c2b6ab931f68f08a8dc1141727d">DataTSize</a></div><div class="ttdeci">#define DataTSize</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00282">PGFtypes.h:282</a></div></div>
<div class="ttc" id="classCPGFImage_html_a36f7f20b38a9cb3a9c88032f5f886345"><div class="ttname"><a href="classCPGFImage.html#a36f7f20b38a9cb3a9c88032f5f886345">CPGFImage::m_channel</a></div><div class="ttdeci">DataT * m_channel[MaxChannels]</div><div class="ttdoc">untransformed channels in YUV format</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00522">PGFimage.h:522</a></div></div>
<div class="ttc" id="classCPGFImage_html_ad5ed0ec587742ebf46f72be4abde305d"><div class="ttname"><a href="classCPGFImage.html#ad5ed0ec587742ebf46f72be4abde305d">CPGFImage::m_preHeader</a></div><div class="ttdeci">PGFPreHeader m_preHeader</div><div class="ttdoc">PGF pre-header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00528">PGFimage.h:528</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="structPGFPreHeader_html_a71b1463b71b722459dad25a3ef0b492b"><div class="ttname"><a href="structPGFPreHeader.html#a71b1463b71b722459dad25a3ef0b492b">PGFPreHeader::hSize</a></div><div class="ttdeci">UINT32 hSize</div><div class="ttdoc">total size of PGFHeader, [ColorTable], and [UserData] in bytes (since Version 6: 4 Bytes)</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00124">PGFtypes.h:124</a></div></div>
<div class="ttc" id="classCPGFImage_html_ab6d97aca28795fae697fdda4b8acd8f9"><div class="ttname"><a href="classCPGFImage.html#ab6d97aca28795fae697fdda4b8acd8f9">CPGFImage::m_width</a></div><div class="ttdeci">UINT32 m_width[MaxChannels]</div><div class="ttdoc">width of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00526">PGFimage.h:526</a></div></div>
<div class="ttc" id="classCEncoder_html_a8e25f046e6f9bb67a7c5b3e71e5b6a32"><div class="ttname"><a href="classCEncoder.html#a8e25f046e6f9bb67a7c5b3e71e5b6a32">CEncoder::Flush</a></div><div class="ttdeci">void Flush()</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8cpp_source.html#l00310">Encoder.cpp:310</a></div></div>
<div class="ttc" id="classCEncoder_html_a93d5e9bf075e804eb9626d4b0292c4dd"><div class="ttname"><a href="classCEncoder.html#a93d5e9bf075e804eb9626d4b0292c4dd">CEncoder::UpdateLevelLength</a></div><div class="ttdeci">UINT32 UpdateLevelLength()</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8cpp_source.html#l00202">Encoder.cpp:202</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
<div class="ttc" id="classCPGFImage_html_a170fd448152303a2d44848a52a8916a0"><div class="ttname"><a href="classCPGFImage.html#a170fd448152303a2d44848a52a8916a0">CPGFImage::m_height</a></div><div class="ttdeci">UINT32 m_height[MaxChannels]</div><div class="ttdoc">height of each channel at current level</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00527">PGFimage.h:527</a></div></div>
<div class="ttc" id="classCPGFImage_html_a921e1ec08da8ddf6ab4d5657e5610fee"><div class="ttname"><a href="classCPGFImage.html#a921e1ec08da8ddf6ab4d5657e5610fee">CPGFImage::UpdatePostHeaderSize</a></div><div class="ttdeci">UINT32 UpdatePostHeaderSize()</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8cpp_source.html#l01123">PGFimage.cpp:1123</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1075a31893ee4ea2c686f5b471dd3664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1075a31893ee4ea2c686f5b471dd3664">&#9670;&nbsp;</a></span>WriteLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CPGFImage::WriteLevel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="PGFimage_8cpp_source.html#l01067">1067</a> of file <a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                           {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> &gt; 0);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        ASSERT(<a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a> &gt; 0);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="preprocessor">#ifdef __PGFROISUPPORT__</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">ROIisSupported</a>()) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> lastChannel = <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a> - 1;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                        <span class="comment">// get number of tiles and tile indices</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                        <span class="keyword">const</span> UINT32 nTiles = <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;GetNofTiles(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                        <span class="keyword">const</span> UINT32 lastTile = nTiles - 1;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                                <span class="comment">// last level also has LL band</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                                ASSERT(nTiles == 1);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;EncodeTileBuffer(); <span class="comment">// encode macro block with tile-end = true</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                        }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                        <span class="keywordflow">for</span> (UINT32 tileY=0; tileY &lt; nTiles; tileY++) {</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                                <span class="keywordflow">for</span> (UINT32 tileX=0; tileX &lt; nTiles; tileX++) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                        <span class="comment">// extract tile to macro block and encode already filled macro blocks with tile-end = false</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>, <span class="keyword">true</span>, tileX, tileY);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>, <span class="keyword">true</span>, tileX, tileY);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>, <span class="keyword">true</span>, tileX, tileY);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                                        <span class="keywordflow">if</span> (i == lastChannel &amp;&amp; tileY == lastTile &amp;&amp; tileX == lastTile) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                                                <span class="comment">// all necessary data are buffered. next call of EncodeTileBuffer will write the last piece of data of the current level.</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                                                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#acff251105003f4a4376a01180dbdc757">SetEncodedLevel</a>(--<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                        }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                        <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;EncodeTileBuffer(); <span class="comment">// encode last macro block with tile-end = true</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                                }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                        }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                }</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        } <span class="keywordflow">else</span> </div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">channels</a>; i++) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                        ASSERT(<a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a> == <a class="code" href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">m_header</a>.<a class="code" href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">nLevels</a>) { </div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                <span class="comment">// last level also has LL band</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                                <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                        }</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                        <span class="comment">//encoder.EncodeInterleaved(m_wtChannel[i], m_currentLevel, m_quant); // until version 4</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>); <span class="comment">// since version 5</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>); <span class="comment">// since version 5</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                        <a class="code" href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">m_wtChannel</a>[i]-&gt;<a class="code" href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">GetSubband</a>(<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>, <a class="code" href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a>)-&gt;<a class="code" href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">ExtractTile</a>(*<a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                }</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                <span class="comment">// all necessary data are buffered. next call of EncodeBuffer will write the last piece of data of the current level.</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                <a class="code" href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">m_encoder</a>-&gt;<a class="code" href="classCEncoder.html#acff251105003f4a4376a01180dbdc757">SetEncodedLevel</a>(--<a class="code" href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">m_currentLevel</a>);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;}</div><div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58adb4fbeed3fdce116b66baef714de6667">HH</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCSubband_html_a85cb6f480676ba18999f66e682370d65"><div class="ttname"><a href="classCSubband.html#a85cb6f480676ba18999f66e682370d65">CSubband::ExtractTile</a></div><div class="ttdeci">void ExtractTile(CEncoder &amp;encoder, bool tile=false, UINT32 tileX=0, UINT32 tileY=0)</div><div class="ttdef"><b>Definition:</b> <a href="Subband_8cpp_source.html#l00177">Subband.cpp:177</a></div></div>
<div class="ttc" id="classCPGFImage_html_a1a45b90decf13d8e8243bd84bac690d0"><div class="ttname"><a href="classCPGFImage.html#a1a45b90decf13d8e8243bd84bac690d0">CPGFImage::m_header</a></div><div class="ttdeci">PGFHeader m_header</div><div class="ttdoc">PGF file header.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00529">PGFimage.h:529</a></div></div>
<div class="ttc" id="structPGFHeader_html_a963890fa1e02a517923f9d0bf0d7e9eb"><div class="ttname"><a href="structPGFHeader.html#a963890fa1e02a517923f9d0bf0d7e9eb">PGFHeader::nLevels</a></div><div class="ttdeci">UINT8 nLevels</div><div class="ttdoc">number of FWT transforms</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00154">PGFtypes.h:154</a></div></div>
<div class="ttc" id="classCPGFImage_html_ae3901a689b7d1dd46d48b042c3d31d5c"><div class="ttname"><a href="classCPGFImage.html#ae3901a689b7d1dd46d48b042c3d31d5c">CPGFImage::m_wtChannel</a></div><div class="ttdeci">CWaveletTransform * m_wtChannel[MaxChannels]</div><div class="ttdoc">wavelet transformed color channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00521">PGFimage.h:521</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aadab8e0111f669b137544a4ecce92997">LH</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58aad18f3a107c5bc020bff8923ad43bbc1">HL</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="classCWaveletTransform_html_a347b59b1d7bc18de9294c714afac7ddf"><div class="ttname"><a href="classCWaveletTransform.html#a347b59b1d7bc18de9294c714afac7ddf">CWaveletTransform::GetSubband</a></div><div class="ttdeci">CSubband * GetSubband(int level, Orientation orientation)</div><div class="ttdef"><b>Definition:</b> <a href="WaveletTransform_8h_source.html#l00093">WaveletTransform.h:93</a></div></div>
<div class="ttc" id="classCPGFImage_html_a9db775cf3a36997b55106fbab7284c14"><div class="ttname"><a href="classCPGFImage.html#a9db775cf3a36997b55106fbab7284c14">CPGFImage::ROIisSupported</a></div><div class="ttdeci">bool ROIisSupported() const</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00466">PGFimage.h:466</a></div></div>
<div class="ttc" id="PGFtypes_8h_html_a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20"><div class="ttname"><a href="PGFtypes_8h.html#a871118a09520247c78a71ecd7b0abd58a11ea57bac296f79f8acbaf6fdf6bcc20">LL</a></div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00099">PGFtypes.h:99</a></div></div>
<div class="ttc" id="structPGFHeader_html_abda7a5f282421cd7e789da62f657efa0"><div class="ttname"><a href="structPGFHeader.html#abda7a5f282421cd7e789da62f657efa0">PGFHeader::channels</a></div><div class="ttdeci">UINT8 channels</div><div class="ttdoc">number of channels</div><div class="ttdef"><b>Definition:</b> <a href="PGFtypes_8h_source.html#l00157">PGFtypes.h:157</a></div></div>
<div class="ttc" id="classCPGFImage_html_a6ef048255812525cd56d7b04df5e6731"><div class="ttname"><a href="classCPGFImage.html#a6ef048255812525cd56d7b04df5e6731">CPGFImage::m_encoder</a></div><div class="ttdeci">CEncoder * m_encoder</div><div class="ttdoc">PGF encoder.</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00524">PGFimage.h:524</a></div></div>
<div class="ttc" id="classCPGFImage_html_a2790b468b6d4841cd34473c4b61d0c7f"><div class="ttname"><a href="classCPGFImage.html#a2790b468b6d4841cd34473c4b61d0c7f">CPGFImage::m_currentLevel</a></div><div class="ttdeci">int m_currentLevel</div><div class="ttdoc">transform level of current image</div><div class="ttdef"><b>Definition:</b> <a href="PGFimage_8h_source.html#l00532">PGFimage.h:532</a></div></div>
<div class="ttc" id="classCEncoder_html_acff251105003f4a4376a01180dbdc757"><div class="ttname"><a href="classCEncoder.html#acff251105003f4a4376a01180dbdc757">CEncoder::SetEncodedLevel</a></div><div class="ttdeci">void SetEncodedLevel(int currentLevel)</div><div class="ttdef"><b>Definition:</b> <a href="Encoder_8h_source.html#l00162">Encoder.h:162</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac262a389df92493dfca63b2f1f06fe78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac262a389df92493dfca63b2f1f06fe78">&#9670;&nbsp;</a></span>m_cb</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="PGFtypes_8h.html#a80e898ce785fbd6fb0dfcc5903be79c2">RefreshCB</a> CPGFImage::m_cb</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pointer to refresh callback procedure </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00545">545</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a45861a83c95188610063233149187f3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45861a83c95188610063233149187f3c">&#9670;&nbsp;</a></span>m_cbArg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* CPGFImage::m_cbArg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>refresh callback argument </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00546">546</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a36f7f20b38a9cb3a9c88032f5f886345"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f7f20b38a9cb3a9c88032f5f886345">&#9670;&nbsp;</a></span>m_channel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="PGFtypes_8h.html#acb1ee3f52ccfad782dcaa0abd79e5d05">DataT</a>* CPGFImage::m_channel[<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>untransformed channels in YUV format </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00522">522</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a2790b468b6d4841cd34473c4b61d0c7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2790b468b6d4841cd34473c4b61d0c7f">&#9670;&nbsp;</a></span>m_currentLevel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CPGFImage::m_currentLevel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>transform level of current image </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00532">532</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a1058b29a3d046e171a2fe48168b66d38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1058b29a3d046e171a2fe48168b66d38">&#9670;&nbsp;</a></span>m_decoder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCDecoder.html">CDecoder</a>* CPGFImage::m_decoder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PGF decoder. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00523">523</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a9226595ea6b907e4d07301a6ee641b87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9226595ea6b907e4d07301a6ee641b87">&#9670;&nbsp;</a></span>m_downsample</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::m_downsample</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>chrominance channels are downsampled </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00535">535</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a6ef048255812525cd56d7b04df5e6731"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef048255812525cd56d7b04df5e6731">&#9670;&nbsp;</a></span>m_encoder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCEncoder.html">CEncoder</a>* CPGFImage::m_encoder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PGF encoder. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00524">524</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a6925d3950e8f48487205d46de7920d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6925d3950e8f48487205d46de7920d3e">&#9670;&nbsp;</a></span>m_favorSpeedOverSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::m_favorSpeedOverSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>favor encoding speed over compression ratio </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00536">536</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a1a45b90decf13d8e8243bd84bac690d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a45b90decf13d8e8243bd84bac690d0">&#9670;&nbsp;</a></span>m_header</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPGFHeader.html">PGFHeader</a> CPGFImage::m_header</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PGF file header. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00529">529</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a170fd448152303a2d44848a52a8916a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a170fd448152303a2d44848a52a8916a0">&#9670;&nbsp;</a></span>m_height</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::m_height[<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>height of each channel at current level </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00527">527</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a1635ef5dca13bd07276d112a72316a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1635ef5dca13bd07276d112a72316a73">&#9670;&nbsp;</a></span>m_levelLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32* CPGFImage::m_levelLength</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>length of each level in bytes; first level starts immediately after this array </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00525">525</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="adc2499451b8f96483a892e53fe5849b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc2499451b8f96483a892e53fe5849b1">&#9670;&nbsp;</a></span>m_percent</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CPGFImage::m_percent</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>progress [0..1] </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00547">547</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="ab8635df22839ffb68bada53e38b9ce73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8635df22839ffb68bada53e38b9ce73">&#9670;&nbsp;</a></span>m_postHeader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPGFPostHeader.html">PGFPostHeader</a> CPGFImage::m_postHeader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PGF post-header. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00530">530</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="ad5ed0ec587742ebf46f72be4abde305d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ed0ec587742ebf46f72be4abde305d">&#9670;&nbsp;</a></span>m_preHeader</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPGFPreHeader.html">PGFPreHeader</a> CPGFImage::m_preHeader</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PGF pre-header. </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00528">528</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a8b4d6d5ef343f0f428b35c9bf1020569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b4d6d5ef343f0f428b35c9bf1020569">&#9670;&nbsp;</a></span>m_progressMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="PGFtypes_8h.html#a04561479f4f8aa5a0775d8b541a1157e">ProgressMode</a> CPGFImage::m_progressMode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>progress mode used in Read and Write; PM_Relative is default mode </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00548">548</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a57cc024db6e510f95f3238f448a0fed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cc024db6e510f95f3238f448a0fed5">&#9670;&nbsp;</a></span>m_quant</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BYTE CPGFImage::m_quant</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>quantization parameter </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00534">534</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a79627ae9b19c69589eaa2ba7711ddd00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79627ae9b19c69589eaa2ba7711ddd00">&#9670;&nbsp;</a></span>m_roi</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPGFRect.html">PGFRect</a> CPGFImage::m_roi</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>region of interest </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00541">541</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="af6d3fe5a8622634d1d0faf56cde335ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6d3fe5a8622634d1d0faf56cde335ef">&#9670;&nbsp;</a></span>m_streamReinitialized</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::m_streamReinitialized</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>stream has been reinitialized </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00540">540</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a01d0752d97900040fa1db7f02d4770cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01d0752d97900040fa1db7f02d4770cb">&#9670;&nbsp;</a></span>m_useOMPinDecoder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::m_useOMPinDecoder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>use Open MP in decoder </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00538">538</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a140110570c6d492b23db50189d3f4d48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a140110570c6d492b23db50189d3f4d48">&#9670;&nbsp;</a></span>m_useOMPinEncoder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CPGFImage::m_useOMPinEncoder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>use Open MP in encoder </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00537">537</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="a18e28eef51d17c3bd0be4d4f758a6a86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e28eef51d17c3bd0be4d4f758a6a86">&#9670;&nbsp;</a></span>m_userDataPolicy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::m_userDataPolicy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>user data (metadata) policy during open </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00533">533</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="acf4ae6e169ddf84e32cf9b57a22800b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf4ae6e169ddf84e32cf9b57a22800b3">&#9670;&nbsp;</a></span>m_userDataPos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT64 CPGFImage::m_userDataPos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>stream position of user data </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00531">531</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="ab6d97aca28795fae697fdda4b8acd8f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6d97aca28795fae697fdda4b8acd8f9">&#9670;&nbsp;</a></span>m_width</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UINT32 CPGFImage::m_width[<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>width of each channel at current level </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00526">526</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<a id="ae3901a689b7d1dd46d48b042c3d31d5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3901a689b7d1dd46d48b042c3d31d5c">&#9670;&nbsp;</a></span>m_wtChannel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCWaveletTransform.html">CWaveletTransform</a>* CPGFImage::m_wtChannel[<a class="el" href="PGFtypes_8h.html#a94219182f88d4dbed1021ed04db75e41">MaxChannels</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>wavelet transformed color channels </p>

<p class="definition">Definition at line <a class="el" href="PGFimage_8h_source.html#l00521">521</a> of file <a class="el" href="PGFimage_8h_source.html">PGFimage.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="PGFimage_8h_source.html">PGFimage.h</a></li>
<li><a class="el" href="PGFimage_8cpp_source.html">PGFimage.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCPGFImage.html">CPGFImage</a></li>
    <li class="footer">Generated on Sun Jan 17 2021 12:01:20 for libpgf by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
